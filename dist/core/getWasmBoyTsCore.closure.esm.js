const c=new Uint8ClampedArray(9109504),aa={size:()=>9109504,grow:()=>{},wasmByteMemory:c};
var ba=65536,ca=67584,da=ca+128,ea=da+23552,fa=ea+93184,ha=fa+196608,ia=ha+147456,ja=ia-ca+15360,ka=ia+15360,la=ka+131072,ma=la+131072,na=ma+131072,oa=na+131072,pa=oa+131072,qa=pa+131072,ra=qa+2560,sa=ra+8258560,ta=sa+65535+1,ua=Math.ceil(ta/1024/64)+1,e=function(){function a(){}a.enableBootRom=!1;a.useGbcWhenAvailable=!0;a.audioBatchProcessing=!1;a.graphicsBatchProcessing=!1;a.timersBatchProcessing=!1;a.graphicsDisableScanlineRendering=!1;a.audioAccumulateSamples=!1;a.tileRendering=!1;a.tileCaching=
!1;a.enableAudioDebugging=!1;return a}();function va(a,b){a=1<<a&255;g.registerF=0<b?g.registerF|a:g.registerF&(255^a);return g.registerF}function k(a){va(7,a)}function l(a){va(6,a)}function m(a){va(5,a)}function n(a){va(4,a)}function wa(){return g.registerF>>7&1}function xa(){return g.registerF>>4&1}function ya(a,b){0<=b?m(0!==((a&15)+(b&15)&16)):m((Math.abs(b)&15)>(a&15))}function za(a,b){0<=b?n(a>(a+b&255)):n(Math.abs(b)>a)}
function Aa(a,b,d){d?(a=a^b^a+b,m(0!==(a&16)),n(0!==(a&256))):(d=a+b&65535,n(d<a),m(0!==((a^b^d)&4096)))}
var p=function(){function a(){}a.bgWhite=15921906;a.bgLightGrey=10526880;a.bgDarkGrey=5789784;a.bgBlack=526344;a.obj0White=15921906;a.obj0LightGrey=10526880;a.obj0DarkGrey=5789784;a.obj0Black=526344;a.obj1White=15921906;a.obj1LightGrey=10526880;a.obj1DarkGrey=5789784;a.obj1Black=526344;return a}(),Ba=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=5439232;a.bgDarkGrey=16728576;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=5439232;a.obj0DarkGrey=16728576;a.obj0Black=0;a.obj1White=16777215;
a.obj1LightGrey=5439232;a.obj1DarkGrey=16728576;a.obj1Black=0;return a}(),Ca=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16776960;a.bgDarkGrey=16711680;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16776960;a.obj0DarkGrey=16711680;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16776960;a.obj1DarkGrey=16711680;a.obj1Black=0;return a}(),Da=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16756067;a.bgDarkGrey=8663296;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16756067;
a.obj0DarkGrey=8663296;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),Ea=function(){function a(){}a.bgWhite=0;a.bgLightGrey=33924;a.bgDarkGrey=16768512;a.bgBlack=16777215;a.obj0White=0;a.obj0LightGrey=33924;a.obj0DarkGrey=16768512;a.obj0Black=16777215;a.obj1White=0;a.obj1LightGrey=33924;a.obj1DarkGrey=16768512;a.obj1Black=16777215;return a}(),Fa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=10855845;a.bgDarkGrey=5395026;a.bgBlack=
0;a.obj0White=16777215;a.obj0LightGrey=10855845;a.obj0DarkGrey=5395026;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=10855845;a.obj1DarkGrey=5395026;a.obj1Black=0;return a}(),Ga=function(){function a(){}a.bgWhite=16777125;a.bgLightGrey=16749716;a.bgDarkGrey=9737471;a.bgBlack=0;a.obj0White=16777125;a.obj0LightGrey=16749716;a.obj0DarkGrey=9737471;a.obj0Black=0;a.obj1White=16777125;a.obj1LightGrey=16749716;a.obj1DarkGrey=9737471;a.obj1Black=0;return a}(),Ha=function(){function a(){}a.bgWhite=16770757;
a.bgLightGrey=13540484;a.bgDarkGrey=8678185;a.bgBlack=5910792;a.obj0White=16777215;a.obj0LightGrey=16756067;a.obj0DarkGrey=8663296;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),Ia=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=8126257;a.bgDarkGrey=25541;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=
0;return a}(),Ja=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=9211102;a.bgDarkGrey=5395084;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),Ka=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=8126257;a.obj0DarkGrey=33792;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=
6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),La=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),Oa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16776960;a.bgDarkGrey=8079872;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=6530559;a.obj0DarkGrey=255;a.obj0Black=
0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),Pa=function(){function a(){}a.bgWhite=10853631;a.bgLightGrey=16776960;a.bgDarkGrey=25344;a.bgBlack=0;a.obj0White=10853631;a.obj0LightGrey=16776960;a.obj0DarkGrey=25344;a.obj0Black=0;a.obj1White=10853631;a.obj1LightGrey=16776960;a.obj1DarkGrey=25344;a.obj1Black=0;return a}(),Qa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=
16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),Ra=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=8126257;a.obj0DarkGrey=33792;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),Sa=function(){function a(){}a.bgWhite=11908607;a.bgLightGrey=16777108;a.bgDarkGrey=11360834;
a.bgBlack=0;a.obj0White=0;a.obj0LightGrey=16777215;a.obj0DarkGrey=16745604;a.obj0Black=9714234;a.obj1White=0;a.obj1LightGrey=16777215;a.obj1DarkGrey=16745604;a.obj1Black=9714234;return a}(),Ta=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=11382148;a.bgDarkGrey=4354939;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16741120;a.obj0DarkGrey=9716224;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=5946879;a.obj1DarkGrey=16711680;a.obj1Black=255;return a}(),Ua=function(){function a(){}
a.bgWhite=16777116;a.bgLightGrey=9745919;a.bgDarkGrey=6526067;a.bgBlack=14906;a.obj0White=16762178;a.obj0LightGrey=16766464;a.obj0DarkGrey=9714176;a.obj0Black=4849664;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),Va=function(){function a(){}a.bgWhite=7077632;a.bgLightGrey=16777215;a.bgDarkGrey=16732746;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16777215;a.obj0DarkGrey=6530559;a.obj0Black=255;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=
8663296;a.obj1Black=0;return a}(),Wa=function(){function a(){}a.bgWhite=10853631;a.bgLightGrey=16776960;a.bgDarkGrey=25344;a.bgBlack=0;a.obj0White=16737106;a.obj0LightGrey=14024704;a.obj0DarkGrey=6488064;a.obj0Black=0;a.obj1White=255;a.obj1LightGrey=16777215;a.obj1DarkGrey=16777083;a.obj1Black=34047;return a}(),Xa=function(){function a(){}a.bgWhite=16777166;a.bgLightGrey=6549487;a.bgDarkGrey=10257457;a.bgBlack=5921370;a.obj0White=16777215;a.obj0LightGrey=16741120;a.obj0DarkGrey=9716224;a.obj0Black=
0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),Ya=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=65280;a.obj0DarkGrey=3245056;a.obj0Black=18944;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),Za=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16776960;a.obj0LightGrey=
16711680;a.obj0DarkGrey=6488064;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),$a=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=11382148;a.bgDarkGrey=4354939;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16756067;a.obj0DarkGrey=16756067;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),q=function(){function a(){}a.bgWhite=p.bgWhite;a.bgLightGrey=p.bgLightGrey;a.bgDarkGrey=
p.bgDarkGrey;a.bgBlack=p.bgBlack;a.obj0White=p.obj0White;a.obj0LightGrey=p.obj0LightGrey;a.obj0DarkGrey=p.obj0DarkGrey;a.obj0Black=p.obj0Black;a.obj1White=p.obj1White;a.obj1LightGrey=p.obj1LightGrey;a.obj1DarkGrey=p.obj1DarkGrey;a.obj1Black=p.obj1Black;return a}();
function ab(a){switch(a){case 0:q.bgWhite=p.bgWhite;q.bgLightGrey=p.bgLightGrey;q.bgDarkGrey=p.bgDarkGrey;q.bgBlack=p.bgBlack;q.obj0White=p.obj0White;q.obj0LightGrey=p.obj0LightGrey;q.obj0DarkGrey=p.obj0DarkGrey;q.obj0Black=p.obj0Black;q.obj1White=p.obj1White;q.obj1LightGrey=p.obj1LightGrey;q.obj1DarkGrey=p.obj1DarkGrey;q.obj1Black=p.obj1Black;break;case 1:q.bgWhite=Da.bgWhite;q.bgLightGrey=Da.bgLightGrey;q.bgDarkGrey=Da.bgDarkGrey;q.bgBlack=Da.bgBlack;q.obj0White=Da.obj0White;q.obj0LightGrey=Da.obj0LightGrey;
q.obj0DarkGrey=Da.obj0DarkGrey;q.obj0Black=Da.obj0Black;q.obj1White=Da.obj1White;q.obj1LightGrey=Da.obj1LightGrey;q.obj1DarkGrey=Da.obj1DarkGrey;q.obj1Black=Da.obj1Black;break;case 2:q.bgWhite=Ka.bgWhite;q.bgLightGrey=Ka.bgLightGrey;q.bgDarkGrey=Ka.bgDarkGrey;q.bgBlack=Ka.bgBlack;q.obj0White=Ka.obj0White;q.obj0LightGrey=Ka.obj0LightGrey;q.obj0DarkGrey=Ka.obj0DarkGrey;q.obj0Black=Ka.obj0Black;q.obj1White=Ka.obj1White;q.obj1LightGrey=Ka.obj1LightGrey;q.obj1DarkGrey=Ka.obj1DarkGrey;q.obj1Black=Ka.obj1Black;
break;case 3:q.bgWhite=Ha.bgWhite;q.bgLightGrey=Ha.bgLightGrey;q.bgDarkGrey=Ha.bgDarkGrey;q.bgBlack=Ha.bgBlack;q.obj0White=Ha.obj0White;q.obj0LightGrey=Ha.obj0LightGrey;q.obj0DarkGrey=Ha.obj0DarkGrey;q.obj0Black=Ha.obj0Black;q.obj1White=Ha.obj1White;q.obj1LightGrey=Ha.obj1LightGrey;q.obj1DarkGrey=Ha.obj1DarkGrey;q.obj1Black=Ha.obj1Black;break;case 4:q.bgWhite=Ba.bgWhite;q.bgLightGrey=Ba.bgLightGrey;q.bgDarkGrey=Ba.bgDarkGrey;q.bgBlack=Ba.bgBlack;q.obj0White=Ba.obj0White;q.obj0LightGrey=Ba.obj0LightGrey;
q.obj0DarkGrey=Ba.obj0DarkGrey;q.obj0Black=Ba.obj0Black;q.obj1White=Ba.obj1White;q.obj1LightGrey=Ba.obj1LightGrey;q.obj1DarkGrey=Ba.obj1DarkGrey;q.obj1Black=Ba.obj1Black;break;case 5:q.bgWhite=Ia.bgWhite;q.bgLightGrey=Ia.bgLightGrey;q.bgDarkGrey=Ia.bgDarkGrey;q.bgBlack=Ia.bgBlack;q.obj0White=Ia.obj0White;q.obj0LightGrey=Ia.obj0LightGrey;q.obj0DarkGrey=Ia.obj0DarkGrey;q.obj0Black=Ia.obj0Black;q.obj1White=Ia.obj1White;q.obj1LightGrey=Ia.obj1LightGrey;q.obj1DarkGrey=Ia.obj1DarkGrey;q.obj1Black=Ia.obj1Black;
break;case 6:q.bgWhite=Ea.bgWhite;q.bgLightGrey=Ea.bgLightGrey;q.bgDarkGrey=Ea.bgDarkGrey;q.bgBlack=Ea.bgBlack;q.obj0White=Ea.obj0White;q.obj0LightGrey=Ea.obj0LightGrey;q.obj0DarkGrey=Ea.obj0DarkGrey;q.obj0Black=Ea.obj0Black;q.obj1White=Ea.obj1White;q.obj1LightGrey=Ea.obj1LightGrey;q.obj1DarkGrey=Ea.obj1DarkGrey;q.obj1Black=Ea.obj1Black;break;case 7:q.bgWhite=Ga.bgWhite;q.bgLightGrey=Ga.bgLightGrey;q.bgDarkGrey=Ga.bgDarkGrey;q.bgBlack=Ga.bgBlack;q.obj0White=Ga.obj0White;q.obj0LightGrey=Ga.obj0LightGrey;
q.obj0DarkGrey=Ga.obj0DarkGrey;q.obj0Black=Ga.obj0Black;q.obj1White=Ga.obj1White;q.obj1LightGrey=Ga.obj1LightGrey;q.obj1DarkGrey=Ga.obj1DarkGrey;q.obj1Black=Ga.obj1Black;break;case 8:q.bgWhite=Ca.bgWhite;q.bgLightGrey=Ca.bgLightGrey;q.bgDarkGrey=Ca.bgDarkGrey;q.bgBlack=Ca.bgBlack;q.obj0White=Ca.obj0White;q.obj0LightGrey=Ca.obj0LightGrey;q.obj0DarkGrey=Ca.obj0DarkGrey;q.obj0Black=Ca.obj0Black;q.obj1White=Ca.obj1White;q.obj1LightGrey=Ca.obj1LightGrey;q.obj1DarkGrey=Ca.obj1DarkGrey;q.obj1Black=Ca.obj1Black;
break;case 9:q.bgWhite=Oa.bgWhite;q.bgLightGrey=Oa.bgLightGrey;q.bgDarkGrey=Oa.bgDarkGrey;q.bgBlack=Oa.bgBlack;q.obj0White=Oa.obj0White;q.obj0LightGrey=Oa.obj0LightGrey;q.obj0DarkGrey=Oa.obj0DarkGrey;q.obj0Black=Oa.obj0Black;q.obj1White=Oa.obj1White;q.obj1LightGrey=Oa.obj1LightGrey;q.obj1DarkGrey=Oa.obj1DarkGrey;q.obj1Black=Oa.obj1Black;break;case 10:q.bgWhite=La.bgWhite;q.bgLightGrey=La.bgLightGrey;q.bgDarkGrey=La.bgDarkGrey;q.bgBlack=La.bgBlack;q.obj0White=La.obj0White;q.obj0LightGrey=La.obj0LightGrey;
q.obj0DarkGrey=La.obj0DarkGrey;q.obj0Black=La.obj0Black;q.obj1White=La.obj1White;q.obj1LightGrey=La.obj1LightGrey;q.obj1DarkGrey=La.obj1DarkGrey;q.obj1Black=La.obj1Black;break;case 11:q.bgWhite=Ja.bgWhite;q.bgLightGrey=Ja.bgLightGrey;q.bgDarkGrey=Ja.bgDarkGrey;q.bgBlack=Ja.bgBlack;q.obj0White=Ja.obj0White;q.obj0LightGrey=Ja.obj0LightGrey;q.obj0DarkGrey=Ja.obj0DarkGrey;q.obj0Black=Ja.obj0Black;q.obj1White=Ja.obj1White;q.obj1LightGrey=Ja.obj1LightGrey;q.obj1DarkGrey=Ja.obj1DarkGrey;q.obj1Black=Ja.obj1Black;
break;case 12:q.bgWhite=Fa.bgWhite,q.bgLightGrey=Fa.bgLightGrey,q.bgDarkGrey=Fa.bgDarkGrey,q.bgBlack=Fa.bgBlack,q.obj0White=Fa.obj0White,q.obj0LightGrey=Fa.obj0LightGrey,q.obj0DarkGrey=Fa.obj0DarkGrey,q.obj0Black=Fa.obj0Black,q.obj1White=Fa.obj1White,q.obj1LightGrey=Fa.obj1LightGrey,q.obj1DarkGrey=Fa.obj1DarkGrey,q.obj1Black=Fa.obj1Black}}function r(a,b){return(a&255)<<8|b&255}function v(a){return(a&65280)>>8}function z(a,b){return b&~(1<<a)}function B(a,b){return 0!=(b&1<<a)}
var bb=function(){function a(){}a.memoryLocationBackgroundPaletteIndex=65384;a.memoryLocationBackgroundPaletteData=65385;a.memoryLocationSpritePaletteIndex=65386;a.memoryLocationSpritePaletteData=65387;a.memoryLocationBackgroundPalette=65351;a.memoryLocationSpritePaletteOne=65352;a.memoryLocationSpritePaletteTwo=65353;return a}();
function cb(a,b){a=C(b)>>2*a&3;if(b===bb.memoryLocationSpritePaletteOne)switch(b=q.obj0White,a){case 1:b=q.obj0LightGrey;break;case 2:b=q.obj0DarkGrey;break;case 3:b=q.obj0Black}else if(b===bb.memoryLocationSpritePaletteTwo)switch(b=q.obj1White,a){case 1:b=q.obj1LightGrey;break;case 2:b=q.obj1DarkGrey;break;case 3:b=q.obj1Black}else switch(b=q.bgWhite,a){case 1:b=q.bgLightGrey;break;case 2:b=q.bgDarkGrey;break;case 3:b=q.bgBlack}return b}
function db(a,b,d){b=8*a+2*b;a=eb(b+1,d);d=eb(b,d);return r(a,d)}function fb(a,b){a*=5;return 8*((b&31<<a)>>a)}function eb(a,b){a&=63;b&&(a+=64);return c[ca+a]}function gb(a,b,d,f){void 0===d&&(d=0);void 0===f&&(f=!1);d&=3;f&&(d|=4);c[da+(160*b+a)]=d}var hb=function(){function a(){}a.tileId=-1;a.horizontalFlip=!1;a.nextXIndexToPerformCacheCheck=-1;return a}();
function ib(a,b,d,f,h,u,y,x,t,w,H,A,I,X){var Ma=0;b=jb(b,a);a=kb(b+2*u,d);d=kb(b+2*u+1,d);for(u=f;u<=h;++u)if(b=y+(u-f),b<t){var Q=u;if(0>I||!B(5,I))Q=7-Q;var K=0;B(Q,d)&&(K+=1,K<<=1);B(Q,a)&&(K+=1);if(g.GBCEnabled&&(0<=I||0<=X)){Q=0<=X;var F=I&7;Q&&(F=X&7);var Y=db(F,K,Q);Q=fb(0,Y);F=fb(1,Y);Y=fb(2,Y)}else if(0>=A&&(A=D.memoryLocationBackgroundPalette),H){F=K;Y=H;void 0===Y&&(Y=!1);Q=F;Y||(Q=C(A)>>(F<<1)&3);F=242;switch(Q){case 1:F=160;break;case 2:F=88;break;case 3:F=8}F=Q=Y=F}else Y=cb(K,A),Q=
(Y&16711680)>>16,F=(Y&65280)>>8,Y&=255;var Na=3*(x*t+b);c[w+Na+0]=Q;c[w+Na+1]=F;c[w+Na+2]=Y;Q=!1;0<=I&&(Q=B(7,I));gb(b,x,K,Q);Ma++}return Ma}function jb(a,b){a===D.memoryLocationTileDataSelectZeroStart&&(b=B(7,b)?b-128:b+128);return a+16*b}function lb(a,b){switch(a){case 1:return B(b,129);case 2:return B(b,135);case 3:return B(b,126);default:return B(b,1)}}
var L=function(){function a(){}a.updateNRx0=function(b){var d=a.NRx0Negate;a.NRx0SweepPeriod=(b&112)>>4;a.NRx0Negate=B(3,b);a.NRx0SweepShift=b&7;d&&!a.NRx0Negate&&a.sweepNegateShouldDisableChannelOnClear&&(a.isEnabled=!1)};a.updateNRx1=function(b){a.NRx1Duty=b>>6&3;a.NRx1LengthLoad=b&63;a.lengthCounter=a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.isEnabled&&(0===a.NRx2EnvelopePeriod&&a.isEnvelopeAutomaticUpdating&&(a.volume=a.volume+1&15),a.NRx2EnvelopeAddMode!==B(3,b)&&(a.volume=16-
a.volume&15));a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=B(3,b);a.NRx2EnvelopePeriod=b&7;b=0<(b&248);a.isDacEnabled=b;b||(a.isEnabled=!1)};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){var d=b&7;a.NRx4FrequencyMSB=d;a.frequency=d<<8|a.NRx3FrequencyLSB;d=1===(E.frameSequencer&1);var f=!a.NRx4LengthEnabled&&B(6,b);!d&&0<a.lengthCounter&&f&&(--a.lengthCounter,B(7,b)||0!==a.lengthCounter||(a.isEnabled=!1));a.NRx4LengthEnabled=B(6,b);
B(7,b)&&(a.trigger(),!d&&a.lengthCounter===a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.isEnabled;c[1025+50*a.saveStateSlot]=a.frequencyTimer;c[1029+50*a.saveStateSlot]=a.envelopeCounter;c[1033+50*a.saveStateSlot]=a.lengthCounter;c[1038+50*a.saveStateSlot]=a.volume;c[1043+50*a.saveStateSlot]=a.dutyCycle;c[1044+50*a.saveStateSlot]=a.waveFormPositionOnDuty;c[1049+50*a.saveStateSlot]=a.isSweepEnabled;c[1050+50*a.saveStateSlot]=a.sweepCounter;
c[1055+50*a.saveStateSlot]=a.sweepShadowFrequency;c[1057+50*a.saveStateSlot]=a.isEnvelopeAutomaticUpdating};a.loadState=function(){a.isEnabled=G(1024+50*a.saveStateSlot);a.frequencyTimer=c[1025+50*a.saveStateSlot];a.envelopeCounter=c[1029+50*a.saveStateSlot];a.lengthCounter=c[1033+50*a.saveStateSlot];a.volume=c[1038+50*a.saveStateSlot];a.dutyCycle=c[1043+50*a.saveStateSlot];a.waveFormPositionOnDuty=c[1044+50*a.saveStateSlot];a.isSweepEnabled=G(1049+50*a.saveStateSlot);a.sweepCounter=c[1050+50*a.saveStateSlot];
a.sweepShadowFrequency=c[1055+50*a.saveStateSlot];a.isEnvelopeAutomaticUpdating=G(1057+50*a.saveStateSlot)};a.initialize=function(){J(a.memoryLocationNRx0,128);J(a.memoryLocationNRx1,191);J(a.memoryLocationNRx2,243);J(a.memoryLocationNRx3,193);J(a.memoryLocationNRx4,191);g.BootROMEnabled&&(J(a.memoryLocationNRx1,63),J(a.memoryLocationNRx2,0),J(a.memoryLocationNRx3,0),J(a.memoryLocationNRx4,184))};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=
function(){var b=2048-a.frequency<<2;g.GBCDoubleSpeed&&(b<<=2);a.frequencyTimer=b};a.getSample=function(b){var d=a.frequencyTimer;for(d-=b;0>=d;)b=Math.abs(d),a.resetTimer(),d=a.frequencyTimer,d-=b,a.waveFormPositionOnDuty=a.waveFormPositionOnDuty+1&7;a.frequencyTimer=d;if(a.isEnabled&&a.isDacEnabled)d=a.volume&15;else return 15;b=1;lb(a.NRx1Duty,a.waveFormPositionOnDuty)||(b=-b);return b*d+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.resetTimer();
a.envelopeCounter=0===a.NRx2EnvelopePeriod?8:a.NRx2EnvelopePeriod;a.isEnvelopeAutomaticUpdating=!0;a.volume=a.NRx2StartingVolume;a.sweepShadowFrequency=a.frequency;a.sweepCounter=0===a.NRx0SweepPeriod?8:a.NRx0SweepPeriod;a.isSweepEnabled=0<a.NRx0SweepPeriod||0<a.NRx0SweepShift;a.sweepNegateShouldDisableChannelOnClear=!1;var b;if(b=0<a.NRx0SweepShift)b=2047<mb()?!0:!1;b&&(a.isEnabled=!1);a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){b=a.cycleCounter+b;a.cycleCounter=b;return!(0<
a.frequencyTimer-b)};a.updateSweep=function(){if(a.isEnabled&&a.isSweepEnabled){var b=a.sweepCounter-1;0>=b?0===a.NRx0SweepPeriod?a.sweepCounter=8:(a.sweepCounter=a.NRx0SweepPeriod,b=mb(),2047<b&&(a.isEnabled=!1),0<a.NRx0SweepShift&&(a.setFrequency(b),2047<mb()&&(a.isEnabled=!1))):a.sweepCounter=b}};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&(--b,0===b&&(a.isEnabled=!1));a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b)if(0===a.NRx2EnvelopePeriod)b=
8;else if(b=a.NRx2EnvelopePeriod,0!==b&&a.isEnvelopeAutomaticUpdating){var d=a.volume;d=a.NRx2EnvelopeAddMode?d+1:d-1;d&=15;15>d?a.volume=d:a.isEnvelopeAutomaticUpdating=!1}a.envelopeCounter=b};a.setFrequency=function(b){a.sweepShadowFrequency=b;var d=b>>8&7;b&=255;var f=C(a.memoryLocationNRx4)&248|d;J(a.memoryLocationNRx3,b);J(a.memoryLocationNRx4,f);a.NRx3FrequencyLSB=b;a.NRx4FrequencyMSB=d;a.frequency=a.NRx4FrequencyMSB<<8|a.NRx3FrequencyLSB};a.cycleCounter=0;a.MAX_LENGTH=64;a.memoryLocationNRx0=
65296;a.NRx0SweepPeriod=0;a.NRx0Negate=!1;a.NRx0SweepShift=0;a.memoryLocationNRx1=65297;a.NRx1Duty=0;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65298;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=65299;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65300;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.channelNumber=1;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.envelopeCounter=0;a.isEnvelopeAutomaticUpdating=!1;a.lengthCounter=0;a.volume=
0;a.dutyCycle=0;a.waveFormPositionOnDuty=0;a.isSweepEnabled=!1;a.sweepCounter=0;a.sweepShadowFrequency=0;a.sweepNegateShouldDisableChannelOnClear=!1;a.saveStateSlot=7;return a}();function mb(){var a=L.sweepShadowFrequency,b=a>>L.NRx0SweepShift;L.NRx0Negate?(L.sweepNegateShouldDisableChannelOnClear=!0,b=a-b):b=a+b;return b}
var M=function(){function a(){}a.updateNRx1=function(b){a.NRx1Duty=b>>6&3;a.NRx1LengthLoad=b&63;a.lengthCounter=a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.isEnabled&&(0===a.NRx2EnvelopePeriod&&a.isEnvelopeAutomaticUpdating&&(a.volume=a.volume+1&15),a.NRx2EnvelopeAddMode!==B(3,b)&&(a.volume=16-a.volume&15));a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=B(3,b);a.NRx2EnvelopePeriod=b&7;b=0<(b&248);a.isDacEnabled=b;b||(a.isEnabled=b)};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;
a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){var d=b&7;a.NRx4FrequencyMSB=d;a.frequency=d<<8|a.NRx3FrequencyLSB;d=1===(E.frameSequencer&1);var f=!a.NRx4LengthEnabled&&B(6,b);!d&&0<a.lengthCounter&&f&&(--a.lengthCounter,B(7,b)||0!==a.lengthCounter||(a.isEnabled=!1));a.NRx4LengthEnabled=B(6,b);B(7,b)&&(a.trigger(),!d&&a.lengthCounter===a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.isEnabled;c[1025+50*a.saveStateSlot]=a.frequencyTimer;
c[1029+50*a.saveStateSlot]=a.envelopeCounter;c[1033+50*a.saveStateSlot]=a.lengthCounter;c[1038+50*a.saveStateSlot]=a.volume;c[1043+50*a.saveStateSlot]=a.dutyCycle;c[1044+50*a.saveStateSlot]=a.waveFormPositionOnDuty;c[1045+50*a.saveStateSlot]=a.isEnvelopeAutomaticUpdating};a.loadState=function(){a.isEnabled=G(1024+50*a.saveStateSlot);a.frequencyTimer=c[1025+50*a.saveStateSlot];a.envelopeCounter=c[1029+50*a.saveStateSlot];a.lengthCounter=c[1033+50*a.saveStateSlot];a.volume=c[1038+50*a.saveStateSlot];
a.dutyCycle=c[1043+50*a.saveStateSlot];a.waveFormPositionOnDuty=c[1044+50*a.saveStateSlot];a.isEnvelopeAutomaticUpdating=G(1057+50*a.saveStateSlot)};a.initialize=function(){J(a.memoryLocationNRx1-1,255);J(a.memoryLocationNRx1,63);J(a.memoryLocationNRx2,0);J(a.memoryLocationNRx3,0);J(a.memoryLocationNRx4,184)};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){a.frequencyTimer=2048-a.frequency<<2<<g.GBCDoubleSpeed};a.getSample=
function(b){var d=a.frequencyTimer;for(d-=b;0>=d;)b=Math.abs(d),a.resetTimer(),d=a.frequencyTimer,d-=b,a.waveFormPositionOnDuty=a.waveFormPositionOnDuty+1&7;a.frequencyTimer=d;if(a.isEnabled&&a.isDacEnabled)d=a.volume&15;else return 15;b=1;lb(a.NRx1Duty,a.waveFormPositionOnDuty)||(b=-b);return b*d+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.resetTimer();a.envelopeCounter=0===a.NRx2EnvelopePeriod?8:a.NRx2EnvelopePeriod;a.isEnvelopeAutomaticUpdating=
!0;a.volume=a.NRx2StartingVolume;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){b=a.cycleCounter+b;a.cycleCounter=b;return!(0<a.frequencyTimer-b)};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b)if(0===a.NRx2EnvelopePeriod)b=8;else if(b=a.NRx2EnvelopePeriod,0!==b&&a.isEnvelopeAutomaticUpdating){var d=a.volume;d=a.NRx2EnvelopeAddMode?d+1:d-1;d&=15;
15>d?a.volume=d:a.isEnvelopeAutomaticUpdating=!1}a.envelopeCounter=b};a.setFrequency=function(b){var d=b>>8;b&=255;var f=C(a.memoryLocationNRx4)&248|d;J(a.memoryLocationNRx3,b);J(a.memoryLocationNRx4,f);a.NRx3FrequencyLSB=b;a.NRx4FrequencyMSB=d;a.frequency=d<<8|b};a.cycleCounter=0;a.MAX_LENGTH=64;a.memoryLocationNRx0=65301;a.memoryLocationNRx1=65302;a.NRx1Duty=0;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65303;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=
65304;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65305;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.channelNumber=2;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.envelopeCounter=0;a.isEnvelopeAutomaticUpdating=!1;a.lengthCounter=0;a.volume=0;a.dutyCycle=0;a.waveFormPositionOnDuty=0;a.saveStateSlot=8;return a}(),N=function(){function a(){}a.updateNRx0=function(b){b=B(7,b);!a.isDacEnabled&&b&&(a.sampleBuffer=0);a.isDacEnabled=b;b||(a.isEnabled=b)};a.updateNRx1=function(b){a.NRx1LengthLoad=
b;a.lengthCounter=a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.NRx2VolumeCode=b>>5&15};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){var d=b&7;a.NRx4FrequencyMSB=d;a.frequency=d<<8|a.NRx3FrequencyLSB;d=1===(E.frameSequencer&1);if(!d){var f=!a.NRx4LengthEnabled&&B(6,b);0<a.lengthCounter&&f&&(--a.lengthCounter,B(7,b)||0!==a.lengthCounter||(a.isEnabled=!1))}a.NRx4LengthEnabled=B(6,b);B(7,b)&&(a.trigger(),!d&&a.lengthCounter===
a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.isEnabled;c[1025+50*a.saveStateSlot]=a.frequencyTimer;c[1029+50*a.saveStateSlot]=a.lengthCounter;c[1033+50*a.saveStateSlot]=a.waveTablePosition};a.loadState=function(){a.isEnabled=G(1024+50*a.saveStateSlot);a.frequencyTimer=c[1025+50*a.saveStateSlot];a.lengthCounter=c[1029+50*a.saveStateSlot];a.waveTablePosition=c[1033+50*a.saveStateSlot]};a.handleWaveRamRead=function(){return C(N.memoryLocationWaveTable+
(N.waveTablePosition>>1|0))};a.handleWaveRamWrite=function(b){J(a.memoryLocationWaveTable+(a.waveTablePosition>>1|0),b)};a.initialize=function(){J(a.memoryLocationNRx0,127);J(a.memoryLocationNRx1,255);J(a.memoryLocationNRx2,159);J(a.memoryLocationNRx3,0);J(a.memoryLocationNRx4,184);a.volumeCodeChanged=!0};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){a.frequencyTimer=2048-a.frequency<<1<<g.GBCDoubleSpeed};a.getSample=function(b){if(!a.isEnabled||
!a.isDacEnabled)return 15;var d=a.volumeCode;a.volumeCodeChanged&&(d=C(a.memoryLocationNRx2),d=d>>5&15,a.volumeCode=d,a.volumeCodeChanged=!1);var f=N.sampleBuffer;f>>=(0===(N.waveTablePosition&1))<<2;f&=15;var h=0;switch(d){case 0:f>>=4;break;case 1:h=1;break;case 2:f>>=1;h=2;break;default:f>>=2,h=4}f=(0<h?f/h:0)+15;d=a.frequencyTimer;for(d-=b;0>=d;){b=Math.abs(d);a.resetTimer();d=a.frequencyTimer;d-=b;b=N.waveTablePosition;for(b+=1;32<=b;)b-=32;N.waveTablePosition=b;N.sampleBuffer=C(N.memoryLocationWaveTable+
(N.waveTablePosition>>1|0))}a.frequencyTimer=d;return f};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.resetTimer();a.frequencyTimer+=6;a.waveTablePosition=0;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){a.cycleCounter+=b;return!(!a.volumeCodeChanged&&0<a.frequencyTimer-a.cycleCounter)};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.cycleCounter=0;a.MAX_LENGTH=
256;a.memoryLocationNRx0=65306;a.memoryLocationNRx1=65307;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65308;a.NRx2VolumeCode=0;a.memoryLocationNRx3=65309;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65310;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.memoryLocationWaveTable=65328;a.channelNumber=3;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.lengthCounter=0;a.waveTablePosition=0;a.volumeCode=0;a.volumeCodeChanged=!1;a.sampleBuffer=0;a.saveStateSlot=9;return a}(),O=function(){function a(){}
a.updateNRx1=function(b){a.NRx1LengthLoad=b&63;a.lengthCounter=a.MAX_LENGTH-a.NRx1LengthLoad};a.updateNRx2=function(b){a.isEnabled&&(0===a.NRx2EnvelopePeriod&&a.isEnvelopeAutomaticUpdating&&(a.volume=a.volume+1&15),a.NRx2EnvelopeAddMode!==B(3,b)&&(a.volume=16-a.volume&15));a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=B(3,b);a.NRx2EnvelopePeriod=b&7;b=0<(b&248);a.isDacEnabled=b;b||(a.isEnabled=b)};a.updateNRx3=function(b){var d=b&7;a.NRx3ClockShift=b>>4;a.NRx3WidthMode=B(3,b);a.NRx3DivisorCode=
d;d<<=1;1>d&&(d=1);a.divisor=d<<3};a.updateNRx4=function(b){var d=1===(E.frameSequencer&1),f=!a.NRx4LengthEnabled&&B(6,b);!d&&0<a.lengthCounter&&f&&(--a.lengthCounter,B(7,b)||0!==a.lengthCounter||(a.isEnabled=!1));a.NRx4LengthEnabled=B(6,b);B(7,b)&&(a.trigger(),!d&&a.lengthCounter===a.MAX_LENGTH&&a.NRx4LengthEnabled&&--a.lengthCounter)};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.isEnabled;c[1025+50*a.saveStateSlot]=a.frequencyTimer;c[1029+50*a.saveStateSlot]=a.envelopeCounter;c[1033+50*a.saveStateSlot]=
a.lengthCounter;c[1038+50*a.saveStateSlot]=a.volume;c[1043+50*a.saveStateSlot]=a.linearFeedbackShiftRegister;c[1045+50*a.saveStateSlot]=a.isEnvelopeAutomaticUpdating};a.loadState=function(){a.isEnabled=G(1024+50*a.saveStateSlot);a.frequencyTimer=c[1025+50*a.saveStateSlot];a.envelopeCounter=c[1029+50*a.saveStateSlot];a.lengthCounter=c[1033+50*a.saveStateSlot];a.volume=c[1038+50*a.saveStateSlot];a.linearFeedbackShiftRegister=c[1043+50*a.saveStateSlot];a.isEnvelopeAutomaticUpdating=G(1045+50*a.saveStateSlot)};
a.initialize=function(){J(a.memoryLocationNRx1-1,255);J(a.memoryLocationNRx1,255);J(a.memoryLocationNRx2,0);J(a.memoryLocationNRx3,0);J(a.memoryLocationNRx4,191)};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.getSample=function(b){var d=a.frequencyTimer;d-=b;if(0>=d){b=Math.abs(d);d=a.getNoiseChannelFrequencyPeriod();d-=b;b=a.linearFeedbackShiftRegister;var f=b&1^b>>1&1;b=b>>1|f<<14;a.NRx3WidthMode&&(b=b&-65|f<<6);a.linearFeedbackShiftRegister=
b}0>d&&(d=0);a.frequencyTimer=d;if(a.isEnabled&&a.isDacEnabled)d=a.volume&15;else return 15;b=B(0,a.linearFeedbackShiftRegister)?-1:1;return b*d+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=a.MAX_LENGTH);a.frequencyTimer=a.getNoiseChannelFrequencyPeriod();a.envelopeCounter=0===a.NRx2EnvelopePeriod?8:a.NRx2EnvelopePeriod;a.isEnvelopeAutomaticUpdating=!0;a.volume=a.NRx2StartingVolume;a.linearFeedbackShiftRegister=32767;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=
function(b){a.cycleCounter+=b;return!(0<a.frequencyTimer-a.cycleCounter)};a.getNoiseChannelFrequencyPeriod=function(){return a.divisor<<a.NRx3ClockShift<<g.GBCDoubleSpeed};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b)if(0===a.NRx2EnvelopePeriod)b=8;else if(b=a.NRx2EnvelopePeriod,0!==b&&a.isEnvelopeAutomaticUpdating){var d=a.volume;d=a.NRx2EnvelopeAddMode?d+1:d-
1;d&=15;15>d?a.volume=d:a.isEnvelopeAutomaticUpdating=!1}a.envelopeCounter=b};a.cycleCounter=0;a.MAX_LENGTH=64;a.memoryLocationNRx0=65311;a.memoryLocationNRx1=65312;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65313;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=65314;a.NRx3ClockShift=0;a.NRx3WidthMode=!1;a.NRx3DivisorCode=0;a.memoryLocationNRx4=65315;a.NRx4LengthEnabled=!1;a.channelNumber=4;a.isEnabled=!1;a.isDacEnabled=!1;a.frequencyTimer=0;a.envelopeCounter=
0;a.isEnvelopeAutomaticUpdating=!1;a.lengthCounter=0;a.volume=0;a.divisor=0;a.linearFeedbackShiftRegister=0;a.saveStateSlot=10;return a}(),P=function(){function a(){}a.channel1Sample=15;a.channel2Sample=15;a.channel3Sample=15;a.channel4Sample=15;a.channel1DacEnabled=!1;a.channel2DacEnabled=!1;a.channel3DacEnabled=!1;a.channel4DacEnabled=!1;a.leftChannelSampleUnsignedByte=127;a.rightChannelSampleUnsignedByte=127;a.mixerVolumeChanged=!1;a.mixerEnabledChanged=!1;a.needToRemixSamples=!1;return a}();
function nb(a){switch(a){case L.channelNumber:a=L.isDacEnabled;var b=P.channel1DacEnabled!==a;P.channel1DacEnabled=a;return b;case M.channelNumber:return a=M.isDacEnabled,b=P.channel2DacEnabled!==a,P.channel2DacEnabled=a,b;case N.channelNumber:return a=N.isDacEnabled,b=P.channel3DacEnabled!==a,P.channel3DacEnabled=a,b;case O.channelNumber:return a=O.isDacEnabled,b=P.channel4DacEnabled!==a,P.channel4DacEnabled=a,b}return!1}
var E=function(){function a(){}a.batchProcessCycles=function(){return 87<<g.GBCDoubleSpeed};a.updateNR50=function(b){a.NR50LeftMixerVolume=b>>4&7;a.NR50RightMixerVolume=b&7};a.updateNR51=function(b){a.NR51IsChannel4EnabledOnLeftOutput=B(7,b);a.NR51IsChannel3EnabledOnLeftOutput=B(6,b);a.NR51IsChannel2EnabledOnLeftOutput=B(5,b);a.NR51IsChannel1EnabledOnLeftOutput=B(4,b);a.NR51IsChannel4EnabledOnRightOutput=B(3,b);a.NR51IsChannel3EnabledOnRightOutput=B(2,b);a.NR51IsChannel2EnabledOnRightOutput=B(1,b);
a.NR51IsChannel1EnabledOnRightOutput=B(0,b)};a.updateNR52=function(b){a.NR52IsSoundEnabled=B(7,b)};a.maxFrameSequenceCycles=function(){return 8192<<g.GBCDoubleSpeed};a.maxDownSampleCycles=function(){return g.CLOCK_SPEED()/a.sampleRate};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.frameSequenceCycleCounter;c[1028+50*a.saveStateSlot]=a.downSampleCycleCounter;c[1029+50*a.saveStateSlot]=a.frameSequencer};a.loadState=function(){a.frameSequenceCycleCounter=c[1024+50*a.saveStateSlot];a.downSampleCycleCounter=
c[1028+50*a.saveStateSlot];a.frameSequencer=c[1029+50*a.saveStateSlot];ob()};a.currentCycles=0;a.memoryLocationNR50=65316;a.NR50LeftMixerVolume=0;a.NR50RightMixerVolume=0;a.memoryLocationNR51=65317;a.NR51IsChannel1EnabledOnLeftOutput=!0;a.NR51IsChannel2EnabledOnLeftOutput=!0;a.NR51IsChannel3EnabledOnLeftOutput=!0;a.NR51IsChannel4EnabledOnLeftOutput=!0;a.NR51IsChannel1EnabledOnRightOutput=!0;a.NR51IsChannel2EnabledOnRightOutput=!0;a.NR51IsChannel3EnabledOnRightOutput=!0;a.NR51IsChannel4EnabledOnRightOutput=
!0;a.memoryLocationNR52=65318;a.NR52IsSoundEnabled=!0;a.memoryLocationChannel3LoadRegisterStart=65328;a.frameSequenceCycleCounter=0;a.downSampleCycleCounter=0;a.sampleRate=44100;a.frameSequencer=0;a.audioQueueIndex=0;a.wasmBoyMemoryMaxBufferSize=131072;a.saveStateSlot=6;return a}();function pb(){for(var a=E.batchProcessCycles(),b=E.currentCycles;b>=a;)qb(a),b-=a;E.currentCycles=b}
function qb(a){var b=E.maxFrameSequenceCycles();var d=E.frameSequenceCycleCounter+a;if(d>=b){E.frameSequenceCycleCounter=d-b;b=E.frameSequencer+1&7;switch(b){case 0:L.updateLength();M.updateLength();N.updateLength();O.updateLength();break;case 2:L.updateLength();M.updateLength();N.updateLength();O.updateLength();L.updateSweep();break;case 4:L.updateLength();M.updateLength();N.updateLength();O.updateLength();break;case 6:L.updateLength();M.updateLength();N.updateLength();O.updateLength();L.updateSweep();
break;case 7:L.updateEnvelope(),M.updateEnvelope(),O.updateEnvelope()}E.frameSequencer=b;b=!0}else E.frameSequenceCycleCounter=d,b=!1;if(e.audioAccumulateSamples&&!b){b=L.willChannelUpdate(a)||nb(L.channelNumber);d=M.willChannelUpdate(a)||nb(M.channelNumber);var f=N.willChannelUpdate(a)||nb(N.channelNumber),h=O.willChannelUpdate(a)||nb(O.channelNumber);b&&(P.channel1Sample=L.getSampleFromCycleCounter());d&&(P.channel2Sample=M.getSampleFromCycleCounter());f&&(P.channel3Sample=N.getSampleFromCycleCounter());
h&&(P.channel4Sample=O.getSampleFromCycleCounter());if(b||d||f||h)P.needToRemixSamples=!0;b=E.downSampleCycleCounter;b+=a;a=E.maxDownSampleCycles();b>=a&&(b-=a,P.needToRemixSamples||P.mixerVolumeChanged||P.mixerEnabledChanged?rb(P.channel1Sample,P.channel2Sample,P.channel3Sample,P.channel4Sample):E.downSampleCycleCounter=b,sb(P.leftChannelSampleUnsignedByte+1,P.rightChannelSampleUnsignedByte+1,oa),a=E.audioQueueIndex+1,a>=(E.wasmBoyMemoryMaxBufferSize>>1|0)-1&&--a,E.audioQueueIndex=a);E.downSampleCycleCounter=
b}else{b=L.getSample(a)|0;d=M.getSample(a)|0;f=N.getSample(a)|0;h=O.getSample(a)|0;P.channel1Sample=b;P.channel2Sample=d;P.channel3Sample=f;P.channel4Sample=h;a=E.downSampleCycleCounter+a;if(a>=E.maxDownSampleCycles()){a-=E.maxDownSampleCycles();var u=rb(b,d,f,h),y=v(u);sb(y+1,(u&255)+1,oa);e.enableAudioDebugging&&(u=rb(b,15,15,15),y=v(u),sb(y+1,(u&255)+1,ka),u=rb(15,d,15,15),y=v(u),sb(y+1,(u&255)+1,la),u=rb(15,15,f,15),y=v(u),sb(y+1,(u&255)+1,ma),u=rb(15,15,15,h),y=v(u),sb(y+1,(u&255)+1,na));b=E.audioQueueIndex+
1;b>=(E.wasmBoyMemoryMaxBufferSize>>1|0)-1&&--b;E.audioQueueIndex=b}E.downSampleCycleCounter=a}}function tb(){return E.audioQueueIndex}function ob(){E.audioQueueIndex=0}
function rb(a,b,d,f){void 0===a&&(a=15);void 0===b&&(b=15);void 0===d&&(d=15);void 0===f&&(f=15);P.mixerVolumeChanged=!1;var h=0+(E.NR51IsChannel1EnabledOnLeftOutput?a:15);h+=E.NR51IsChannel2EnabledOnLeftOutput?b:15;h+=E.NR51IsChannel3EnabledOnLeftOutput?d:15;h+=E.NR51IsChannel4EnabledOnLeftOutput?f:15;a=0+(E.NR51IsChannel1EnabledOnRightOutput?a:15);a+=E.NR51IsChannel2EnabledOnRightOutput?b:15;a+=E.NR51IsChannel3EnabledOnRightOutput?d:15;a+=E.NR51IsChannel4EnabledOnRightOutput?f:15;P.mixerEnabledChanged=
!1;P.needToRemixSamples=!1;b=ub(h,E.NR50LeftMixerVolume+1);d=ub(a,E.NR50RightMixerVolume+1);P.leftChannelSampleUnsignedByte=b;P.rightChannelSampleUnsignedByte=d;return r(b,d)}function ub(a,b){if(60===a)return 127;a=1E5*(a-60)*b>>3;a=(a/1E5|0)+60;a=1E5*a/(12E6/254|0)|0;return a|=0}function sb(a,b,d){d+=E.audioQueueIndex<<1;c[d+0]=a+1;c[d+1]=b+1}
function vb(a){switch(a){case L.memoryLocationNRx0:return a=C(L.memoryLocationNRx0),a|128;case M.memoryLocationNRx0:return a=C(M.memoryLocationNRx0),a|255;case N.memoryLocationNRx0:return a=C(N.memoryLocationNRx0),a|127;case O.memoryLocationNRx0:return a=C(O.memoryLocationNRx0),a|255;case E.memoryLocationNR50:return a=C(E.memoryLocationNR50),a|0;case L.memoryLocationNRx1:return a=C(L.memoryLocationNRx1),a|63;case M.memoryLocationNRx1:return a=C(M.memoryLocationNRx1),a|63;case N.memoryLocationNRx1:return a=
C(N.memoryLocationNRx1),a|255;case O.memoryLocationNRx1:return a=C(O.memoryLocationNRx1),a|255;case E.memoryLocationNR51:return a=C(E.memoryLocationNR51),a|0;case L.memoryLocationNRx2:return a=C(L.memoryLocationNRx2),a|0;case M.memoryLocationNRx2:return a=C(M.memoryLocationNRx2),a|0;case N.memoryLocationNRx2:return a=C(N.memoryLocationNRx2),a|159;case O.memoryLocationNRx2:return a=C(O.memoryLocationNRx2),a|0;case E.memoryLocationNR52:return a=0,a=E.NR52IsSoundEnabled?a|128:z(7,a),a=L.isEnabled?a|
1:z(0,a),a=M.isEnabled?a|2:z(1,a),a=N.isEnabled?a|4:z(2,a),a=O.isEnabled?a|8:z(3,a),a|112;case L.memoryLocationNRx3:return a=C(L.memoryLocationNRx3),a|255;case M.memoryLocationNRx3:return a=C(M.memoryLocationNRx3),a|255;case N.memoryLocationNRx3:return a=C(N.memoryLocationNRx3),a|255;case O.memoryLocationNRx3:return a=C(O.memoryLocationNRx3),a|0;case L.memoryLocationNRx4:return a=C(L.memoryLocationNRx4),a|191;case M.memoryLocationNRx4:return a=C(M.memoryLocationNRx4),a|191;case N.memoryLocationNRx4:return a=
C(N.memoryLocationNRx4),a|191;case O.memoryLocationNRx4:return a=C(O.memoryLocationNRx4),a|191}return-1}
var R=function(){function a(){}a.updateInterruptEnabled=function(b){a.isVBlankInterruptEnabled=B(a.bitPositionVBlankInterrupt,b);a.isLcdInterruptEnabled=B(a.bitPositionLcdInterrupt,b);a.isTimerInterruptEnabled=B(a.bitPositionTimerInterrupt,b);a.isSerialInterruptEnabled=B(a.bitPositionSerialInterrupt,b);a.isJoypadInterruptEnabled=B(a.bitPositionJoypadInterrupt,b);a.interruptsEnabledValue=b};a.updateInterruptRequested=function(b){a.isVBlankInterruptRequested=B(a.bitPositionVBlankInterrupt,b);a.isLcdInterruptRequested=
B(a.bitPositionLcdInterrupt,b);a.isTimerInterruptRequested=B(a.bitPositionTimerInterrupt,b);a.isSerialInterruptRequested=B(a.bitPositionSerialInterrupt,b);a.isJoypadInterruptRequested=B(a.bitPositionJoypadInterrupt,b);a.interruptsRequestedValue=b};a.areInterruptsPending=function(){return 0<(a.interruptsRequestedValue&a.interruptsEnabledValue&31)};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.masterInterruptSwitch;c[1025+50*a.saveStateSlot]=a.masterInterruptSwitchDelay};a.loadState=function(){a.masterInterruptSwitch=
G(1024+50*a.saveStateSlot);a.masterInterruptSwitchDelay=G(1025+50*a.saveStateSlot);a.updateInterruptEnabled(C(a.memoryLocationInterruptEnabled));a.updateInterruptRequested(C(a.memoryLocationInterruptRequest))};a.masterInterruptSwitch=!1;a.masterInterruptSwitchDelay=!1;a.bitPositionVBlankInterrupt=0;a.bitPositionLcdInterrupt=1;a.bitPositionTimerInterrupt=2;a.bitPositionSerialInterrupt=3;a.bitPositionJoypadInterrupt=4;a.memoryLocationInterruptEnabled=65535;a.interruptsEnabledValue=0;a.isVBlankInterruptEnabled=
!1;a.isLcdInterruptEnabled=!1;a.isTimerInterruptEnabled=!1;a.isSerialInterruptEnabled=!1;a.isJoypadInterruptEnabled=!1;a.memoryLocationInterruptRequest=65295;a.interruptsRequestedValue=0;a.isVBlankInterruptRequested=!1;a.isLcdInterruptRequested=!1;a.isTimerInterruptRequested=!1;a.isSerialInterruptRequested=!1;a.isJoypadInterruptRequested=!1;a.saveStateSlot=2;return a}();
function wb(a){xb(!1);var b=C(R.memoryLocationInterruptRequest);b=z(a,b);R.interruptsRequestedValue=b;J(R.memoryLocationInterruptRequest,b);g.stackPointer-=2;g.isHalted();b=g.stackPointer;var d=g.programCounter,f=v(d);J(b+0,d&255);J(b+1,f);switch(a){case R.bitPositionVBlankInterrupt:R.isVBlankInterruptRequested=!1;g.programCounter=64;break;case R.bitPositionLcdInterrupt:R.isLcdInterruptRequested=!1;g.programCounter=72;break;case R.bitPositionTimerInterrupt:R.isTimerInterruptRequested=!1;g.programCounter=
80;break;case R.bitPositionSerialInterrupt:R.isSerialInterruptRequested=!1;g.programCounter=88;break;case R.bitPositionJoypadInterrupt:R.isJoypadInterruptRequested=!1,g.programCounter=96}}function yb(a){var b=C(R.memoryLocationInterruptRequest);b|=1<<a;R.interruptsRequestedValue=b;J(R.memoryLocationInterruptRequest,b)}function xb(a){a?R.masterInterruptSwitchDelay=!0:R.masterInterruptSwitch=!1}
var S=function(){function a(){}a.batchProcessCycles=function(){return 256};a.updateDividerRegister=function(){var b=a.dividerRegister;a.dividerRegister=0;J(a.memoryLocationDividerRegister,0);a.timerEnabled&&zb(b,0)&&Ab()};a.updateTimerCounter=function(b){if(a.timerEnabled){if(a.timerCounterWasReset)return;a.timerCounterOverflowDelay&&(a.timerCounterOverflowDelay=!1)}a.timerCounter=b};a.updateTimerModulo=function(b){a.timerModulo=b;a.timerEnabled&&a.timerCounterWasReset&&(a.timerCounter=b,a.timerCounterWasReset=
!1)};a.updateTimerControl=function(b){var d=a.timerEnabled;a.timerEnabled=B(2,b);b&=3;if(!d){d=Cb(a.timerInputClock);var f=Cb(b),h=a.dividerRegister;(a.timerEnabled?B(d,h):B(d,h)&&B(f,h))&&Ab()}a.timerInputClock=b};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.currentCycles;c[1028+50*a.saveStateSlot]=a.dividerRegister;c[1032+50*a.saveStateSlot]=a.timerCounterOverflowDelay;c[1035+50*a.saveStateSlot]=a.timerCounterWasReset;J(a.memoryLocationTimerCounter,a.timerCounter)};a.loadState=function(){a.currentCycles=
c[1024+50*a.saveStateSlot];a.dividerRegister=c[1028+50*a.saveStateSlot];a.timerCounterOverflowDelay=G(1032+50*a.saveStateSlot);a.timerCounterWasReset=G(1035+50*a.saveStateSlot);a.timerCounter=C(a.memoryLocationTimerCounter);a.timerModulo=C(a.memoryLocationTimerModulo);a.timerInputClock=C(a.memoryLocationTimerControl)};a.currentCycles=0;a.memoryLocationDividerRegister=65284;a.dividerRegister=0;a.memoryLocationTimerCounter=65285;a.timerCounter=0;a.timerCounterOverflowDelay=!1;a.timerCounterWasReset=
!1;a.timerCounterMask=0;a.memoryLocationTimerModulo=65286;a.timerModulo=0;a.memoryLocationTimerControl=65287;a.timerEnabled=!1;a.timerInputClock=0;a.saveStateSlot=5;return a}();
function Db(a){for(var b=0;b<a;){var d=S.dividerRegister,f=d;b+=4;f+=4;f&=65535;S.dividerRegister=f;if(S.timerEnabled){var h=S.timerCounterWasReset;S.timerCounterOverflowDelay?(S.timerCounter=S.timerModulo,R.isTimerInterruptRequested=!0,yb(R.bitPositionTimerInterrupt),S.timerCounterOverflowDelay=!1,S.timerCounterWasReset=!0):h&&(S.timerCounterWasReset=!1);zb(d,f)&&Ab()}}}function Ab(){var a=S.timerCounter;255<++a&&(S.timerCounterOverflowDelay=!0,a=0);S.timerCounter=a}
function zb(a,b){var d=Cb(S.timerInputClock);return B(d,a)&&!B(d,b)}function Cb(a){switch(a){case 0:return 9;case 1:return 3;case 2:return 5;case 3:return 7}return 0}
var Eb=function(){function a(){}a.updateTransferControl=function(b){a.isShiftClockInternal=B(0,b);a.isClockSpeedFast=B(1,b);a.transferStartFlag=B(7,b);return!0};a.currentCycles=0;a.memoryLocationSerialTransferData=65281;a.memoryLocationSerialTransferControl=65282;a.numberOfBitsTransferred=0;a.isShiftClockInternal=!1;a.isClockSpeedFast=!1;a.transferStartFlag=!1;return a}(),T=function(){function a(){}a.updateJoypad=function(b){a.joypadRegisterFlipped=b^255;a.isDpadType=B(4,a.joypadRegisterFlipped);
a.isButtonType=B(5,a.joypadRegisterFlipped)};a.saveState=function(){};a.loadState=function(){a.updateJoypad(C(a.memoryLocationJoypadRegister))};a.up=!1;a.down=!1;a.left=!1;a.right=!1;a.a=!1;a.b=!1;a.select=!1;a.start=!1;a.memoryLocationJoypadRegister=65280;a.joypadRegisterFlipped=0;a.isDpadType=!1;a.isButtonType=!1;a.saveStateSlot=3;return a}();
function Fb(a){var b=g.isStopped=!1;Gb(a)||(b=!0);Hb(a,!0);b&&(b=!1,3>=a&&(b=!0),a=!1,T.isDpadType&&b&&(a=!0),T.isButtonType&&!b&&(a=!0),a&&(R.isJoypadInterruptRequested=!0,yb(R.bitPositionJoypadInterrupt)))}function Gb(a){switch(a){case 0:return T.up;case 1:return T.right;case 2:return T.down;case 3:return T.left;case 4:return T.a;case 5:return T.b;case 6:return T.select;case 7:return T.start;default:return!1}}
function Hb(a,b){switch(a){case 0:T.up=b;break;case 1:T.right=b;break;case 2:T.down=b;break;case 3:T.left=b;break;case 4:T.a=b;break;case 5:T.b=b;break;case 6:T.select=b;break;case 7:T.start=b}}function Ib(a,b,d){for(var f=0;f<d;++f){for(var h=Jb(a+f),u=b+f;40959<u;)u-=8192;Kb(u,h)}U.DMACycles+=(32<<g.GBCDoubleSpeed)*(d>>4)}
function Lb(a,b){if(a===g.memoryLocationSpeedSwitch)return J(g.memoryLocationSpeedSwitch,b&1),!1;if(g.BootROMEnabled&&a===g.memoryLocationBootROMSwitch)return g.BootROMEnabled=!1,g.programCounter=255,!0;var d=U.videoRamLocation,f=U.spriteInformationTableLocation;if(a<d){if(!U.isRomOnly){d=U.isMBC1;var h=U.isMBC2;if(8191>=a){if(!h||B(4,b))b&=15,0===b?U.isRamBankingEnabled=!1:10===b&&(U.isRamBankingEnabled=!0)}else 16383>=a?(f=U.isMBC5,!f||12287>=a?(a=U.currentRomBank,h&&(a=b&15),d?(b&=31,a&=224):U.isMBC3?
(b&=127,a&=128):f&&(a&=0),U.currentRomBank=a|b):U.currentRomBank=r(0<b,U.currentRomBank&255)):!h&&24575>=a?d&&U.isMBC1RomModeEnabled?(a=U.currentRomBank&31,U.currentRomBank=a|b&224):(b=U.isMBC5?b&15:b&3,U.currentRamBank=b):!h&&32767>=a&&d&&(U.isMBC1RomModeEnabled=B(0,b))}return!1}if(a>=d&&a<U.cartridgeRamLocation)return!0;if(a>=U.echoRamLocation&&a<f)return J(a-8192,b),!0;if(a>=f&&a<=U.spriteInformationTableLocationEnd)return 2<=V.currentLcdMode;if(a>=U.unusableMemoryLocation&&a<=U.unusableMemoryEndLocation)return!1;
if(a===Eb.memoryLocationSerialTransferControl)return Eb.updateTransferControl(b);if(65296<=a&&65318>=a){pb();if(a===E.memoryLocationNR52||E.NR52IsSoundEnabled){switch(a){case L.memoryLocationNRx0:L.updateNRx0(b);break;case N.memoryLocationNRx0:N.updateNRx0(b);break;case L.memoryLocationNRx1:L.updateNRx1(b);break;case M.memoryLocationNRx1:M.updateNRx1(b);break;case N.memoryLocationNRx1:N.updateNRx1(b);break;case O.memoryLocationNRx1:O.updateNRx1(b);break;case L.memoryLocationNRx2:L.updateNRx2(b);break;
case M.memoryLocationNRx2:M.updateNRx2(b);break;case N.memoryLocationNRx2:N.volumeCodeChanged=!0;N.updateNRx2(b);break;case O.memoryLocationNRx2:O.updateNRx2(b);break;case L.memoryLocationNRx3:L.updateNRx3(b);break;case M.memoryLocationNRx3:M.updateNRx3(b);break;case N.memoryLocationNRx3:N.updateNRx3(b);break;case O.memoryLocationNRx3:O.updateNRx3(b);break;case L.memoryLocationNRx4:L.updateNRx4(b);break;case M.memoryLocationNRx4:M.updateNRx4(b);break;case N.memoryLocationNRx4:N.updateNRx4(b);break;
case O.memoryLocationNRx4:O.updateNRx4(b);break;case E.memoryLocationNR50:E.updateNR50(b);P.mixerVolumeChanged=!0;break;case E.memoryLocationNR51:E.updateNR51(b);P.mixerEnabledChanged=!0;break;case E.memoryLocationNR52:a=E.NR52IsSoundEnabled;!a&&B(7,b)&&(E.frameSequencer=7,L.waveFormPositionOnDuty=0,M.waveFormPositionOnDuty=0);if(a&&!B(7,b))for(a=65296;65318>a;++a)Kb(a,0);E.updateNR52(b)}b=!0}else b=!1;return b}if(65328<=a&&65343>=a)return pb(),N.isEnabled?(N.handleWaveRamWrite(b),!1):!0;if(a>=V.memoryLocationLcdControl&&
a<=D.memoryLocationWindowX){if(a===V.memoryLocationLcdControl)return V.updateLcdControl(b),!0;if(a===V.memoryLocationLcdStatus)return V.updateLcdStatus(b),!1;if(a===D.memoryLocationScanlineRegister)return D.scanlineRegister=0,J(a,0),!1;if(a===V.memoryLocationCoincidenceCompare)return V.coincidenceCompare=b,!0;if(a===D.memoryLocationDmaTransfer){b<<=8;for(a=0;159>=a;++a)d=C(b+a),J(U.spriteInformationTableLocation+a,d);U.DMACycles=644;return!0}switch(a){case D.memoryLocationScrollX:D.scrollX=b;break;
case D.memoryLocationScrollY:D.scrollY=b;break;case D.memoryLocationWindowX:D.windowX=b;break;case D.memoryLocationWindowY:D.windowY=b}return!0}if(a===U.memoryLocationHdmaTrigger)return g.GBCEnabled&&(U.isHblankHdmaActive&&!B(7,b)?(U.isHblankHdmaActive=!1,b=C(U.memoryLocationHdmaTrigger),J(U.memoryLocationHdmaTrigger,b|128)):(a=C(U.memoryLocationHdmaSourceHigh),d=C(U.memoryLocationHdmaSourceLow),a=r(a,d)&65520,d=C(U.memoryLocationHdmaDestinationHigh),f=C(U.memoryLocationHdmaDestinationLow),d=r(d,
f),d=(d&8176)+U.videoRamLocation,f=z(7,b),f=f+1<<4,B(7,b)?(U.isHblankHdmaActive=!0,U.hblankHdmaTransferLengthRemaining=f,U.hblankHdmaSource=a,U.hblankHdmaDestination=d,J(U.memoryLocationHdmaTrigger,z(7,b))):(Ib(a,d,f),J(U.memoryLocationHdmaTrigger,255)))),!1;if((a===U.memoryLocationGBCWRAMBank||a===U.memoryLocationGBCVRAMBank)&&U.isHblankHdmaActive&&(d=U.hblankHdmaSource,16384<=d&&32767>=d||53248<=d&&57343>=d))return!1;if(a>=bb.memoryLocationBackgroundPaletteIndex&&a<=bb.memoryLocationSpritePaletteData){d=
bb.memoryLocationSpritePaletteData;if(a===bb.memoryLocationBackgroundPaletteData||a===d)f=C(a-1),f=z(6,f),h=f&63,a===d&&(h+=64),c[ca+h]=b,b=f,--a,B(7,b)&&J(a,b+1|128);return!0}if(a>=S.memoryLocationDividerRegister&&a<=S.memoryLocationTimerControl){Db(S.currentCycles);S.currentCycles=0;switch(a){case S.memoryLocationDividerRegister:return S.updateDividerRegister(),!1;case S.memoryLocationTimerCounter:S.updateTimerCounter(b);break;case S.memoryLocationTimerModulo:S.updateTimerModulo(b);break;case S.memoryLocationTimerControl:S.updateTimerControl(b)}return!0}a===
T.memoryLocationJoypadRegister&&T.updateJoypad(b);if(a===R.memoryLocationInterruptRequest)return R.updateInterruptRequested(b),!0;a===R.memoryLocationInterruptEnabled&&R.updateInterruptEnabled(b);return!0}
function Mb(a){switch(a>>12){case 0:if(g.BootROMEnabled)if(g.GBCEnabled){if(256>a||511<a&&2304>a)return a+qa}else if(!g.GBCEnabled&&256>a)return a+qa;case 1:case 2:case 3:return a+ra;case 4:case 5:case 6:case 7:var b=U.currentRomBank;U.isMBC5||0!==b||(b=1);return 16384*b+(a-U.switchableCartridgeRomLocation)+ra;case 8:case 9:return b=0,g.GBCEnabled&&(b=C(U.memoryLocationGBCVRAMBank)&1),a-U.videoRamLocation+2048+8192*b;case 10:case 11:return 8192*U.currentRamBank+(a-U.cartridgeRamLocation)+pa;case 12:return a-
U.internalRamBankZeroLocation+18432;case 13:return b=0,g.GBCEnabled&&(b=C(U.memoryLocationGBCWRAMBank)&7),a-U.internalRamBankZeroLocation+18432+4096*((1>b?1:b)-1);default:return a-U.echoRamLocation+51200}}var Nb=function(){function a(){}a.programCounter=-1;a.readGbMemory=-1;a.writeGbMemory=-1;a.reachedBreakpoint=!1;return a}();function J(a,b){a=Mb(a);c[a]=b}function Kb(a,b){a===Nb.writeGbMemory&&(Nb.reachedBreakpoint=!0);Lb(a,b)&&J(a,b)}
var V=function(){function a(){}a.updateLcdStatus=function(b){var d=C(a.memoryLocationLcdStatus);b=b&248|d&7|128;J(a.memoryLocationLcdStatus,b)};a.updateLcdControl=function(b){var d=a.enabled;a.enabled=B(7,b);a.windowTileMapDisplaySelect=B(6,b);a.windowDisplayEnabled=B(5,b);a.bgWindowTileDataSelect=B(4,b);a.bgTileMapDisplaySelect=B(3,b);a.tallSpriteSize=B(2,b);a.spriteDisplayEnable=B(1,b);a.bgDisplayEnabled=B(0,b);d&&!a.enabled&&Ob(!0);!d&&a.enabled&&Ob(!1)};a.memoryLocationLcdStatus=65345;a.currentLcdMode=
0;a.memoryLocationCoincidenceCompare=65349;a.coincidenceCompare=0;a.memoryLocationLcdControl=65344;a.enabled=!0;a.windowTileMapDisplaySelect=!1;a.windowDisplayEnabled=!1;a.bgWindowTileDataSelect=!1;a.bgTileMapDisplaySelect=!1;a.tallSpriteSize=!1;a.spriteDisplayEnable=!1;a.bgDisplayEnabled=!1;return a}();
function Ob(a){D.scanlineCycleCounter=0;D.scanlineRegister=0;J(D.memoryLocationScanlineRegister,0);var b=C(V.memoryLocationLcdStatus);b=z(1,b);b=z(0,b);V.currentLcdMode=0;J(V.memoryLocationLcdStatus,b);if(a)for(a=0;93184>a;++a)c[ea+a]=255}function Pb(a,b){0!==a&&1!==a||D.scanlineRegister!==V.coincidenceCompare?b=z(2,b):(b|=4,B(6,b)&&(R.isLcdInterruptRequested=!0,yb(R.bitPositionLcdInterrupt)));return b}
function Qb(a,b,d,f,h,u){for(var y=f>>3;160>h;++h){var x=h+u;256<=x&&(x-=256);var t=d+(y<<5)+(x>>3),w=kb(t,0),H=!1;if(e.tileCaching){var A=h;var I=a,X=x,Ma=t,Q=w,K=0,F=hb.nextXIndexToPerformCacheCheck;if(0<I&&8<A&&Q===hb.tileId&&A===F){Q=B(5,C(Ma-1));Ma=B(5,C(Ma));for(var Y=0;8>Y;++Y){Q!==Ma&&(Y=7-Y);var Na=A+Y;if(160>=Na){var Bb=A-(8-Y),Ub=ea+3*(160*I+Na);Rb(Na,I,0,c[Ub]);Rb(Na,I,1,c[Ub]);Rb(Na,I,2,c[Ub]);Bb=c[da+(160*I+Bb)];gb(Na,I,z(2,Bb),B(2,Bb));K++}}}else hb.tileId=Q;A>=F&&(F=A+8,I=X&7|0,A<
I&&(F+=I));hb.nextXIndexToPerformCacheCheck=F;A=K;0<A&&(h+=A-1,H=!0)}e.tileRendering&&!H?(H=h,A=a,I=x,x=b,K=f&7|0,F=0,0==H&&(F=I-(I>>3<<3)),I=7,160<H+8&&(I=160-H),X=-1,Q=0,g.GBCEnabled&&(X=kb(t,1),Q=B(3,X)|0,B(6,X)&&(K=7-K)),A=ib(w,x,Q,F,I,K,H,A,160,ea,!1,0,X,-1),0<A&&(h+=A-1)):H||(g.GBCEnabled?(H=h,A=a,F=f,K=jb(b,w),w=kb(t,1),F=F&7|0,B(6,w)&&(F=7-F),I=B(3,w)|0,t=kb(K+2*F,I),K=kb(K+2*F+1,I),F=x&7|0,B(5,w)||(F=7-F),x=0,B(F,K)&&(x=x+1<<1),B(F,t)&&(x+=1),F=db(w&7,x,!1),t=fb(0,F),K=fb(1,F),F=fb(2,F),
Rb(H,A,0,t),Rb(H,A,1,K),Rb(H,A,2,F),gb(H,A,x,B(7,w))):(t=h,H=a,K=f,A=jb(b,w),K=K&7|0,w=kb(A+2*K,0),A=kb(A+2*K+1,0),K=x&7|0,K=7-K,x=0,B(K,A)&&(x=x+1<<1),B(K,w)&&(x+=1),w=cb(x,D.memoryLocationBackgroundPalette),Rb(t,H,0,(w&16711680)>>16),Rb(t,H,1,(w&65280)>>8),Rb(t,H,2,w&255),gb(t,H,x)))}}
var D=function(){function a(){}a.batchProcessCycles=function(){return a.MAX_CYCLES_PER_SCANLINE()};a.MAX_CYCLES_PER_SCANLINE=function(){return 153===a.scanlineRegister?4<<g.GBCDoubleSpeed:456<<g.GBCDoubleSpeed};a.MIN_CYCLES_SPRITES_LCD_MODE=function(){return 376<<g.GBCDoubleSpeed};a.MIN_CYCLES_TRANSFER_DATA_LCD_MODE=function(){return 249<<g.GBCDoubleSpeed};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.scanlineCycleCounter;c[1028+50*a.saveStateSlot]=V.currentLcdMode;J(a.memoryLocationScanlineRegister,
a.scanlineRegister)};a.loadState=function(){a.scanlineCycleCounter=c[1024+50*a.saveStateSlot];V.currentLcdMode=c[1028+50*a.saveStateSlot];a.scanlineRegister=C(a.memoryLocationScanlineRegister);V.updateLcdControl(C(V.memoryLocationLcdControl))};a.currentCycles=0;a.scanlineCycleCounter=0;a.memoryLocationScanlineRegister=65348;a.scanlineRegister=0;a.memoryLocationDmaTransfer=65350;a.memoryLocationScrollX=65347;a.scrollX=0;a.memoryLocationScrollY=65346;a.scrollY=0;a.memoryLocationWindowX=65355;a.windowX=
0;a.memoryLocationWindowY=65354;a.windowY=0;a.memoryLocationTileMapSelectZeroStart=38912;a.memoryLocationTileMapSelectOneStart=39936;a.memoryLocationTileDataSelectZeroStart=34816;a.memoryLocationTileDataSelectOneStart=32768;a.memoryLocationSpriteAttributesTable=65024;a.memoryLocationBackgroundPalette=65351;a.memoryLocationSpritePaletteOne=65352;a.memoryLocationSpritePaletteTwo=65353;a.saveStateSlot=1;return a}();
function Sb(a){if(V.enabled)for(D.scanlineCycleCounter+=a,a=e.graphicsDisableScanlineRendering;D.scanlineCycleCounter>=D.MAX_CYCLES_PER_SCANLINE();){D.scanlineCycleCounter-=D.MAX_CYCLES_PER_SCANLINE();var b=D.scanlineRegister;if(144===b){if(a)for(var d=0;144>=d;++d)Tb(d);else Tb(b);for(d=0;144>d;++d)for(var f=0;160>f;++f)c[da+(160*d+f)]=0;hb.tileId=-1;hb.nextXIndexToPerformCacheCheck=-1}else 144>b&&(a||Tb(b));b=153<b?0:b+1;D.scanlineRegister=b}if(V.enabled){b=D.scanlineRegister;d=V.currentLcdMode;
a=0;if(144<=b)a=1;else{f=D.scanlineCycleCounter;var h=D.MIN_CYCLES_SPRITES_LCD_MODE();f>=h?a=2:f>=h&&(a=3)}if(d!==a){b=C(V.memoryLocationLcdStatus);V.currentLcdMode=a;d=!1;switch(a){case 0:b=z(0,b);b=z(1,b);d=B(3,b);break;case 1:b=z(1,b);b|=1;d=B(4,b);break;case 2:b=z(0,b);b|=2;d=B(5,b);break;case 3:b|=3}d&&(R.isLcdInterruptRequested=!0,yb(R.bitPositionLcdInterrupt));0===a&&U.isHblankHdmaActive&&(f=16,d=U.hblankHdmaTransferLengthRemaining,d<f&&(f=d),Ib(U.hblankHdmaSource,U.hblankHdmaDestination,f),
U.hblankHdmaSource+=f,U.hblankHdmaDestination+=f,d-=f,U.hblankHdmaTransferLengthRemaining=d,f=U.memoryLocationHdmaTrigger,0>=d?(U.isHblankHdmaActive=!1,J(f,255)):J(f,z(7,(d>>4)-1)));1===a&&(R.isVBlankInterruptRequested=!0,yb(R.bitPositionVBlankInterrupt));b=Pb(a,b);J(V.memoryLocationLcdStatus,b)}else 153===b&&(b=C(V.memoryLocationLcdStatus),b=Pb(a,b),J(V.memoryLocationLcdStatus,b))}}
function Tb(a){var b=D.memoryLocationTileDataSelectZeroStart;V.bgWindowTileDataSelect&&(b=D.memoryLocationTileDataSelectOneStart);if(g.GBCEnabled||V.bgDisplayEnabled){var d=D.memoryLocationTileMapSelectZeroStart;V.bgTileMapDisplaySelect&&(d=D.memoryLocationTileMapSelectOneStart);Qb(a,b,d,a+D.scrollY&255,0,D.scrollX)}if(V.windowDisplayEnabled){d=D.memoryLocationTileMapSelectZeroStart;V.windowTileMapDisplaySelect&&(d=D.memoryLocationTileMapSelectOneStart);var f=D.windowX,h=D.windowY;a<h||(f-=7,Qb(a,
b,d,a-h,f,-f|0))}if(V.spriteDisplayEnable)for(b=V.tallSpriteSize,d=39;0<=d;--d){h=4*d;var u=D.memoryLocationSpriteAttributesTable+h,y=C(u+0);f=C(u+1);var x=C(u+2);y-=16;f-=8;var t=8;b&&(t=16,x-=x&1);if(a>=y&&a<y+t){h=C(D.memoryLocationSpriteAttributesTable+h+3);u=B(7,h);var w=B(6,h),H=B(5,h);y=a-y;w&&(y=t-y,--y);y<<=1;x=jb(D.memoryLocationTileDataSelectOneStart,x);x+=y;t=g.GBCEnabled&&B(3,h);y=kb(x+0,t);x=kb(x+1,t);for(t=7;0<=t;--t){w=t;H&&(w-=7,w=-w);var A=0;B(w,x)&&(A=A+1<<1);B(w,y)&&(A+=1);if(0!==
A&&(w=f+(7-t),0<=w&&160>=w)){var I=g.GBCEnabled&&!V.bgDisplayEnabled,X=!1,Ma=!1;if(!I){var Q=c[da+(160*a+w)],K=Q&3;u&&0<K?X=!0:g.GBCEnabled&&B(2,Q)&&0<K&&(Ma=!0)}if(I||!X&&!Ma)g.GBCEnabled?(X=db(h&7,A,!0),A=fb(0,X),I=fb(1,X),X=fb(2,X),Rb(w,a,0,A),Rb(w,a,1,I),Rb(w,a,2,X)):(I=D.memoryLocationSpritePaletteOne,B(4,h)&&(I=D.memoryLocationSpritePaletteTwo),A=cb(A,I),Rb(w,a,0,(A&16711680)>>16),Rb(w,a,1,(A&65280)>>8),Rb(w,a,2,A&255))}}}}}function Rb(a,b,d,f){c[ea+3*(160*b+a)+d]=f}
function kb(a,b){return c[a-U.videoRamLocation+2048+8192*(b&1)]}
function Vb(a){var b=U.videoRamLocation;return a<b||a>=b&&a<U.cartridgeRamLocation?-1:a>=U.echoRamLocation&&a<U.spriteInformationTableLocation?C(a-8192):a>=U.spriteInformationTableLocation&&a<=U.spriteInformationTableLocationEnd?2>V.currentLcdMode?255:-1:a===g.memoryLocationSpeedSwitch?(a=255,b=C(g.memoryLocationSpeedSwitch),B(0,b)||(a=z(0,a)),g.GBCDoubleSpeed||(a=z(7,a)),a):a===D.memoryLocationScanlineRegister?(J(a,D.scanlineRegister),D.scanlineRegister):65296<=a&&65318>=a?(pb(),vb(a)):65319<=a&&
65327>=a?255:65328<=a&&65343>=a?(pb(),N.isEnabled?N.handleWaveRamRead():-1):a===S.memoryLocationDividerRegister?(b=v(S.dividerRegister),J(a,b),b):a===S.memoryLocationTimerCounter?(J(a,S.timerCounter),S.timerCounter):a===R.memoryLocationInterruptRequest?224|R.interruptsRequestedValue:a===T.memoryLocationJoypadRegister?(a=T.joypadRegisterFlipped,T.isDpadType?(a=T.up?z(2,a):a|4,a=T.right?z(0,a):a|1,a=T.down?z(3,a):a|8,a=T.left?z(1,a):a|2):T.isButtonType&&(a=T.a?z(0,a):a|1,a=T.b?z(1,a):a|2,a=T.select?
z(2,a):a|4,a=T.start?z(3,a):a|8),a|240):-1}function C(a){return c[Mb(a)]}function Jb(a){a===Nb.readGbMemory&&(Nb.reachedBreakpoint=!0);var b=Vb(a);return-1===b?C(a):b}function G(a){return 0<c[a]}
var U=function(){function a(){}a.saveState=function(){c[1024+50*a.saveStateSlot]=a.currentRomBank;c[1026+50*a.saveStateSlot]=a.currentRamBank;c[1028+50*a.saveStateSlot]=a.isRamBankingEnabled;c[1029+50*a.saveStateSlot]=a.isMBC1RomModeEnabled;c[1030+50*a.saveStateSlot]=a.isRomOnly;c[1031+50*a.saveStateSlot]=a.isMBC1;c[1032+50*a.saveStateSlot]=a.isMBC2;c[1033+50*a.saveStateSlot]=a.isMBC3;c[1034+50*a.saveStateSlot]=a.isMBC5};a.loadState=function(){a.currentRomBank=c[1024+50*a.saveStateSlot];a.currentRamBank=
c[1026+50*a.saveStateSlot];a.isRamBankingEnabled=G(1028+50*a.saveStateSlot);a.isMBC1RomModeEnabled=G(1029+50*a.saveStateSlot);a.isRomOnly=G(1030+50*a.saveStateSlot);a.isMBC1=G(1031+50*a.saveStateSlot);a.isMBC2=G(1032+50*a.saveStateSlot);a.isMBC3=G(1033+50*a.saveStateSlot);a.isMBC5=G(1034+50*a.saveStateSlot)};a.cartridgeRomLocation=0;a.switchableCartridgeRomLocation=16384;a.videoRamLocation=32768;a.cartridgeRamLocation=40960;a.internalRamBankZeroLocation=49152;a.internalRamBankOneLocation=53248;a.echoRamLocation=
57344;a.spriteInformationTableLocation=65024;a.spriteInformationTableLocationEnd=65183;a.unusableMemoryLocation=65184;a.unusableMemoryEndLocation=65279;a.currentRomBank=0;a.currentRamBank=0;a.isRamBankingEnabled=!1;a.isMBC1RomModeEnabled=!0;a.isRomOnly=!0;a.isMBC1=!1;a.isMBC2=!1;a.isMBC3=!1;a.isMBC5=!1;a.memoryLocationHdmaSourceHigh=65361;a.memoryLocationHdmaSourceLow=65362;a.memoryLocationHdmaDestinationHigh=65363;a.memoryLocationHdmaDestinationLow=65364;a.memoryLocationHdmaTrigger=65365;a.DMACycles=
0;a.isHblankHdmaActive=!1;a.hblankHdmaTransferLengthRemaining=0;a.hblankHdmaSource=0;a.hblankHdmaDestination=0;a.memoryLocationGBCVRAMBank=65359;a.memoryLocationGBCWRAMBank=65392;a.saveStateSlot=4;return a}(),g=function(){function a(){}a.CLOCK_SPEED=function(){return 4194304<<a.GBCDoubleSpeed};a.MAX_CYCLES_PER_FRAME=function(){return 70224<<a.GBCDoubleSpeed};a.enableHalt=function(){R.masterInterruptSwitch?a.isHaltNormal=!0:0===(R.interruptsEnabledValue&R.interruptsRequestedValue&31)?a.isHaltNoJump=
!0:a.isHaltBug=!0};a.exitHaltAndStop=function(){a.isHaltNoJump=!1;a.isHaltNormal=!1;a.isHaltBug=!1;a.isStopped=!1};a.isHalted=function(){return a.isHaltNormal||a.isHaltNoJump};a.saveState=function(){c[1024+50*a.saveStateSlot]=a.registerA;c[1025+50*a.saveStateSlot]=a.registerB;c[1026+50*a.saveStateSlot]=a.registerC;c[1027+50*a.saveStateSlot]=a.registerD;c[1028+50*a.saveStateSlot]=a.registerE;c[1029+50*a.saveStateSlot]=a.registerH;c[1030+50*a.saveStateSlot]=a.registerL;c[1031+50*a.saveStateSlot]=a.registerF;
c[1032+50*a.saveStateSlot]=a.stackPointer;c[1034+50*a.saveStateSlot]=a.programCounter;c[1036+50*a.saveStateSlot]=a.currentCycles;c[1041+50*a.saveStateSlot]=a.isHaltNormal;c[1042+50*a.saveStateSlot]=a.isHaltNoJump;c[1043+50*a.saveStateSlot]=a.isHaltBug;c[1044+50*a.saveStateSlot]=a.isStopped;c[1045+50*a.saveStateSlot]=a.BootROMEnabled;c[1046+50*a.saveStateSlot]=a.GBCEnabled;c[1047+50*a.saveStateSlot]=a.GBCDoubleSpeed};a.loadState=function(){a.registerA=c[1024+50*a.saveStateSlot];a.registerB=c[1025+
50*a.saveStateSlot];a.registerC=c[1026+50*a.saveStateSlot];a.registerD=c[1027+50*a.saveStateSlot];a.registerE=c[1028+50*a.saveStateSlot];a.registerH=c[1029+50*a.saveStateSlot];a.registerL=c[1030+50*a.saveStateSlot];a.registerF=c[1031+50*a.saveStateSlot];a.stackPointer=c[1032+50*a.saveStateSlot];a.programCounter=c[1034+50*a.saveStateSlot];a.currentCycles=c[1036+50*a.saveStateSlot];a.isHaltNormal=G(1041+50*a.saveStateSlot);a.isHaltNoJump=G(1042+50*a.saveStateSlot);a.isHaltBug=G(1043+50*a.saveStateSlot);
a.isStopped=G(1044+50*a.saveStateSlot);a.BootROMEnabled=G(1045+50*a.saveStateSlot);a.GBCEnabled=G(1046+50*a.saveStateSlot);a.GBCDoubleSpeed=G(1047+50*a.saveStateSlot)};a.memoryLocationBootROMSwitch=65360;a.BootROMEnabled=!1;a.GBCEnabled=!1;a.memoryLocationSpeedSwitch=65357;a.GBCDoubleSpeed=!1;a.registerA=0;a.registerB=0;a.registerC=0;a.registerD=0;a.registerE=0;a.registerH=0;a.registerL=0;a.registerF=0;a.stackPointer=0;a.programCounter=0;a.currentCycles=0;a.isHaltNormal=!1;a.isHaltNoJump=!1;a.isHaltBug=
!1;a.isStopped=!1;a.saveStateSlot=0;return a}();function Wb(a){var b=g.registerA;ya(b,a);za(b,a);b=b+a&255;g.registerA=b;k(0===b);l(0)}function Xb(a){var b=g.registerA,d=b+a+xa()&255;m(0!=((b^a^d)&16));a=b+a+xa()&65535;n(0<(a&256));g.registerA=d;k(0===d);l(0)}function Yb(a){var b=-1*a;var d=g.registerA;ya(d,b);za(d,b);d=d-a&255;g.registerA=d;k(0===d);l(1)}function Zb(a){var b=g.registerA,d=b-a-xa()&255;m(0!=((b^a^d)&16));a=b-a-xa()&65535;n(0<(a&256));g.registerA=d;k(0===d);l(1)}
function $b(a){a&=g.registerA;g.registerA=a;k(0===a);l(0);m(1);n(0)}function ac(a){a=(g.registerA^a)&255;g.registerA=a;k(0===a);l(0);m(0);n(0)}function bc(a){a|=g.registerA;g.registerA=a;k(0===a);l(0);m(0);n(0)}function cc(a){var b=g.registerA;a*=-1;ya(b,a);za(b,a);k(0===b+a);l(1)}function dc(a,b){k(0===(b&1<<a));l(0);m(1);return b}function ec(a,b,d){return 0<b?d|1<<a:d&~(1<<a)}function fc(a){var b=g.programCounter;b=(b+(a<<24>>24)&65535)+1&65535;g.programCounter=b}
function gc(a){var b=g.programCounter;b=b+1&65535;g.isHaltBug&&(b=b-1&65535);g.programCounter=b;switch((a&240)>>4){case 0:return hc(a);case 1:return ic(a);case 2:return jc(a);case 3:return kc(a);case 4:return lc(a);case 5:return mc(a);case 6:return nc(a);case 7:return oc(a);case 8:return pc(a);case 9:return qc(a);case 10:return rc(a);case 11:return sc(a);case 12:return tc(a);case 13:return uc(a);case 14:return vc(a);default:return wc(a)}}function W(a){xc(4);return Jb(a)}
function yc(a,b){xc(4);Kb(a,b)}function zc(a){xc(8);var b=Vb(a);b=-1===b?C(a):b;a+=1;var d=Vb(a);a=-1===d?C(a):d;return r(a,b)}function Ac(a,b){xc(8);var d=v(b);b&=255;Lb(a,b)&&J(a,b);a+=1;Lb(a,d)&&J(a,d)}function Z(){xc(4);return C(g.programCounter)}function Bc(){xc(4);var a=C(g.programCounter+1&65535);return r(a,Z())}
function hc(a){switch(a){case 0:return 4;case 1:return a=Bc(),g.registerB=v(a),g.registerC=a&255,g.programCounter=g.programCounter+2&65535,4;case 2:return yc(r(g.registerB,g.registerC),g.registerA),4;case 3:return a=r(g.registerB,g.registerC),a++,g.registerB=v(a),g.registerC=a&255,8;case 4:return a=g.registerB,ya(a,1),a=a+1&255,g.registerB=a,k(0===a),l(0),4;case 5:return a=g.registerB,ya(a,-1),a=a-1&255,g.registerB=a,k(0===a),l(1),4;case 6:return g.registerB=Z(),g.programCounter=g.programCounter+
1&65535,4;case 7:return a=g.registerA,n(128===(a&128)),g.registerA=(a<<1|a>>7)&255,k(0),l(0),m(0),4;case 8:return Ac(Bc(),g.stackPointer),g.programCounter=g.programCounter+2&65535,4;case 9:a=r(g.registerH,g.registerL);var b=r(g.registerB,g.registerC);Aa(a,b,!1);a=a+b&65535;g.registerH=v(a);g.registerL=a&255;l(0);return 8;case 10:return g.registerA=W(r(g.registerB,g.registerC)),4;case 11:return a=r(g.registerB,g.registerC),a=a-1&65535,g.registerB=v(a),g.registerC=a&255,8;case 12:return a=g.registerC,
ya(a,1),a=a+1&255,g.registerC=a,k(0===a),l(0),4;case 13:return a=g.registerC,ya(a,-1),a=a-1&255,g.registerC=a,k(0===a),l(1),4;case 14:return g.registerC=Z(),g.programCounter=g.programCounter+1&65535,4;case 15:return a=g.registerA,n(0<(a&1)),g.registerA=(a>>1|a<<7)&255,k(0),l(0),m(0),4}return-1}
function ic(a){switch(a){case 16:if(g.GBCEnabled&&(a=W(g.memoryLocationSpeedSwitch),B(0,a)))return a=z(0,a),B(7,a)?(g.GBCDoubleSpeed=!1,a=z(7,a)):(g.GBCDoubleSpeed=!0,a|=128),yc(g.memoryLocationSpeedSwitch,a),68;g.isStopped=!0;g.programCounter=g.programCounter+1&65535;return 4;case 17:return a=Bc(),g.registerD=v(a),g.registerE=a&255,g.programCounter=g.programCounter+2&65535,4;case 18:return yc(r(g.registerD,g.registerE),g.registerA),4;case 19:return a=r(g.registerD,g.registerE),a=a+1&65535,g.registerD=
v(a),g.registerE=a&255,8;case 20:return a=g.registerD,ya(a,1),g.registerD=a+1&255,k(0===g.registerD),l(0),4;case 21:return a=g.registerD,ya(a,-1),g.registerD=a-1&255,k(0===g.registerD),l(1),4;case 22:return g.registerD=Z(),g.programCounter=g.programCounter+1&65535,4;case 23:return a=128===(g.registerA&128),g.registerA=(g.registerA<<1|xa())&255,n(a),k(0),l(0),m(0),4;case 24:return fc(Z()),8;case 25:a=r(g.registerH,g.registerL);var b=r(g.registerD,g.registerE);Aa(a,b,!1);a=a+b&65535;g.registerH=v(a);
g.registerL=a&255;l(0);return 8;case 26:return a=r(g.registerD,g.registerE),g.registerA=W(a),4;case 27:return a=r(g.registerD,g.registerE),a=a-1&65535,g.registerD=v(a),g.registerE=a&255,8;case 28:return a=g.registerE,ya(a,1),a=a+1&255,g.registerE=a,k(0===a),l(0),4;case 29:return a=g.registerE,ya(a,-1),a=a-1&255,g.registerE=a,k(0===a),l(1),4;case 30:return g.registerE=Z(),g.programCounter=g.programCounter+1&65535,4;case 31:return a=1===(g.registerA&1),g.registerA=(g.registerA>>1|xa()<<7)&255,n(a),
k(0),l(0),m(0),4}return-1}
function jc(a){switch(a){case 32:return 0===wa()?fc(Z()):g.programCounter=g.programCounter+1&65535,8;case 33:return a=Bc(),g.registerH=v(a),g.registerL=a&255,g.programCounter=g.programCounter+2&65535,4;case 34:return a=r(g.registerH,g.registerL),yc(a,g.registerA),a=a+1&65535,g.registerH=v(a),g.registerL=a&255,4;case 35:return a=r(g.registerH,g.registerL),a=a+1&65535,g.registerH=v(a),g.registerL=a&255,8;case 36:return a=g.registerH,ya(a,1),a=a+1&255,g.registerH=a,k(0===a),l(0),4;case 37:return a=g.registerH,
ya(a,-1),a=a-1&255,g.registerH=a,k(0===a),l(1),4;case 38:return g.registerH=Z(),g.programCounter=g.programCounter+1&65535,4;case 39:a=0;0<(g.registerF>>5&1)&&(a|=6);0<xa()&&(a|=96);var b=g.registerA;0<(g.registerF>>6&1)?b=b-a&255:(9<(b&15)&&(a|=6),153<b&&(a|=96),b=b+a&255);k(0===b);n(0!==(a&96));m(0);g.registerA=b;return 4;case 40:return 0<wa()?fc(Z()):g.programCounter=g.programCounter+1&65535,8;case 41:return a=r(g.registerH,g.registerL),Aa(a,a,!1),a=2*a&65535,g.registerH=v(a),g.registerL=a&255,
l(0),8;case 42:return a=r(g.registerH,g.registerL),g.registerA=W(a),a=a+1&65535,g.registerH=v(a),g.registerL=a&255,4;case 43:return a=r(g.registerH,g.registerL),a=a-1&65535,g.registerH=v(a),g.registerL=a&255,8;case 44:return a=g.registerL,ya(a,1),a=a+1&255,g.registerL=a,k(0===a),l(0),4;case 45:return a=g.registerL,ya(a,-1),a=a-1&255,g.registerL=a,k(0===a),l(1),4;case 46:return g.registerL=Z(),g.programCounter=g.programCounter+1&65535,4;case 47:return g.registerA=~g.registerA,l(1),m(1),4}return-1}
function kc(a){switch(a){case 48:return 0===xa()?fc(Z()):g.programCounter=g.programCounter+1&65535,8;case 49:return g.stackPointer=Bc(),g.programCounter=g.programCounter+2&65535,4;case 50:return a=r(g.registerH,g.registerL),yc(a,g.registerA),a=a-1&65535,g.registerH=v(a),g.registerL=a&255,4;case 51:return g.stackPointer=g.stackPointer+1&65535,8;case 52:a=r(g.registerH,g.registerL);var b=W(a);ya(b,1);b=b+1&255;k(0===b);l(0);yc(a,b);return 4;case 53:return a=r(g.registerH,g.registerL),b=W(a),ya(b,-1),
b=b-1&255,k(0===b),l(1),yc(a,b),4;case 54:return yc(r(g.registerH,g.registerL),Z()),g.programCounter=g.programCounter+1&65535,4;case 55:return l(0),m(0),n(1),4;case 56:return 1===xa()?fc(Z()):g.programCounter=g.programCounter+1&65535,8;case 57:return a=r(g.registerH,g.registerL),Aa(a,g.stackPointer,!1),a=a+g.stackPointer&65535,g.registerH=v(a),g.registerL=a&255,l(0),8;case 58:return a=r(g.registerH,g.registerL),g.registerA=W(a),a=a-1&65535,g.registerH=v(a),g.registerL=a&255,4;case 59:return g.stackPointer=
g.stackPointer-1&65535,8;case 60:return a=g.registerA,ya(a,1),a=a+1&255,g.registerA=a,k(0===a),l(0),4;case 61:return a=g.registerA,ya(a,-1),a=a-1&255,g.registerA=a,k(0===a),l(1),4;case 62:return g.registerA=Z(),g.programCounter=g.programCounter+1&65535,4;case 63:return l(0),m(0),n(0>=xa()),4}return-1}
function lc(a){switch(a){case 64:return 4;case 65:return g.registerB=g.registerC,4;case 66:return g.registerB=g.registerD,4;case 67:return g.registerB=g.registerE,4;case 68:return g.registerB=g.registerH,4;case 69:return g.registerB=g.registerL,4;case 70:return g.registerB=W(r(g.registerH,g.registerL)),4;case 71:return g.registerB=g.registerA,4;case 72:return g.registerC=g.registerB,4;case 73:return 4;case 74:return g.registerC=g.registerD,4;case 75:return g.registerC=g.registerE,4;case 76:return g.registerC=
g.registerH,4;case 77:return g.registerC=g.registerL,4;case 78:return g.registerC=W(r(g.registerH,g.registerL)),4;case 79:return g.registerC=g.registerA,4}return-1}
function mc(a){switch(a){case 80:return g.registerD=g.registerB,4;case 81:return g.registerD=g.registerC,4;case 82:return 4;case 83:return g.registerD=g.registerE,4;case 84:return g.registerD=g.registerH,4;case 85:return g.registerD=g.registerL,4;case 86:return g.registerD=W(r(g.registerH,g.registerL)),4;case 87:return g.registerD=g.registerA,4;case 88:return g.registerE=g.registerB,4;case 89:return g.registerE=g.registerC,4;case 90:return g.registerE=g.registerD,4;case 91:return 4;case 92:return g.registerE=
g.registerH,4;case 93:return g.registerE=g.registerL,4;case 94:return g.registerE=W(r(g.registerH,g.registerL)),4;case 95:return g.registerE=g.registerA,4}return-1}
function nc(a){switch(a){case 96:return g.registerH=g.registerB,4;case 97:return g.registerH=g.registerC,4;case 98:return g.registerH=g.registerD,4;case 99:return g.registerH=g.registerE,4;case 100:return g.registerH=g.registerH,4;case 101:return g.registerH=g.registerL,4;case 102:return g.registerH=W(r(g.registerH,g.registerL)),4;case 103:return g.registerH=g.registerA,4;case 104:return g.registerL=g.registerB,4;case 105:return g.registerL=g.registerC,4;case 106:return g.registerL=g.registerD,4;
case 107:return g.registerL=g.registerE,4;case 108:return g.registerL=g.registerH,4;case 109:return g.registerL=g.registerL,4;case 110:return g.registerL=W(r(g.registerH,g.registerL)),4;case 111:return g.registerL=g.registerA,4}return-1}
function oc(a){switch(a){case 112:return yc(r(g.registerH,g.registerL),g.registerB),4;case 113:return yc(r(g.registerH,g.registerL),g.registerC),4;case 114:return yc(r(g.registerH,g.registerL),g.registerD),4;case 115:return yc(r(g.registerH,g.registerL),g.registerE),4;case 116:return yc(r(g.registerH,g.registerL),g.registerH),4;case 117:return yc(r(g.registerH,g.registerL),g.registerL),4;case 118:return U.isHblankHdmaActive||g.enableHalt(),4;case 119:return yc(r(g.registerH,g.registerL),g.registerA),
4;case 120:return g.registerA=g.registerB,4;case 121:return g.registerA=g.registerC,4;case 122:return g.registerA=g.registerD,4;case 123:return g.registerA=g.registerE,4;case 124:return g.registerA=g.registerH,4;case 125:return g.registerA=g.registerL,4;case 126:return g.registerA=W(r(g.registerH,g.registerL)),4;case 127:return 4}return-1}
function pc(a){switch(a){case 128:return Wb(g.registerB),4;case 129:return Wb(g.registerC),4;case 130:return Wb(g.registerD),4;case 131:return Wb(g.registerE),4;case 132:return Wb(g.registerH),4;case 133:return Wb(g.registerL),4;case 134:return a=W(r(g.registerH,g.registerL)),Wb(a),4;case 135:return Wb(g.registerA),4;case 136:return Xb(g.registerB),4;case 137:return Xb(g.registerC),4;case 138:return Xb(g.registerD),4;case 139:return Xb(g.registerE),4;case 140:return Xb(g.registerH),4;case 141:return Xb(g.registerL),
4;case 142:return a=W(r(g.registerH,g.registerL)),Xb(a),4;case 143:return Xb(g.registerA),4}return-1}
function qc(a){switch(a){case 144:return Yb(g.registerB),4;case 145:return Yb(g.registerC),4;case 146:return Yb(g.registerD),4;case 147:return Yb(g.registerE),4;case 148:return Yb(g.registerH),4;case 149:return Yb(g.registerL),4;case 150:return a=W(r(g.registerH,g.registerL)),Yb(a),4;case 151:return Yb(g.registerA),4;case 152:return Zb(g.registerB),4;case 153:return Zb(g.registerC),4;case 154:return Zb(g.registerD),4;case 155:return Zb(g.registerE),4;case 156:return Zb(g.registerH),4;case 157:return Zb(g.registerL),
4;case 158:return a=W(r(g.registerH,g.registerL)),Zb(a),4;case 159:return Zb(g.registerA),4}return-1}
function rc(a){switch(a){case 160:return $b(g.registerB),4;case 161:return $b(g.registerC),4;case 162:return $b(g.registerD),4;case 163:return $b(g.registerE),4;case 164:return $b(g.registerH),4;case 165:return $b(g.registerL),4;case 166:return a=W(r(g.registerH,g.registerL)),$b(a),4;case 167:return $b(g.registerA),4;case 168:return ac(g.registerB),4;case 169:return ac(g.registerC),4;case 170:return ac(g.registerD),4;case 171:return ac(g.registerE),4;case 172:return ac(g.registerH),4;case 173:return ac(g.registerL),
4;case 174:return a=W(r(g.registerH,g.registerL)),ac(a),4;case 175:return ac(g.registerA),4}return-1}
function sc(a){switch(a){case 176:return bc(g.registerB),4;case 177:return bc(g.registerC),4;case 178:return bc(g.registerD),4;case 179:return bc(g.registerE),4;case 180:return bc(g.registerH),4;case 181:return bc(g.registerL),4;case 182:return a=W(r(g.registerH,g.registerL)),bc(a),4;case 183:return bc(g.registerA),4;case 184:return cc(g.registerB),4;case 185:return cc(g.registerC),4;case 186:return cc(g.registerD),4;case 187:return cc(g.registerE),4;case 188:return cc(g.registerH),4;case 189:return cc(g.registerL),
4;case 190:return a=W(r(g.registerH,g.registerL)),cc(a),4;case 191:return cc(g.registerA),4}return-1}
function tc(a){switch(a){case 192:return 0===wa()?(a=g.stackPointer,g.programCounter=zc(a),g.stackPointer=a+2&65535,12):8;case 193:return a=zc(g.stackPointer),g.stackPointer=g.stackPointer+2&65535,g.registerB=v(a),g.registerC=a&255,4;case 194:if(0===wa())return g.programCounter=Bc(),8;g.programCounter=g.programCounter+2&65535;return 12;case 195:return g.programCounter=Bc(),8;case 196:if(0===wa())return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter+2&65535),g.programCounter=Bc(),
8;g.programCounter=g.programCounter+2&65535;return 12;case 197:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,r(g.registerB,g.registerC)),8;case 198:return Wb(Z()),g.programCounter=g.programCounter+1&65535,4;case 199:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter),g.programCounter=0,8;case 200:return 1===wa()?(a=g.stackPointer,g.programCounter=zc(a),g.stackPointer=a+2&65535,12):8;case 201:return a=g.stackPointer,g.programCounter=zc(a),g.stackPointer=a+2&65535,8;case 202:if(1===
wa())return g.programCounter=Bc(),8;g.programCounter=g.programCounter+2&65535;return 12;case 203:var b=Z();a=-1;var d=!1,f=0,h=0,u=b&7;switch(u){case 0:f=g.registerB;break;case 1:f=g.registerC;break;case 2:f=g.registerD;break;case 3:f=g.registerE;break;case 4:f=g.registerH;break;case 5:f=g.registerL;break;case 6:f=W(r(g.registerH,g.registerL));break;case 7:f=g.registerA}var y=(b&240)>>4;switch(y){case 0:7>=b?(b=f,n(128===(b&128)),b=(b<<1|b>>7)&255,k(0===b),l(0),m(0),h=b,d=!0):15>=b&&(b=f,n(0<(b&1)),
b=(b>>1|b<<7)&255,k(0===b),l(0),m(0),h=b,d=!0);break;case 1:23>=b?(b=f,d=128===(b&128),b=(b<<1|xa())&255,n(d),k(0===b),l(0),m(0),h=b,d=!0):31>=b&&(b=f,d=1===(b&1),b=(b>>1|xa()<<7)&255,n(d),k(0===b),l(0),m(0),h=b,d=!0);break;case 2:39>=b?(b=f,d=128===(b&128),b=b<<1&255,n(d),k(0===b),l(0),m(0),h=b,d=!0):47>=b&&(b=f,d=128===(b&128),f=1===(b&1),b=b>>1&255,d&&(b|=128),k(0===b),l(0),m(0),n(f),h=b,d=!0);break;case 3:55>=b?(b=f,b=((b&15)<<4|(b&240)>>4)&255,k(0===b),l(0),m(0),n(0),h=b,d=!0):63>=b&&(b=f,d=
1===(b&1),b=b>>1&255,k(0===b),l(0),m(0),n(d),h=b,d=!0);break;case 4:71>=b?(h=dc(0,f),d=!0):79>=b&&(h=dc(1,f),d=!0);break;case 5:87>=b?(h=dc(2,f),d=!0):95>=b&&(h=dc(3,f),d=!0);break;case 6:103>=b?(h=dc(4,f),d=!0):111>=b&&(h=dc(5,f),d=!0);break;case 7:119>=b?(h=dc(6,f),d=!0):127>=b&&(h=dc(7,f),d=!0);break;case 8:135>=b?(h=ec(0,0,f),d=!0):143>=b&&(h=ec(1,0,f),d=!0);break;case 9:151>=b?(h=ec(2,0,f),d=!0):159>=b&&(h=ec(3,0,f),d=!0);break;case 10:167>=b?(h=ec(4,0,f),d=!0):175>=b&&(h=ec(5,0,f),d=!0);break;
case 11:183>=b?(h=ec(6,0,f),d=!0):191>=b&&(h=ec(7,0,f),d=!0);break;case 12:199>=b?(h=ec(0,1,f),d=!0):207>=b&&(h=ec(1,1,f),d=!0);break;case 13:215>=b?(h=ec(2,1,f),d=!0):223>=b&&(h=ec(3,1,f),d=!0);break;case 14:231>=b?(h=ec(4,1,f),d=!0):239>=b&&(h=ec(5,1,f),d=!0);break;case 15:247>=b?(h=ec(6,1,f),d=!0):255>=b&&(h=ec(7,1,f),d=!0)}switch(u){case 0:g.registerB=h;break;case 1:g.registerC=h;break;case 2:g.registerD=h;break;case 3:g.registerE=h;break;case 4:g.registerH=h;break;case 5:g.registerL=h;break;
case 6:(4>y||7<y)&&yc(r(g.registerH,g.registerL),h);break;case 7:g.registerA=h}d&&(a=4);g.programCounter=g.programCounter+1&65535;return a;case 204:if(1===wa())return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter+2),g.programCounter=Bc(),8;g.programCounter=g.programCounter+2&65535;return 12;case 205:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter+2&65535),g.programCounter=Bc(),8;case 206:return Xb(Z()),g.programCounter=g.programCounter+1&65535,4;case 207:return a=
g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter),g.programCounter=8}return-1}
function uc(a){switch(a){case 208:return 0===xa()?(a=g.stackPointer,g.programCounter=zc(a),g.stackPointer=a+2&65535,12):8;case 209:a=g.stackPointer;var b=zc(a);g.stackPointer=a+2&65535;g.registerD=v(b);g.registerE=b&255;return 4;case 210:if(0===xa())return g.programCounter=Bc(),8;g.programCounter=g.programCounter+2&65535;return 12;case 212:if(0===xa())return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter+2),g.programCounter=Bc(),8;g.programCounter=g.programCounter+2&65535;return 12;
case 213:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,r(g.registerD,g.registerE)),8;case 214:return Yb(Z()),g.programCounter=g.programCounter+1&65535,4;case 215:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter),g.programCounter=16,8;case 216:return 1===xa()?(a=g.stackPointer,g.programCounter=zc(a),g.stackPointer=a+2&65535,12):8;case 217:return a=g.stackPointer,g.programCounter=zc(a),xb(!0),g.stackPointer=a+2&65535,8;case 218:if(1===xa())return g.programCounter=Bc(),
8;g.programCounter=g.programCounter+2&65535;return 12;case 220:if(1===xa())return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter+2&65535),g.programCounter=Bc(),8;g.programCounter=g.programCounter+2&65535;return 12;case 222:return Zb(Z()),g.programCounter=g.programCounter+1&65535,4;case 223:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter),g.programCounter=24,8}return-1}
function vc(a){switch(a){case 224:return a=Z(),yc(65280+a,g.registerA),g.programCounter=g.programCounter+1&65535,4;case 225:a=g.stackPointer;var b=zc(a);g.stackPointer=a+2&65535;g.registerH=v(b);g.registerL=b&255;return 4;case 226:return yc(65280+g.registerC,g.registerA),4;case 229:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,r(g.registerH,g.registerL)),8;case 230:return $b(Z()),g.programCounter=g.programCounter+1&65535,4;case 231:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter),
g.programCounter=32,8;case 232:return a=Z()<<24>>24,Aa(g.stackPointer,a,!0),g.stackPointer=g.stackPointer+a&65535,k(0),l(0),g.programCounter=g.programCounter+1&65535,12;case 233:return g.programCounter=r(g.registerH,g.registerL),4;case 234:return yc(Bc(),g.registerA),g.programCounter=g.programCounter+2&65535,4;case 238:return ac(Z()),g.programCounter=g.programCounter+1&65535,4;case 239:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,g.programCounter),g.programCounter=40,8}return-1}
function wc(a){switch(a){case 240:return a=Z(),g.registerA=W(65280+a)&255,g.programCounter=g.programCounter+1&65535,4;case 241:a=g.stackPointer;var b=zc(a);g.stackPointer=a+2&65535;g.registerA=v(b);g.registerF=b&255;return 4;case 242:return g.registerA=W(65280+g.registerC)&255,4;case 243:return xb(!1),4;case 245:return a=g.stackPointer-2&65535,g.stackPointer=a,Ac(a,r(g.registerA,g.registerF)),8;case 246:return bc(Z()),g.programCounter=g.programCounter+1&65535,4;case 247:return a=g.stackPointer-2&
65535,g.stackPointer=a,Ac(a,g.programCounter),g.programCounter=48,8;case 248:return b=Z()<<24>>24,a=g.stackPointer,k(0),l(0),Aa(a,b,!0),a=a+b&65535,g.registerH=v(a),g.registerL=a&255,g.programCounter=g.programCounter+1&65535,8;case 249:return g.stackPointer=r(g.registerH,g.registerL),8;case 250:return g.registerA=W(Bc()),g.programCounter=g.programCounter+2&65535,4;case 251:return xb(!0),4;case 254:return cc(Z()),g.programCounter=g.programCounter+1&65535,4;case 255:return a=g.stackPointer-2&65535,
g.stackPointer=a,Ac(a,g.programCounter),g.programCounter=56,8}return-1}var Cc=function(){function a(){}a.cyclesPerCycleSet=2E9;a.cycleSets=0;a.cycles=0;return a}();
function xc(a){0<U.DMACycles&&(a+=U.DMACycles,U.DMACycles=0);g.currentCycles+=a;if(!g.isStopped){if(e.graphicsBatchProcessing){D.currentCycles+=a;for(var b=D.batchProcessCycles();D.currentCycles>=b;)Sb(b),D.currentCycles-=b}else Sb(a);e.audioBatchProcessing?(E.currentCycles+=a,pb()):qb(a);b=a;if(Eb.transferStartFlag)for(var d=0;d<b;){var f=Eb.currentCycles,h=f;d+=4;h+=4;65535<h&&(h-=65536);Eb.currentCycles=h;var u=Eb.isClockSpeedFast?2:7;B(u,f)&&!B(u,h)&&(f=Eb.memoryLocationSerialTransferData,h=C(f),
h=(h<<1)+1,h&=255,J(f,h),f=Eb.numberOfBitsTransferred,8===++f?(Eb.numberOfBitsTransferred=0,R.isSerialInterruptRequested=!0,yb(R.bitPositionSerialInterrupt),f=Eb.memoryLocationSerialTransferControl,h=C(f),J(f,z(7,h)),Eb.transferStartFlag=!1):Eb.numberOfBitsTransferred=f)}}e.timersBatchProcessing?(S.currentCycles+=a,Db(S.currentCycles),S.currentCycles=0):Db(a);b=Cc.cycles;b+=a;b>=Cc.cyclesPerCycleSet&&(Cc.cycleSets+=1,b-=Cc.cyclesPerCycleSet);Cc.cycles=b}
var Dc=function(){function a(){}a.stepsPerStepSet=2E9;a.stepSets=0;a.steps=0;a.RESPONSE_CONDITION_ERROR=-1;a.RESPONSE_CONDITION_FRAME=0;a.RESPONSE_CONDITION_AUDIO=1;a.RESPONSE_CONDITION_BREAKPOINT=2;return a}();function Ec(){return Fc(!0,-1)}
function Fc(a,b){void 0===b&&(b=-1);a=1024;0<b?a=b:0>b&&(a=-1);for(var d=!1,f=!1,h=!1;!(d||f||h||Nb.reachedBreakpoint);)b=Gc(),0>b?d=!0:g.currentCycles>=g.MAX_CYCLES_PER_FRAME()?f=!0:-1<a&&tb()>=a&&(h=!0);if(f)return g.currentCycles-=g.MAX_CYCLES_PER_FRAME(),Dc.RESPONSE_CONDITION_FRAME;if(h)return Dc.RESPONSE_CONDITION_AUDIO;if(Nb.reachedBreakpoint)return Nb.reachedBreakpoint=!1,Dc.RESPONSE_CONDITION_BREAKPOINT;g.programCounter=g.programCounter-1&65535;return-1}
function Gc(){Hc=!0;if(g.isHaltBug){var a=C(g.programCounter);a=gc(a);xc(a);g.exitHaltAndStop()}R.masterInterruptSwitchDelay&&(R.masterInterruptSwitch=!0,R.masterInterruptSwitchDelay=!1);if(0<(R.interruptsEnabledValue&R.interruptsRequestedValue&31)){a=!1;R.masterInterruptSwitch&&!g.isHaltNoJump&&(R.isVBlankInterruptEnabled&&R.isVBlankInterruptRequested?(wb(R.bitPositionVBlankInterrupt),a=!0):R.isLcdInterruptEnabled&&R.isLcdInterruptRequested?(wb(R.bitPositionLcdInterrupt),a=!0):R.isTimerInterruptEnabled&&
R.isTimerInterruptRequested?(wb(R.bitPositionTimerInterrupt),a=!0):R.isSerialInterruptEnabled&&R.isSerialInterruptRequested?(wb(R.bitPositionSerialInterrupt),a=!0):R.isJoypadInterruptEnabled&&R.isJoypadInterruptRequested&&(wb(R.bitPositionJoypadInterrupt),a=!0));var b=0;a&&(b=20,g.isHalted()&&(g.exitHaltAndStop(),b+=4));g.isHalted()&&g.exitHaltAndStop();a=b}else a=0;0<a&&xc(a);a=4;g.isHalted()||g.isStopped||(a=C(g.programCounter),a=gc(a));g.registerF&=240;if(0>=a)return a;xc(a);b=Dc.steps;b+=1;b>=
Dc.stepsPerStepSet&&(Dc.stepSets+=1,b-=Dc.stepsPerStepSet);Dc.steps=b;g.programCounter===Nb.programCounter&&(Nb.reachedBreakpoint=!0);return a}aa.size()<ua&&aa.grow(ua-aa.size());
var Hc=!1,Ic=Object.freeze({memory:aa,config:function(a,b,d,f,h,u,y,x,t,w){e.enableBootRom=0<a;e.useGbcWhenAvailable=0<b;e.audioBatchProcessing=0<d;e.graphicsBatchProcessing=0<f;e.timersBatchProcessing=0<h;e.graphicsDisableScanlineRendering=0<u;e.audioAccumulateSamples=0<y;e.tileRendering=0<x;e.tileCaching=0<t;e.enableAudioDebugging=0<w;a=C(323);g.GBCEnabled=192===a||e.useGbcWhenAvailable&&128===a?!0:!1;Hc=!1;Cc.cyclesPerCycleSet=2E9;Cc.cycleSets=0;Cc.cycles=0;Dc.stepsPerStepSet=2E9;Dc.stepSets=0;
Dc.steps=0;g.BootROMEnabled=e.enableBootRom?!0:!1;g.GBCDoubleSpeed=!1;g.registerA=0;g.registerB=0;g.registerC=0;g.registerD=0;g.registerE=0;g.registerH=0;g.registerL=0;g.registerF=0;g.stackPointer=0;g.programCounter=0;g.currentCycles=0;g.isHaltNormal=!1;g.isHaltNoJump=!1;g.isHaltBug=!1;g.isStopped=!1;g.BootROMEnabled||(g.GBCEnabled?(g.registerA=17,g.registerF=128,g.registerB=0,g.registerC=0,g.registerD=255,g.registerE=86,g.registerH=0,g.registerL=13):(g.registerA=1,g.registerF=176,g.registerB=0,g.registerC=
19,g.registerD=0,g.registerE=216,g.registerH=1,g.registerL=77),g.programCounter=256,g.stackPointer=65534);U.isRamBankingEnabled=!1;U.isMBC1RomModeEnabled=!0;a=C(327);U.isRomOnly=0===a;U.isMBC1=1<=a&&3>=a;U.isMBC2=5<=a&&6>=a;U.isMBC3=15<=a&&19>=a;U.isMBC5=25<=a&&30>=a;U.currentRomBank=1;U.currentRamBank=0;J(U.memoryLocationGBCVRAMBank,0);J(U.memoryLocationGBCWRAMBank,1);J(65361,255);J(65362,255);J(65363,255);J(65364,255);J(65365,255);D.currentCycles=0;D.scanlineCycleCounter=0;D.scanlineRegister=0;
D.scrollX=0;D.scrollY=0;D.windowX=0;D.windowY=0;D.scanlineRegister=144;g.GBCEnabled?(J(65345,129),J(65348,144),J(65351,252)):(J(65345,133),J(65350,255),J(65351,252),J(65352,255),J(65353,255));D.scanlineRegister=144;J(65344,144);J(65359,0);J(65392,1);g.BootROMEnabled&&(g.GBCEnabled?(D.scanlineRegister=0,J(65344,0),J(65345,128),J(65348,0)):(D.scanlineRegister=0,J(65344,0),J(65345,132)));ab(0);if(!g.GBCEnabled&&(!g.BootROMEnabled||g.GBCEnabled)){a=0;for(b=308;323>=b;b++)a+=C(b);switch(a&255){case 136:q.bgWhite=
Pa.bgWhite;q.bgLightGrey=Pa.bgLightGrey;q.bgDarkGrey=Pa.bgDarkGrey;q.bgBlack=Pa.bgBlack;q.obj0White=Pa.obj0White;q.obj0LightGrey=Pa.obj0LightGrey;q.obj0DarkGrey=Pa.obj0DarkGrey;q.obj0Black=Pa.obj0Black;q.obj1White=Pa.obj1White;q.obj1LightGrey=Pa.obj1LightGrey;q.obj1DarkGrey=Pa.obj1DarkGrey;q.obj1Black=Pa.obj1Black;break;case 97:q.bgWhite=Qa.bgWhite;q.bgLightGrey=Qa.bgLightGrey;q.bgDarkGrey=Qa.bgDarkGrey;q.bgBlack=Qa.bgBlack;q.obj0White=Qa.obj0White;q.obj0LightGrey=Qa.obj0LightGrey;q.obj0DarkGrey=
Qa.obj0DarkGrey;q.obj0Black=Qa.obj0Black;q.obj1White=Qa.obj1White;q.obj1LightGrey=Qa.obj1LightGrey;q.obj1DarkGrey=Qa.obj1DarkGrey;q.obj1Black=Qa.obj1Black;break;case 20:q.bgWhite=Ra.bgWhite;q.bgLightGrey=Ra.bgLightGrey;q.bgDarkGrey=Ra.bgDarkGrey;q.bgBlack=Ra.bgBlack;q.obj0White=Ra.obj0White;q.obj0LightGrey=Ra.obj0LightGrey;q.obj0DarkGrey=Ra.obj0DarkGrey;q.obj0Black=Ra.obj0Black;q.obj1White=Ra.obj1White;q.obj1LightGrey=Ra.obj1LightGrey;q.obj1DarkGrey=Ra.obj1DarkGrey;q.obj1Black=Ra.obj1Black;break;
case 70:q.bgWhite=Sa.bgWhite;q.bgLightGrey=Sa.bgLightGrey;q.bgDarkGrey=Sa.bgDarkGrey;q.bgBlack=Sa.bgBlack;q.obj0White=Sa.obj0White;q.obj0LightGrey=Sa.obj0LightGrey;q.obj0DarkGrey=Sa.obj0DarkGrey;q.obj0Black=Sa.obj0Black;q.obj1White=Sa.obj1White;q.obj1LightGrey=Sa.obj1LightGrey;q.obj1DarkGrey=Sa.obj1DarkGrey;q.obj1Black=Sa.obj1Black;break;case 89:case 198:q.bgWhite=Ta.bgWhite;q.bgLightGrey=Ta.bgLightGrey;q.bgDarkGrey=Ta.bgDarkGrey;q.bgBlack=Ta.bgBlack;q.obj0White=Ta.obj0White;q.obj0LightGrey=Ta.obj0LightGrey;
q.obj0DarkGrey=Ta.obj0DarkGrey;q.obj0Black=Ta.obj0Black;q.obj1White=Ta.obj1White;q.obj1LightGrey=Ta.obj1LightGrey;q.obj1DarkGrey=Ta.obj1DarkGrey;q.obj1Black=Ta.obj1Black;break;case 134:case 168:q.bgWhite=Ua.bgWhite;q.bgLightGrey=Ua.bgLightGrey;q.bgDarkGrey=Ua.bgDarkGrey;q.bgBlack=Ua.bgBlack;q.obj0White=Ua.obj0White;q.obj0LightGrey=Ua.obj0LightGrey;q.obj0DarkGrey=Ua.obj0DarkGrey;q.obj0Black=Ua.obj0Black;q.obj1White=Ua.obj1White;q.obj1LightGrey=Ua.obj1LightGrey;q.obj1DarkGrey=Ua.obj1DarkGrey;q.obj1Black=
Ua.obj1Black;break;case 191:case 206:case 209:case 240:q.bgWhite=Va.bgWhite;q.bgLightGrey=Va.bgLightGrey;q.bgDarkGrey=Va.bgDarkGrey;q.bgBlack=Va.bgBlack;q.obj0White=Va.obj0White;q.obj0LightGrey=Va.obj0LightGrey;q.obj0DarkGrey=Va.obj0DarkGrey;q.obj0Black=Va.obj0Black;q.obj1White=Va.obj1White;q.obj1LightGrey=Va.obj1LightGrey;q.obj1DarkGrey=Va.obj1DarkGrey;q.obj1Black=Va.obj1Black;break;case 39:case 73:case 92:case 179:q.bgWhite=Wa.bgWhite;q.bgLightGrey=Wa.bgLightGrey;q.bgDarkGrey=Wa.bgDarkGrey;q.bgBlack=
Wa.bgBlack;q.obj0White=Wa.obj0White;q.obj0LightGrey=Wa.obj0LightGrey;q.obj0DarkGrey=Wa.obj0DarkGrey;q.obj0Black=Wa.obj0Black;q.obj1White=Wa.obj1White;q.obj1LightGrey=Wa.obj1LightGrey;q.obj1DarkGrey=Wa.obj1DarkGrey;q.obj1Black=Wa.obj1Black;break;case 201:q.bgWhite=Xa.bgWhite;q.bgLightGrey=Xa.bgLightGrey;q.bgDarkGrey=Xa.bgDarkGrey;q.bgBlack=Xa.bgBlack;q.obj0White=Xa.obj0White;q.obj0LightGrey=Xa.obj0LightGrey;q.obj0DarkGrey=Xa.obj0DarkGrey;q.obj0Black=Xa.obj0Black;q.obj1White=Xa.obj1White;q.obj1LightGrey=
Xa.obj1LightGrey;q.obj1DarkGrey=Xa.obj1DarkGrey;q.obj1Black=Xa.obj1Black;break;case 112:q.bgWhite=Ya.bgWhite;q.bgLightGrey=Ya.bgLightGrey;q.bgDarkGrey=Ya.bgDarkGrey;q.bgBlack=Ya.bgBlack;q.obj0White=Ya.obj0White;q.obj0LightGrey=Ya.obj0LightGrey;q.obj0DarkGrey=Ya.obj0DarkGrey;q.obj0Black=Ya.obj0Black;q.obj1White=Ya.obj1White;q.obj1LightGrey=Ya.obj1LightGrey;q.obj1DarkGrey=Ya.obj1DarkGrey;q.obj1Black=Ya.obj1Black;break;case 70:q.bgWhite=Za.bgWhite;q.bgLightGrey=Za.bgLightGrey;q.bgDarkGrey=Za.bgDarkGrey;
q.bgBlack=Za.bgBlack;q.obj0White=Za.obj0White;q.obj0LightGrey=Za.obj0LightGrey;q.obj0DarkGrey=Za.obj0DarkGrey;q.obj0Black=Za.obj0Black;q.obj1White=Za.obj1White;q.obj1LightGrey=Za.obj1LightGrey;q.obj1DarkGrey=Za.obj1DarkGrey;q.obj1Black=Za.obj1Black;break;case 211:q.bgWhite=$a.bgWhite,q.bgLightGrey=$a.bgLightGrey,q.bgDarkGrey=$a.bgDarkGrey,q.bgBlack=$a.bgBlack,q.obj0White=$a.obj0White,q.obj0LightGrey=$a.obj0LightGrey,q.obj0DarkGrey=$a.obj0DarkGrey,q.obj0Black=$a.obj0Black,q.obj1White=$a.obj1White,
q.obj1LightGrey=$a.obj1LightGrey,q.obj1DarkGrey=$a.obj1DarkGrey,q.obj1Black=$a.obj1Black}}g.GBCEnabled?(J(65384,192),J(65385,255),J(65386,193),J(65387,13)):(J(65384,255),J(65385,255),J(65386,255),J(65387,255));g.BootROMEnabled&&g.GBCEnabled&&(J(65385,32),J(65387,138));E.currentCycles=0;E.NR50LeftMixerVolume=0;E.NR50RightMixerVolume=0;E.NR51IsChannel1EnabledOnLeftOutput=!0;E.NR51IsChannel2EnabledOnLeftOutput=!0;E.NR51IsChannel3EnabledOnLeftOutput=!0;E.NR51IsChannel4EnabledOnLeftOutput=!0;E.NR51IsChannel1EnabledOnRightOutput=
!0;E.NR51IsChannel2EnabledOnRightOutput=!0;E.NR51IsChannel3EnabledOnRightOutput=!0;E.NR51IsChannel4EnabledOnRightOutput=!0;E.NR52IsSoundEnabled=!0;E.frameSequenceCycleCounter=0;E.downSampleCycleCounter=0;E.frameSequencer=0;E.audioQueueIndex=0;L.initialize();M.initialize();N.initialize();O.initialize();J(E.memoryLocationNR50,119);E.updateNR50(119);J(E.memoryLocationNR51,243);E.updateNR51(243);J(E.memoryLocationNR52,241);E.updateNR52(241);g.BootROMEnabled&&(J(E.memoryLocationNR50,0),E.updateNR50(0),
J(E.memoryLocationNR51,0),E.updateNR51(0),J(E.memoryLocationNR52,112),E.updateNR52(112));P.channel1Sample=15;P.channel2Sample=15;P.channel3Sample=15;P.channel4Sample=15;P.channel1DacEnabled=!1;P.channel2DacEnabled=!1;P.channel3DacEnabled=!1;P.channel4DacEnabled=!1;P.leftChannelSampleUnsignedByte=127;P.rightChannelSampleUnsignedByte=127;P.mixerVolumeChanged=!0;P.mixerEnabledChanged=!0;P.needToRemixSamples=!1;R.updateInterruptEnabled(0);J(R.memoryLocationInterruptEnabled,R.interruptsEnabledValue);R.updateInterruptRequested(225);
J(R.memoryLocationInterruptRequest,R.interruptsRequestedValue);S.currentCycles=0;S.dividerRegister=0;S.timerCounter=0;S.timerModulo=0;S.timerEnabled=!1;S.timerInputClock=0;S.timerCounterOverflowDelay=!1;S.timerCounterWasReset=!1;g.GBCEnabled?(J(65284,30),S.dividerRegister=7840):(J(65284,171),S.dividerRegister=43980);J(65287,248);S.timerInputClock=248;g.BootROMEnabled&&!g.GBCEnabled&&(J(65284,0),S.dividerRegister=4);Eb.currentCycles=0;Eb.numberOfBitsTransferred=0;g.GBCEnabled?(J(65282,124),Eb.updateTransferControl(124)):
(J(65282,126),Eb.updateTransferControl(126));g.GBCEnabled?(J(65392,248),J(65359,254),J(65357,126),J(65280,207),J(65295,225),J(65388,254),J(65397,143)):(J(65392,255),J(65359,255),J(65357,255),J(65280,207),J(65295,225))},hasCoreStarted:function(){return Hc},saveState:function(){g.saveState();D.saveState();R.saveState();T.saveState();U.saveState();S.saveState();E.saveState();L.saveState();M.saveState();N.saveState();O.saveState();Hc=!1},loadState:function(){g.loadState();D.loadState();R.loadState();
T.loadState();U.loadState();S.loadState();E.loadState();L.loadState();M.loadState();N.loadState();O.loadState();Hc=!1;Cc.cyclesPerCycleSet=2E9;Cc.cycleSets=0;Cc.cycles=0;Dc.stepsPerStepSet=2E9;Dc.stepSets=0;Dc.steps=0},isGBC:function(){return g.GBCEnabled},getStepsPerStepSet:function(){return Dc.stepsPerStepSet},getStepSets:function(){return Dc.stepSets},getSteps:function(){return Dc.steps},executeMultipleFrames:function(a){for(var b=0,d=0;d<a&&0<=b;)b=Ec(),d+=1;return 0>b?b:0},executeFrame:Ec,executeFrameAndCheckAudio:function(a){void 0===
a&&(a=0);return Fc(!0,a)},executeUntilCondition:Fc,executeStep:Gc,getCyclesPerCycleSet:function(){return Cc.cyclesPerCycleSet},getCycleSets:function(){return Cc.cycleSets},getCycles:function(){return Cc.cycles},setJoypadState:function(a,b,d,f,h,u,y,x){0<a?Fb(0):Hb(0,!1);0<b?Fb(1):Hb(1,!1);0<d?Fb(2):Hb(2,!1);0<f?Fb(3):Hb(3,!1);0<h?Fb(4):Hb(4,!1);0<u?Fb(5):Hb(5,!1);0<y?Fb(6):Hb(6,!1);0<x?Fb(7):Hb(7,!1)},getNumberOfSamplesInAudioBuffer:tb,clearAudioBuffer:ob,setManualColorizationPalette:ab,WASMBOY_MEMORY_LOCATION:0,
WASMBOY_MEMORY_SIZE:ta,WASMBOY_WASM_PAGES:ua,ASSEMBLYSCRIPT_MEMORY_LOCATION:0,ASSEMBLYSCRIPT_MEMORY_SIZE:1024,WASMBOY_STATE_LOCATION:1024,WASMBOY_STATE_SIZE:1024,GAMEBOY_INTERNAL_MEMORY_LOCATION:2048,GAMEBOY_INTERNAL_MEMORY_SIZE:ba,VIDEO_RAM_LOCATION:2048,VIDEO_RAM_SIZE:16384,WORK_RAM_LOCATION:18432,WORK_RAM_SIZE:32768,OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION:51200,OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE:16384,GRAPHICS_OUTPUT_LOCATION:ca,GRAPHICS_OUTPUT_SIZE:ja,GBC_PALETTE_LOCATION:ca,GBC_PALETTE_SIZE:128,
BG_PRIORITY_MAP_LOCATION:da,BG_PRIORITY_MAP_SIZE:23552,FRAME_LOCATION:ea,FRAME_SIZE:93184,BACKGROUND_MAP_LOCATION:fa,BACKGROUND_MAP_SIZE:196608,TILE_DATA_LOCATION:ha,TILE_DATA_SIZE:147456,OAM_TILES_LOCATION:ia,OAM_TILES_SIZE:15360,AUDIO_BUFFER_LOCATION:oa,AUDIO_BUFFER_SIZE:131072,CHANNEL_1_BUFFER_LOCATION:ka,CHANNEL_1_BUFFER_SIZE:131072,CHANNEL_2_BUFFER_LOCATION:la,CHANNEL_2_BUFFER_SIZE:131072,CHANNEL_3_BUFFER_LOCATION:ma,CHANNEL_3_BUFFER_SIZE:131072,CHANNEL_4_BUFFER_LOCATION:na,CHANNEL_4_BUFFER_SIZE:131072,
CARTRIDGE_RAM_LOCATION:pa,CARTRIDGE_RAM_SIZE:131072,BOOT_ROM_LOCATION:qa,BOOT_ROM_SIZE:2560,CARTRIDGE_ROM_LOCATION:ra,CARTRIDGE_ROM_SIZE:8258560,DEBUG_GAMEBOY_MEMORY_LOCATION:sa,DEBUG_GAMEBOY_MEMORY_SIZE:65535,getWasmBoyOffsetFromGameBoyOffset:Mb,setProgramCounterBreakpoint:function(a){Nb.programCounter=a},resetProgramCounterBreakpoint:function(){Nb.programCounter=-1},setReadGbMemoryBreakpoint:function(a){Nb.readGbMemory=a},resetReadGbMemoryBreakpoint:function(){Nb.readGbMemory=-1},setWriteGbMemoryBreakpoint:function(a){Nb.writeGbMemory=
a},resetWriteGbMemoryBreakpoint:function(){Nb.writeGbMemory=-1},getRegisterA:function(){return g.registerA},getRegisterB:function(){return g.registerB},getRegisterC:function(){return g.registerC},getRegisterD:function(){return g.registerD},getRegisterE:function(){return g.registerE},getRegisterH:function(){return g.registerH},getRegisterL:function(){return g.registerL},getRegisterF:function(){return g.registerF},getProgramCounter:function(){return g.programCounter},getStackPointer:function(){return g.stackPointer},
getOpcodeAtProgramCounter:function(){return C(g.programCounter)},getLY:function(){return D.scanlineRegister},drawBackgroundMapToWasmMemory:function(a){var b=D.memoryLocationTileDataSelectZeroStart;V.bgWindowTileDataSelect&&(b=D.memoryLocationTileDataSelectOneStart);var d=D.memoryLocationTileMapSelectZeroStart;V.bgTileMapDisplaySelect&&(d=D.memoryLocationTileMapSelectOneStart);for(var f=0;256>f;f++)for(var h=0;256>h;h++){var u=f,y=h,x=d+32*(u>>3)+(y>>3),t=kb(x,0);t=jb(b,t);var w=u%8;u=y%8;u=7-u;y=
0;g.GBCEnabled&&0<a&&(y=kb(x,1));B(6,y)&&(w=7-w);var H=0;B(3,y)&&(H=1);x=kb(t+2*w,H);t=kb(t+2*w+1,H);w=0;B(u,t)&&(w+=1,w<<=1);B(u,x)&&(w+=1);t=3*(256*f+h);g.GBCEnabled&&0<a?(x=db(y&7,w,!1),y=fb(0,x),u=fb(1,x),x=fb(2,x),t=fa+t,c[t]=y,c[t+1]=u,c[t+2]=x):(y=cb(w,D.memoryLocationBackgroundPalette),t=fa+t,c[t+0]=(y&16711680)>>16,c[t+1]=(y&65280)>>8,c[t+2]=y&255)}},drawTileDataToWasmMemory:function(){for(var a=0;23>a;a++)for(var b=0;31>b;b++){var d=0;15<b&&(d=1);var f=a;15<a&&(f-=15);f<<=4;f=15<b?f+(b-
15):f+b;var h=D.memoryLocationTileDataSelectOneStart;15<a&&(h=D.memoryLocationTileDataSelectZeroStart);for(var u=D.memoryLocationBackgroundPalette,y=-1,x=-1,t=0;8>t;t++)for(var w=0;5>w;w++){var H=4*(8*w+t),A=C(D.memoryLocationSpriteAttributesTable+H+2);f===A&&(H=C(D.memoryLocationSpriteAttributesTable+H+3),A=0,g.GBCEnabled&&B(3,H)&&(A=1),A===d&&(x=H,t=8,w=5,u=D.memoryLocationSpritePaletteOne,B(4,x)&&(u=D.memoryLocationSpritePaletteTwo)))}if(g.GBCEnabled&&0>x){t=D.memoryLocationTileMapSelectZeroStart;
V.bgTileMapDisplaySelect&&(t=D.memoryLocationTileMapSelectOneStart);w=-1;for(H=0;32>H;H++)for(A=0;32>A;A++){var I=t+32*A+H,X=kb(I,0);f===X&&(w=I,A=H=32)}0<=w&&(y=kb(w,1))}for(t=0;8>t;t++)ib(f,h,d,0,7,t,8*b,8*a+t,248,ha,!1,u,y,x)}},drawOamToWasmMemory:function(){for(var a=0;8>a;a++)for(var b=0;5>b;b++){var d=4*(8*b+a);C(D.memoryLocationSpriteAttributesTable+d);C(D.memoryLocationSpriteAttributesTable+d+1);var f=C(D.memoryLocationSpriteAttributesTable+d+2),h=1;V.tallSpriteSize&&(1===f%2&&--f,h+=1);d=
C(D.memoryLocationSpriteAttributesTable+d+3);var u=0;g.GBCEnabled&&B(3,d)&&(u=1);var y=D.memoryLocationSpritePaletteOne;B(4,d)&&(y=D.memoryLocationSpritePaletteTwo);for(var x=0;x<h;x++)for(var t=0;8>t;t++)ib(f+x,D.memoryLocationTileDataSelectOneStart,u,0,7,t,8*a,16*b+t+8*x,64,ia,!1,y,-1,d)}},getDIV:function(){return S.dividerRegister},getTIMA:function(){return S.timerCounter},getTMA:function(){return S.timerModulo},getTAC:function(){var a=S.timerInputClock;S.timerEnabled&&(a|=4);return a},updateDebugGBMemory:function(){for(var a=
0;65535>a;a++){var b=Jb(a);c[sa+a]=b}Nb.reachedBreakpoint=!1}});export default async()=>({instance:{exports:Ic},byteMemory:aa.wasmByteMemory,type:"TypeScript"});
//# sourceMappingURL=getWasmBoyTsCore.closure.esm.js.map
