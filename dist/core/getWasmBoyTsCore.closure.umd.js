'use strict';(function(Ra,r){"object"===typeof exports&&"undefined"!==typeof module?module.exports=r():"function"===typeof define&&define.amd?define(r):Ra.WasmBoyTsCore=r()})(this,function(){function Ra(a,c){a=1<<a&255;b.registerF=0<c?b.registerF|a:b.registerF&(255^a);return b.registerF}function r(a){Ra(7,a)}function p(a){Ra(6,a)}function D(a){Ra(5,a)}function H(a){Ra(4,a)}function Na(){return b.registerF>>7&1}function Q(){return b.registerF>>4&1}function N(a,c){0<=c?D(0!==((a&15)+(c&15)&16)):D((Math.abs(c)&
15)>(a&15))}function qb(a,c){0<=c?H(a>(a+c&255)):H(Math.abs(c)>a)}function Sa(a,c,b){b?(a=a^c^a+c,D(0!==(a&16)),H(0!==(a&256))):(b=a+c&65535,H(b<a),D(0!==((a^c^b)&4096)))}function Jb(a){switch(a){case 0:d.bgWhite=I.bgWhite;d.bgLightGrey=I.bgLightGrey;d.bgDarkGrey=I.bgDarkGrey;d.bgBlack=I.bgBlack;d.obj0White=I.obj0White;d.obj0LightGrey=I.obj0LightGrey;d.obj0DarkGrey=I.obj0DarkGrey;d.obj0Black=I.obj0Black;d.obj1White=I.obj1White;d.obj1LightGrey=I.obj1LightGrey;d.obj1DarkGrey=I.obj1DarkGrey;d.obj1Black=
I.obj1Black;break;case 1:d.bgWhite=ca.bgWhite;d.bgLightGrey=ca.bgLightGrey;d.bgDarkGrey=ca.bgDarkGrey;d.bgBlack=ca.bgBlack;d.obj0White=ca.obj0White;d.obj0LightGrey=ca.obj0LightGrey;d.obj0DarkGrey=ca.obj0DarkGrey;d.obj0Black=ca.obj0Black;d.obj1White=ca.obj1White;d.obj1LightGrey=ca.obj1LightGrey;d.obj1DarkGrey=ca.obj1DarkGrey;d.obj1Black=ca.obj1Black;break;case 2:d.bgWhite=da.bgWhite;d.bgLightGrey=da.bgLightGrey;d.bgDarkGrey=da.bgDarkGrey;d.bgBlack=da.bgBlack;d.obj0White=da.obj0White;d.obj0LightGrey=
da.obj0LightGrey;d.obj0DarkGrey=da.obj0DarkGrey;d.obj0Black=da.obj0Black;d.obj1White=da.obj1White;d.obj1LightGrey=da.obj1LightGrey;d.obj1DarkGrey=da.obj1DarkGrey;d.obj1Black=da.obj1Black;break;case 3:d.bgWhite=ea.bgWhite;d.bgLightGrey=ea.bgLightGrey;d.bgDarkGrey=ea.bgDarkGrey;d.bgBlack=ea.bgBlack;d.obj0White=ea.obj0White;d.obj0LightGrey=ea.obj0LightGrey;d.obj0DarkGrey=ea.obj0DarkGrey;d.obj0Black=ea.obj0Black;d.obj1White=ea.obj1White;d.obj1LightGrey=ea.obj1LightGrey;d.obj1DarkGrey=ea.obj1DarkGrey;
d.obj1Black=ea.obj1Black;break;case 4:d.bgWhite=fa.bgWhite;d.bgLightGrey=fa.bgLightGrey;d.bgDarkGrey=fa.bgDarkGrey;d.bgBlack=fa.bgBlack;d.obj0White=fa.obj0White;d.obj0LightGrey=fa.obj0LightGrey;d.obj0DarkGrey=fa.obj0DarkGrey;d.obj0Black=fa.obj0Black;d.obj1White=fa.obj1White;d.obj1LightGrey=fa.obj1LightGrey;d.obj1DarkGrey=fa.obj1DarkGrey;d.obj1Black=fa.obj1Black;break;case 5:d.bgWhite=ha.bgWhite;d.bgLightGrey=ha.bgLightGrey;d.bgDarkGrey=ha.bgDarkGrey;d.bgBlack=ha.bgBlack;d.obj0White=ha.obj0White;d.obj0LightGrey=
ha.obj0LightGrey;d.obj0DarkGrey=ha.obj0DarkGrey;d.obj0Black=ha.obj0Black;d.obj1White=ha.obj1White;d.obj1LightGrey=ha.obj1LightGrey;d.obj1DarkGrey=ha.obj1DarkGrey;d.obj1Black=ha.obj1Black;break;case 6:d.bgWhite=ia.bgWhite;d.bgLightGrey=ia.bgLightGrey;d.bgDarkGrey=ia.bgDarkGrey;d.bgBlack=ia.bgBlack;d.obj0White=ia.obj0White;d.obj0LightGrey=ia.obj0LightGrey;d.obj0DarkGrey=ia.obj0DarkGrey;d.obj0Black=ia.obj0Black;d.obj1White=ia.obj1White;d.obj1LightGrey=ia.obj1LightGrey;d.obj1DarkGrey=ia.obj1DarkGrey;
d.obj1Black=ia.obj1Black;break;case 7:d.bgWhite=ja.bgWhite;d.bgLightGrey=ja.bgLightGrey;d.bgDarkGrey=ja.bgDarkGrey;d.bgBlack=ja.bgBlack;d.obj0White=ja.obj0White;d.obj0LightGrey=ja.obj0LightGrey;d.obj0DarkGrey=ja.obj0DarkGrey;d.obj0Black=ja.obj0Black;d.obj1White=ja.obj1White;d.obj1LightGrey=ja.obj1LightGrey;d.obj1DarkGrey=ja.obj1DarkGrey;d.obj1Black=ja.obj1Black;break;case 8:d.bgWhite=ka.bgWhite;d.bgLightGrey=ka.bgLightGrey;d.bgDarkGrey=ka.bgDarkGrey;d.bgBlack=ka.bgBlack;d.obj0White=ka.obj0White;d.obj0LightGrey=
ka.obj0LightGrey;d.obj0DarkGrey=ka.obj0DarkGrey;d.obj0Black=ka.obj0Black;d.obj1White=ka.obj1White;d.obj1LightGrey=ka.obj1LightGrey;d.obj1DarkGrey=ka.obj1DarkGrey;d.obj1Black=ka.obj1Black;break;case 9:d.bgWhite=la.bgWhite;d.bgLightGrey=la.bgLightGrey;d.bgDarkGrey=la.bgDarkGrey;d.bgBlack=la.bgBlack;d.obj0White=la.obj0White;d.obj0LightGrey=la.obj0LightGrey;d.obj0DarkGrey=la.obj0DarkGrey;d.obj0Black=la.obj0Black;d.obj1White=la.obj1White;d.obj1LightGrey=la.obj1LightGrey;d.obj1DarkGrey=la.obj1DarkGrey;
d.obj1Black=la.obj1Black;break;case 10:d.bgWhite=ma.bgWhite;d.bgLightGrey=ma.bgLightGrey;d.bgDarkGrey=ma.bgDarkGrey;d.bgBlack=ma.bgBlack;d.obj0White=ma.obj0White;d.obj0LightGrey=ma.obj0LightGrey;d.obj0DarkGrey=ma.obj0DarkGrey;d.obj0Black=ma.obj0Black;d.obj1White=ma.obj1White;d.obj1LightGrey=ma.obj1LightGrey;d.obj1DarkGrey=ma.obj1DarkGrey;d.obj1Black=ma.obj1Black;break;case 11:d.bgWhite=na.bgWhite;d.bgLightGrey=na.bgLightGrey;d.bgDarkGrey=na.bgDarkGrey;d.bgBlack=na.bgBlack;d.obj0White=na.obj0White;
d.obj0LightGrey=na.obj0LightGrey;d.obj0DarkGrey=na.obj0DarkGrey;d.obj0Black=na.obj0Black;d.obj1White=na.obj1White;d.obj1LightGrey=na.obj1LightGrey;d.obj1DarkGrey=na.obj1DarkGrey;d.obj1Black=na.obj1Black;break;case 12:d.bgWhite=oa.bgWhite,d.bgLightGrey=oa.bgLightGrey,d.bgDarkGrey=oa.bgDarkGrey,d.bgBlack=oa.bgBlack,d.obj0White=oa.obj0White,d.obj0LightGrey=oa.obj0LightGrey,d.obj0DarkGrey=oa.obj0DarkGrey,d.obj0Black=oa.obj0Black,d.obj1White=oa.obj1White,d.obj1LightGrey=oa.obj1LightGrey,d.obj1DarkGrey=
oa.obj1DarkGrey,d.obj1Black=oa.obj1Black}}function g(a,c){return(a&255)<<8|c&255}function y(a){return(a&65280)>>8}function E(a,c){return c&~(1<<a)}function n(a,c){return 0!=(c&1<<a)}function fb(a,c){a=v(c)>>2*a&3;if(c===Ta.memoryLocationSpritePaletteOne)switch(c=d.obj0White,a){case 1:c=d.obj0LightGrey;break;case 2:c=d.obj0DarkGrey;break;case 3:c=d.obj0Black}else if(c===Ta.memoryLocationSpritePaletteTwo)switch(c=d.obj1White,a){case 1:c=d.obj1LightGrey;break;case 2:c=d.obj1DarkGrey;break;case 3:c=d.obj1Black}else switch(c=
d.bgWhite,a){case 1:c=d.bgLightGrey;break;case 2:c=d.bgDarkGrey;break;case 3:c=d.bgBlack}return c}function gb(a,c,b){c=8*a+2*c;a=Kb(c+1,b);b=Kb(c,b);return g(a,b)}function pa(a,c){a*=5;return 8*((c&31<<a)>>a)}function Kb(a,c){a&=63;c&&(a+=64);return e[Ua+a]}function hb(a,c,b,d){void 0===b&&(b=0);void 0===d&&(d=!1);b&=3;d&&(b|=4);e[Va+(160*c+a)]=b}function rb(a,c,d,z,A,f,l,k,m,ib,g,h,p,t){var aa=0;c=ab(c,a);a=T(c+2*f,d);d=T(c+2*f+1,d);for(f=z;f<=A;++f)if(c=l+(f-z),c<m){var C=f;if(0>p||!n(5,p))C=7-
C;var Qa=0;n(C,d)&&(Qa+=1,Qa<<=1);n(C,a)&&(Qa+=1);if(b.GBCEnabled&&(0<=p||0<=t)){C=0<=t;var L=p&7;C&&(L=t&7);var ba=gb(L,Qa,C);C=pa(0,ba);L=pa(1,ba);ba=pa(2,ba)}else if(0>=h&&(h=q.memoryLocationBackgroundPalette),g){L=Qa;ba=g;void 0===ba&&(ba=!1);C=L;ba||(C=v(h)>>(L<<1)&3);L=242;switch(C){case 1:L=160;break;case 2:L=88;break;case 3:L=8}L=C=ba=L}else ba=fb(Qa,h),C=(ba&16711680)>>16,L=(ba&65280)>>8,ba&=255;ib+=3*(k*m+c);e[ib+0]=C;e[ib+1]=L;e[ib+2]=ba;C=!1;0<=p&&(C=n(7,p));hb(c,k,Qa,C);aa++}return aa}
function ab(a,c){a===q.memoryLocationTileDataSelectZeroStart&&(c=n(7,c)?c-128:c+128);return a+16*c}function Lb(a,c){switch(a){case 1:return n(c,129);case 2:return n(c,135);case 3:return n(c,126);default:return n(c,1)}}function Mb(){var a=Nb();2047>=a&&0<w.NRx0SweepShift&&(w.sweepShadowFrequency=a,w.setFrequency(a),a=Nb());2047<a&&(w.isEnabled=!1)}function Nb(){var a=w.sweepShadowFrequency;var c=a>>w.NRx0SweepShift;return c=w.NRx0Negate?a-c:a+c}function jb(a){switch(a){case w.channelNumber:a=w.isDacEnabled;
var c=t.channel1DacEnabled!==a;t.channel1DacEnabled=a;return c;case J.channelNumber:return a=J.isDacEnabled,c=t.channel2DacEnabled!==a,t.channel2DacEnabled=a,c;case G.channelNumber:return a=G.isDacEnabled,c=t.channel3DacEnabled!==a,t.channel3DacEnabled=a,c;case K.channelNumber:return a=K.isDacEnabled,c=t.channel4DacEnabled!==a,t.channel4DacEnabled=a,c}return!1}function kb(){for(var a=k.batchProcessCycles();k.currentCycles>=a;)Ob(a),k.currentCycles-=a}function Ob(a){var c=k.maxFrameSequenceCycles();
var b=k.frameSequenceCycleCounter+a;if(b>=c){k.frameSequenceCycleCounter=b-c;c=k.frameSequencer;switch(c){case 0:w.updateLength();J.updateLength();G.updateLength();K.updateLength();break;case 2:w.updateLength();J.updateLength();G.updateLength();K.updateLength();w.updateSweep();break;case 4:w.updateLength();J.updateLength();G.updateLength();K.updateLength();break;case 6:w.updateLength();J.updateLength();G.updateLength();K.updateLength();w.updateSweep();break;case 7:w.updateEnvelope(),J.updateEnvelope(),
K.updateEnvelope()}k.frameSequencer=c+1&7;c=!0}else k.frameSequenceCycleCounter=b,c=!1;if(O.audioAccumulateSamples&&!c){c=w.willChannelUpdate(a)||jb(w.channelNumber);b=J.willChannelUpdate(a)||jb(J.channelNumber);var d=G.willChannelUpdate(a)||jb(G.channelNumber),e=K.willChannelUpdate(a)||jb(K.channelNumber);c&&(t.channel1Sample=w.getSampleFromCycleCounter());b&&(t.channel2Sample=J.getSampleFromCycleCounter());d&&(t.channel3Sample=G.getSampleFromCycleCounter());e&&(t.channel4Sample=K.getSampleFromCycleCounter());
if(c||b||d||e)t.needToRemixSamples=!0;c=k.downSampleCycleCounter;c+=a*k.downSampleCycleMultiplier;a=k.maxDownSampleCycles();c>=a&&(c-=a,k.downSampleCycleCounter=c,t.needToRemixSamples||t.mixerVolumeChanged||t.mixerEnabledChanged?Wa(t.channel1Sample,t.channel2Sample,t.channel3Sample,t.channel4Sample):k.downSampleCycleCounter=c,Xa(t.leftChannelSampleUnsignedByte+1,t.rightChannelSampleUnsignedByte+1,lb),a=k.audioQueueIndex+1,a>=(k.wasmBoyMemoryMaxBufferSize>>1|0)-1&&--a,k.audioQueueIndex=a)}else if(c=
w.getSample(a)|0,b=J.getSample(a)|0,d=G.getSample(a)|0,e=K.getSample(a)|0,t.channel1Sample=c,t.channel2Sample=b,t.channel3Sample=d,t.channel4Sample=e,a=k.downSampleCycleCounter+a*k.downSampleCycleMultiplier,a>=k.maxDownSampleCycles()){a-=k.maxDownSampleCycles();k.downSampleCycleCounter=a;a=Wa(c,b,d,e);var f=y(a);Xa(f+1,(a&255)+1,lb);O.enableAudioDebugging&&(a=Wa(c,15,15,15),f=y(a),Xa(f+1,(a&255)+1,sb),a=Wa(15,b,15,15),f=y(a),Xa(f+1,(a&255)+1,tb),a=Wa(15,15,d,15),f=y(a),Xa(f+1,(a&255)+1,ub),a=Wa(15,
15,15,e),f=y(a),Xa(f+1,(a&255)+1,vb));a=k.audioQueueIndex+1;a>=(k.wasmBoyMemoryMaxBufferSize>>1|0)-1&&--a;k.audioQueueIndex=a}}function Pb(){return k.audioQueueIndex}function Qb(){k.audioQueueIndex=0}function Wa(a,c,b,d){void 0===a&&(a=15);void 0===c&&(c=15);void 0===b&&(b=15);void 0===d&&(d=15);t.mixerVolumeChanged=!1;var aa=0+(k.NR51IsChannel1EnabledOnLeftOutput?a:15);aa+=k.NR51IsChannel2EnabledOnLeftOutput?c:15;aa+=k.NR51IsChannel3EnabledOnLeftOutput?b:15;aa+=k.NR51IsChannel4EnabledOnLeftOutput?
d:15;a=0+(k.NR51IsChannel1EnabledOnRightOutput?a:15);a+=k.NR51IsChannel2EnabledOnRightOutput?c:15;a+=k.NR51IsChannel3EnabledOnRightOutput?b:15;a+=k.NR51IsChannel4EnabledOnRightOutput?d:15;t.mixerEnabledChanged=!1;t.needToRemixSamples=!1;c=Rb(aa,k.NR50LeftMixerVolume+1);b=Rb(a,k.NR50RightMixerVolume+1);t.leftChannelSampleUnsignedByte=c;t.rightChannelSampleUnsignedByte=b;return g(c,b)}function Rb(a,c){if(60===a)return 127;a=1E5*(a-60)*c>>3;a=(a/1E5|0)+60;a=1E5*a/(12E6/254|0)|0;return a|=0}function Xa(a,
c,b){b+=k.audioQueueIndex<<1;e[b+0]=a+1;e[b+1]=c+1}function bb(a){mb(!1);var c=v(m.memoryLocationInterruptRequest);c=E(a,c);m.interruptsRequestedValue=c;f(m.memoryLocationInterruptRequest,c);b.stackPointer-=2;b.isHalted();c=b.stackPointer;var d=b.programCounter,z=y(d);f(c+0,d&255);f(c+1,z);switch(a){case m.bitPositionVBlankInterrupt:m.isVBlankInterruptRequested=!1;b.programCounter=64;break;case m.bitPositionLcdInterrupt:m.isLcdInterruptRequested=!1;b.programCounter=72;break;case m.bitPositionTimerInterrupt:m.isTimerInterruptRequested=
!1;b.programCounter=80;break;case m.bitPositionSerialInterrupt:m.isSerialInterruptRequested=!1;b.programCounter=88;break;case m.bitPositionJoypadInterrupt:m.isJoypadInterruptRequested=!1,b.programCounter=96}}function Ya(a){var c=v(m.memoryLocationInterruptRequest);c|=1<<a;m.interruptsRequestedValue=c;f(m.memoryLocationInterruptRequest,c)}function mb(a){a?m.masterInterruptSwitchDelay=!0:m.masterInterruptSwitch=!1}function wb(a){for(var c=0;c<a;){var b=h.dividerRegister,d=b;c+=4;d+=4;d&=65535;h.dividerRegister=
d;if(h.timerEnabled){var e=h.timerCounterWasReset;h.timerCounterOverflowDelay?(h.timerCounter=h.timerModulo,m.isTimerInterruptRequested=!0,Ya(m.bitPositionTimerInterrupt),h.timerCounterOverflowDelay=!1,h.timerCounterWasReset=!0):e&&(h.timerCounterWasReset=!1);Sb(b,d)&&xb()}}}function xb(){var a=h.timerCounter;255<++a&&(h.timerCounterOverflowDelay=!0,a=0);h.timerCounter=a}function Sb(a,c){var b=yb(h.timerInputClock);return n(b,a)&&!n(b,c)}function yb(a){switch(a){case 0:return 9;case 1:return 3;case 2:return 5;
case 3:return 7}return 0}function Oa(a){var c=b.isStopped=!1;cc(a)||(c=!0);Da(a,!0);c&&(c=!1,3>=a&&(c=!0),a=!1,x.isDpadType&&c&&(a=!0),x.isButtonType&&!c&&(a=!0),a&&(m.isJoypadInterruptRequested=!0,Ya(m.bitPositionJoypadInterrupt)))}function cc(a){switch(a){case 0:return x.up;case 1:return x.right;case 2:return x.down;case 3:return x.left;case 4:return x.a;case 5:return x.b;case 6:return x.select;case 7:return x.start;default:return!1}}function Da(a,c){switch(a){case 0:x.up=c;break;case 1:x.right=
c;break;case 2:x.down=c;break;case 3:x.left=c;break;case 4:x.a=c;break;case 5:x.b=c;break;case 6:x.select=c;break;case 7:x.start=c}}function Tb(a,c,d){for(var aa=0;aa<d;++aa){for(var e=zb(a+aa),f=c+aa;40959<f;)f-=8192;Ub(f,e)}l.DMACycles+=(32<<b.GBCDoubleSpeed)*(d>>4)}function Ab(a,c){if(a===b.memoryLocationSpeedSwitch)return f(b.memoryLocationSpeedSwitch,c&1),!1;var d=l.videoRamLocation,z=l.spriteInformationTableLocation;if(a<d){if(!l.isRomOnly){d=l.isMBC1;var A=l.isMBC2;if(8191>=a){if(!A||n(4,c))c&=
15,0===c?l.isRamBankingEnabled=!1:10===c&&(l.isRamBankingEnabled=!0)}else 16383>=a?(z=l.isMBC5,!z||12287>=a?(a=l.currentRomBank,A&&(a=c&15),d?(c&=31,a&=224):l.isMBC3?(c&=127,a&=128):z&&(a&=0),l.currentRomBank=a|c):l.currentRomBank=g(0<c,l.currentRomBank&255)):!A&&24575>=a?d&&l.isMBC1RomModeEnabled?(a=l.currentRomBank&31,l.currentRomBank=a|c&224):(c=l.isMBC5?c&15:c&3,l.currentRamBank=c):!A&&32767>=a&&d&&(l.isMBC1RomModeEnabled=n(0,c))}return!1}if(a>=d&&a<l.cartridgeRamLocation)return!0;if(a>=l.echoRamLocation&&
a<z)return f(a-8192,c),!0;if(a>=z&&a<=l.spriteInformationTableLocationEnd)return 2<=u.currentLcdMode;if(a>=l.unusableMemoryLocation&&a<=l.unusableMemoryEndLocation)return!1;if(a===V.memoryLocationSerialTransferControl)return V.updateTransferControl(c);if(65296<=a&&65318>=a){kb();if(a===k.memoryLocationNR52||k.NR52IsSoundEnabled){switch(a){case w.memoryLocationNRx0:w.updateNRx0(c);break;case G.memoryLocationNRx0:G.updateNRx0(c);break;case w.memoryLocationNRx1:w.updateNRx1(c);break;case J.memoryLocationNRx1:J.updateNRx1(c);
break;case G.memoryLocationNRx1:G.updateNRx1(c);break;case K.memoryLocationNRx1:K.updateNRx1(c);break;case w.memoryLocationNRx2:w.updateNRx2(c);break;case J.memoryLocationNRx2:J.updateNRx2(c);break;case G.memoryLocationNRx2:G.volumeCodeChanged=!0;G.updateNRx2(c);break;case K.memoryLocationNRx2:K.updateNRx2(c);break;case w.memoryLocationNRx3:w.updateNRx3(c);break;case J.memoryLocationNRx3:J.updateNRx3(c);break;case G.memoryLocationNRx3:G.updateNRx3(c);break;case K.memoryLocationNRx3:K.updateNRx3(c);
break;case w.memoryLocationNRx4:n(7,c)&&(w.updateNRx4(c),w.trigger());break;case J.memoryLocationNRx4:n(7,c)&&(J.updateNRx4(c),J.trigger());break;case G.memoryLocationNRx4:n(7,c)&&(G.updateNRx4(c),G.trigger());break;case K.memoryLocationNRx4:n(7,c)&&(K.updateNRx4(c),K.trigger());break;case k.memoryLocationNR50:k.updateNR50(c);t.mixerVolumeChanged=!0;break;case k.memoryLocationNR51:k.updateNR51(c);t.mixerEnabledChanged=!0;break;case k.memoryLocationNR52:if(k.updateNR52(c),!n(7,c))for(c=65296;65318>
c;++c)f(c,0)}c=!0}else c=!1;return c}65328<=a&&65343>=a&&kb();if(a>=u.memoryLocationLcdControl&&a<=q.memoryLocationWindowX){if(a===u.memoryLocationLcdControl)return u.updateLcdControl(c),!0;if(a===u.memoryLocationLcdStatus)return u.updateLcdStatus(c),!1;if(a===q.memoryLocationScanlineRegister)return q.scanlineRegister=0,f(a,0),!1;if(a===u.memoryLocationCoincidenceCompare)return u.coincidenceCompare=c,!0;if(a===q.memoryLocationDmaTransfer){c<<=8;for(a=0;159>=a;++a)d=v(c+a),f(l.spriteInformationTableLocation+
a,d);l.DMACycles=644;return!0}switch(a){case q.memoryLocationScrollX:q.scrollX=c;break;case q.memoryLocationScrollY:q.scrollY=c;break;case q.memoryLocationWindowX:q.windowX=c;break;case q.memoryLocationWindowY:q.windowY=c}return!0}if(a===l.memoryLocationHdmaTrigger)return b.GBCEnabled&&(l.isHblankHdmaActive&&!n(7,c)?(l.isHblankHdmaActive=!1,c=v(l.memoryLocationHdmaTrigger),f(l.memoryLocationHdmaTrigger,c|128)):(a=v(l.memoryLocationHdmaSourceHigh),d=v(l.memoryLocationHdmaSourceLow),a=g(a,d)&65520,
d=v(l.memoryLocationHdmaDestinationHigh),z=v(l.memoryLocationHdmaDestinationLow),d=g(d,z),d=(d&8176)+l.videoRamLocation,z=E(7,c),z=z+1<<4,n(7,c)?(l.isHblankHdmaActive=!0,l.hblankHdmaTransferLengthRemaining=z,l.hblankHdmaSource=a,l.hblankHdmaDestination=d,f(l.memoryLocationHdmaTrigger,E(7,c))):(Tb(a,d,z),f(l.memoryLocationHdmaTrigger,255)))),!1;if((a===l.memoryLocationGBCWRAMBank||a===l.memoryLocationGBCVRAMBank)&&l.isHblankHdmaActive&&(d=l.hblankHdmaSource,16384<=d&&32767>=d||53248<=d&&57343>=d))return!1;
if(a>=Ta.memoryLocationBackgroundPaletteIndex&&a<=Ta.memoryLocationSpritePaletteData){d=Ta.memoryLocationSpritePaletteData;if(a===Ta.memoryLocationBackgroundPaletteData||a===d)z=v(a-1),z=E(6,z),A=z&63,a===d&&(A+=64),e[Ua+A]=c,c=z,--a,n(7,c)&&f(a,c+1|128);return!0}if(a>=h.memoryLocationDividerRegister&&a<=h.memoryLocationTimerControl){wb(h.currentCycles);h.currentCycles=0;switch(a){case h.memoryLocationDividerRegister:return h.updateDividerRegister(),!1;case h.memoryLocationTimerCounter:h.updateTimerCounter(c);
break;case h.memoryLocationTimerModulo:h.updateTimerModulo(c);break;case h.memoryLocationTimerControl:h.updateTimerControl(c)}return!0}a===x.memoryLocationJoypadRegister&&x.updateJoypad(c);if(a===m.memoryLocationInterruptRequest)return m.updateInterruptRequested(c),!0;a===m.memoryLocationInterruptEnabled&&m.updateInterruptEnabled(c);return!0}function Bb(a){switch(a>>12){case 0:case 1:case 2:case 3:return a+nb;case 4:case 5:case 6:case 7:var c=l.currentRomBank;l.isMBC5||0!==c||(c=1);return 16384*c+
(a-l.switchableCartridgeRomLocation)+nb;case 8:case 9:return c=0,b.GBCEnabled&&(c=v(l.memoryLocationGBCVRAMBank)&1),a-l.videoRamLocation+2048+8192*c;case 10:case 11:return 8192*l.currentRamBank+(a-l.cartridgeRamLocation)+Cb;case 12:return a-l.internalRamBankZeroLocation+18432;case 13:return c=0,b.GBCEnabled&&(c=v(l.memoryLocationGBCWRAMBank)&7),a-l.internalRamBankZeroLocation+18432+4096*((1>c?1:c)-1);default:return a-l.echoRamLocation+51200}}function f(a,c){a=Bb(a);e[a]=c}function Ub(a,c){a===W.writeGbMemory&&
(W.reachedBreakpoint=!0);Ab(a,c)&&f(a,c)}function Vb(a){q.scanlineCycleCounter=0;q.scanlineRegister=0;f(q.memoryLocationScanlineRegister,0);var c=v(u.memoryLocationLcdStatus);c=E(1,c);c=E(0,c);u.currentLcdMode=0;f(u.memoryLocationLcdStatus,c);if(a)for(a=0;93184>a;++a)e[Za+a]=255}function Wb(a,c){0!==a&&1!==a||q.scanlineRegister!==u.coincidenceCompare?c=E(2,c):(c|=4,n(6,c)&&(m.isLcdInterruptRequested=!0,Ya(m.bitPositionLcdInterrupt)));return c}function Xb(a,c,d,z,f,l){for(var aa=z>>3;160>f;++f){var A=
f+l;256<=A&&(A-=256);var C=d+(aa<<5)+(A>>3),k=T(C,0),m=!1;if(O.tileCaching){var g=f;var h=a,p=A,t=C,L=k,r=0,u=$a.nextXIndexToPerformCacheCheck;if(0<h&&8<g&&L===$a.tileId&&g===u){L=n(5,v(t-1));t=n(5,v(t));for(var w=0;8>w;++w){L!==t&&(w=7-w);var x=g+w;if(160>=x){var y=g-(8-w),B=Za+3*(160*h+x);Y(x,h,0,e[B]);Y(x,h,1,e[B]);Y(x,h,2,e[B]);y=e[Va+(160*h+y)];hb(x,h,E(2,y),n(2,y));r++}}}else $a.tileId=L;g>=u&&(u=g+8,h=p&7|0,g<h&&(u+=h));$a.nextXIndexToPerformCacheCheck=u;g=r;0<g&&(f+=g-1,m=!0)}O.tileRendering&&
!m?(m=f,g=a,h=A,A=c,r=z&7|0,u=0,0==m&&(u=h-(h>>3<<3)),h=7,160<m+8&&(h=160-m),p=-1,L=0,b.GBCEnabled&&(p=T(C,1),L=n(3,p)|0,n(6,p)&&(r=7-r)),g=rb(k,A,L,u,h,r,m,g,160,Za,!1,0,p,-1),0<g&&(f+=g-1)):m||(b.GBCEnabled?(m=f,g=a,u=z,r=ab(c,k),k=T(C,1),u=u&7|0,n(6,k)&&(u=7-u),h=n(3,k)|0,C=T(r+2*u,h),r=T(r+2*u+1,h),u=A&7|0,n(5,k)||(u=7-u),A=0,n(u,r)&&(A=A+1<<1),n(u,C)&&(A+=1),u=gb(k&7,A,!1),C=pa(0,u),r=pa(1,u),u=pa(2,u),Y(m,g,0,C),Y(m,g,1,r),Y(m,g,2,u),hb(m,g,A,n(7,k))):(C=f,m=a,r=z,g=ab(c,k),r=r&7|0,k=T(g+2*
r,0),g=T(g+2*r+1,0),r=A&7|0,r=7-r,A=0,n(r,g)&&(A=A+1<<1),n(r,k)&&(A+=1),k=fb(A,q.memoryLocationBackgroundPalette),Y(C,m,0,(k&16711680)>>16),Y(C,m,1,(k&65280)>>8),Y(C,m,2,k&255),hb(C,m,A)))}}function Yb(a){if(u.enabled)for(q.scanlineCycleCounter+=a,a=O.graphicsDisableScanlineRendering;q.scanlineCycleCounter>=q.MAX_CYCLES_PER_SCANLINE();){q.scanlineCycleCounter-=q.MAX_CYCLES_PER_SCANLINE();var c=q.scanlineRegister;if(144===c){if(a)for(var b=0;144>=b;++b)Db(b);else Db(c);for(b=0;144>b;++b)for(var d=
0;160>d;++d)e[Va+(160*b+d)]=0;$a.tileId=-1;$a.nextXIndexToPerformCacheCheck=-1}else 144>c&&(a||Db(c));c=153<c?0:c+1;q.scanlineRegister=c}if(u.enabled){c=q.scanlineRegister;b=u.currentLcdMode;a=0;if(144<=c)a=1;else{d=q.scanlineCycleCounter;var A=q.MIN_CYCLES_SPRITES_LCD_MODE();d>=A?a=2:d>=A&&(a=3)}if(b!==a){c=v(u.memoryLocationLcdStatus);u.currentLcdMode=a;b=!1;switch(a){case 0:c=E(0,c);c=E(1,c);b=n(3,c);break;case 1:c=E(1,c);c|=1;b=n(4,c);break;case 2:c=E(0,c);c|=2;b=n(5,c);break;case 3:c|=3}b&&(m.isLcdInterruptRequested=
!0,Ya(m.bitPositionLcdInterrupt));0===a&&l.isHblankHdmaActive&&(d=16,b=l.hblankHdmaTransferLengthRemaining,b<d&&(d=b),Tb(l.hblankHdmaSource,l.hblankHdmaDestination,d),l.hblankHdmaSource+=d,l.hblankHdmaDestination+=d,b-=d,l.hblankHdmaTransferLengthRemaining=b,d=l.memoryLocationHdmaTrigger,0>=b?(l.isHblankHdmaActive=!1,f(d,255)):f(d,E(7,(b>>4)-1)));1===a&&(m.isVBlankInterruptRequested=!0,Ya(m.bitPositionVBlankInterrupt));c=Wb(a,c);f(u.memoryLocationLcdStatus,c)}else 153===c&&(c=v(u.memoryLocationLcdStatus),
c=Wb(a,c),f(u.memoryLocationLcdStatus,c))}}function Db(a){var c=q.memoryLocationTileDataSelectZeroStart;u.bgWindowTileDataSelect&&(c=q.memoryLocationTileDataSelectOneStart);if(b.GBCEnabled||u.bgDisplayEnabled){var d=q.memoryLocationTileMapSelectZeroStart;u.bgTileMapDisplaySelect&&(d=q.memoryLocationTileMapSelectOneStart);Xb(a,c,d,a+q.scrollY&255,0,q.scrollX)}if(u.windowDisplayEnabled){d=q.memoryLocationTileMapSelectZeroStart;u.windowTileMapDisplaySelect&&(d=q.memoryLocationTileMapSelectOneStart);
var z=q.windowX,f=q.windowY;a<f||(z-=7,Xb(a,c,d,a-f,z,-z|0))}if(u.spriteDisplayEnable)for(c=u.tallSpriteSize,d=39;0<=d;--d){f=4*d;var l=q.memoryLocationSpriteAttributesTable+f,k=v(l+0);z=v(l+1);var m=v(l+2);k-=16;z-=8;var g=8;c&&(g=16,m-=m&1);if(a>=k&&a<k+g){f=v(q.memoryLocationSpriteAttributesTable+f+3);l=n(7,f);var h=n(6,f),r=n(5,f);k=a-k;h&&(k=g-k,--k);k<<=1;m=ab(q.memoryLocationTileDataSelectOneStart,m);m+=k;g=b.GBCEnabled&&n(3,f);k=T(m+0,g);m=T(m+1,g);for(g=7;0<=g;--g){h=g;r&&(h-=7,h=-h);var p=
0;n(h,m)&&(p=p+1<<1);n(h,k)&&(p+=1);if(0!==p&&(h=z+(7-g),0<=h&&160>=h)){var t=b.GBCEnabled&&!u.bgDisplayEnabled,w=!1,x=!1;if(!t){var y=e[Va+(160*a+h)],B=y&3;l&&0<B?w=!0:b.GBCEnabled&&n(2,y)&&0<B&&(x=!0)}if(t||!w&&!x)b.GBCEnabled?(w=gb(f&7,p,!0),p=pa(0,w),t=pa(1,w),w=pa(2,w),Y(h,a,0,p),Y(h,a,1,t),Y(h,a,2,w)):(t=q.memoryLocationSpritePaletteOne,n(4,f)&&(t=q.memoryLocationSpritePaletteTwo),p=fb(p,t),Y(h,a,0,(p&16711680)>>16),Y(h,a,1,(p&65280)>>8),Y(h,a,2,p&255))}}}}}function Y(a,b,d,f){e[Za+3*(160*b+
a)+d]=f}function T(a,b){return e[a-l.videoRamLocation+2048+8192*(b&1)]}function Eb(a){var c=l.videoRamLocation;return a<c||a>=c&&a<l.cartridgeRamLocation?-1:a>=l.echoRamLocation&&a<l.spriteInformationTableLocation?v(a-8192):a>=l.spriteInformationTableLocation&&a<=l.spriteInformationTableLocationEnd?2>u.currentLcdMode?255:-1:a===b.memoryLocationSpeedSwitch?(a=255,c=v(b.memoryLocationSpeedSwitch),n(0,c)||(a=E(0,a)),b.GBCDoubleSpeed||(a=E(7,a)),a):a===q.memoryLocationScanlineRegister?(f(a,q.scanlineRegister),
q.scanlineRegister):65296<=a&&65318>=a?(kb(),a=a===k.memoryLocationNR52?v(k.memoryLocationNR52)&128|112:-1,a):65328<=a&&65343>=a?(kb(),-1):a===h.memoryLocationDividerRegister?(c=y(h.dividerRegister),f(a,c),c):a===h.memoryLocationTimerCounter?(f(a,h.timerCounter),h.timerCounter):a===m.memoryLocationInterruptRequest?224|m.interruptsRequestedValue:a===x.memoryLocationJoypadRegister?(a=x.joypadRegisterFlipped,x.isDpadType?(a=x.up?E(2,a):a|4,a=x.right?E(0,a):a|1,a=x.down?E(3,a):a|8,a=x.left?E(1,a):a|2):
x.isButtonType&&(a=x.a?E(0,a):a|1,a=x.b?E(1,a):a|2,a=x.select?E(2,a):a|4,a=x.start?E(3,a):a|8),a|240):-1}function v(a){return e[Bb(a)]}function zb(a){a===W.readGbMemory&&(W.reachedBreakpoint=!0);var b=Eb(a);return-1===b?v(a):b}function M(a){return 0<e[a]}function Ea(a){var c=b.registerA;N(c,a);qb(c,a);c=c+a&255;b.registerA=c;r(0===c);p(0)}function Fa(a){var c=b.registerA,d=c+a+Q()&255;D(0!=((c^a^d)&16));a=c+a+Q()&65535;H(0<(a&256));b.registerA=d;r(0===d);p(0)}function Ga(a){var c=-1*a;var d=b.registerA;
N(d,c);qb(d,c);d=d-a&255;b.registerA=d;r(0===d);p(1)}function Ha(a){var c=b.registerA,d=c-a-Q()&255;D(0!=((c^a^d)&16));a=c-a-Q()&65535;H(0<(a&256));b.registerA=d;r(0===d);p(1)}function Ia(a){a&=b.registerA;b.registerA=a;r(0===a);p(0);D(1);H(0)}function Ja(a){a=(b.registerA^a)&255;b.registerA=a;r(0===a);p(0);D(0);H(0)}function Ka(a){a|=b.registerA;b.registerA=a;r(0===a);p(0);D(0);H(0)}function La(a){var c=b.registerA;a*=-1;N(c,a);qb(c,a);r(0===c+a);p(1)}function Pa(a,b){r(0===(b&1<<a));p(0);D(1);return b}
function X(a,b,d){return 0<b?d|1<<a:d&~(1<<a)}function cb(a){var c=b.programCounter;c=(c+(a<<24>>24)&65535)+1&65535;b.programCounter=c}function Zb(a){var c=b.programCounter;c=c+1&65535;b.isHaltBug&&(c=c-1&65535);b.programCounter=c;switch((a&240)>>4){case 0:return dc(a);case 1:return ec(a);case 2:return fc(a);case 3:return gc(a);case 4:return hc(a);case 5:return ic(a);case 6:return jc(a);case 7:return kc(a);case 8:return lc(a);case 9:return mc(a);case 10:return nc(a);case 11:return oc(a);case 12:return pc(a);
case 13:return qc(a);case 14:return rc(a);default:return sc(a)}}function F(a){Ma(4);return zb(a)}function P(a,b){Ma(4);Ub(a,b)}function Ca(a){Ma(8);var b=Eb(a);b=-1===b?v(a):b;a+=1;var d=Eb(a);a=-1===d?v(a):d;return g(a,b)}function R(a,b){Ma(8);var c=y(b);b&=255;Ab(a,b)&&f(a,b);a+=1;Ab(a,c)&&f(a,c)}function B(){Ma(4);return v(b.programCounter)}function U(){Ma(4);var a=v(b.programCounter+1&65535);return g(a,B())}function dc(a){switch(a){case 0:return 4;case 1:return a=U(),b.registerB=y(a),b.registerC=
a&255,b.programCounter=b.programCounter+2&65535,4;case 2:return P(g(b.registerB,b.registerC),b.registerA),4;case 3:return a=g(b.registerB,b.registerC),a++,b.registerB=y(a),b.registerC=a&255,8;case 4:return a=b.registerB,N(a,1),a=a+1&255,b.registerB=a,r(0===a),p(0),4;case 5:return a=b.registerB,N(a,-1),a=a-1&255,b.registerB=a,r(0===a),p(1),4;case 6:return b.registerB=B(),b.programCounter=b.programCounter+1&65535,4;case 7:return a=b.registerA,H(128===(a&128)),b.registerA=(a<<1|a>>7)&255,r(0),p(0),D(0),
4;case 8:return R(U(),b.stackPointer),b.programCounter=b.programCounter+2&65535,4;case 9:a=g(b.registerH,b.registerL);var c=g(b.registerB,b.registerC);Sa(a,c,!1);a=a+c&65535;b.registerH=y(a);b.registerL=a&255;p(0);return 8;case 10:return b.registerA=F(g(b.registerB,b.registerC)),4;case 11:return a=g(b.registerB,b.registerC),a=a-1&65535,b.registerB=y(a),b.registerC=a&255,8;case 12:return a=b.registerC,N(a,1),a=a+1&255,b.registerC=a,r(0===a),p(0),4;case 13:return a=b.registerC,N(a,-1),a=a-1&255,b.registerC=
a,r(0===a),p(1),4;case 14:return b.registerC=B(),b.programCounter=b.programCounter+1&65535,4;case 15:return a=b.registerA,H(0<(a&1)),b.registerA=(a>>1|a<<7)&255,r(0),p(0),D(0),4}return-1}function ec(a){switch(a){case 16:if(b.GBCEnabled&&(a=F(b.memoryLocationSpeedSwitch),n(0,a)))return a=E(0,a),n(7,a)?(b.GBCDoubleSpeed=!1,a=E(7,a)):(b.GBCDoubleSpeed=!0,a|=128),P(b.memoryLocationSpeedSwitch,a),68;b.isStopped=!0;b.programCounter=b.programCounter+1&65535;return 4;case 17:return a=U(),b.registerD=y(a),
b.registerE=a&255,b.programCounter=b.programCounter+2&65535,4;case 18:return P(g(b.registerD,b.registerE),b.registerA),4;case 19:return a=g(b.registerD,b.registerE),a=a+1&65535,b.registerD=y(a),b.registerE=a&255,8;case 20:return a=b.registerD,N(a,1),b.registerD=a+1&255,r(0===b.registerD),p(0),4;case 21:return a=b.registerD,N(a,-1),b.registerD=a-1&255,r(0===b.registerD),p(1),4;case 22:return b.registerD=B(),b.programCounter=b.programCounter+1&65535,4;case 23:return a=128===(b.registerA&128),b.registerA=
(b.registerA<<1|Q())&255,H(a),r(0),p(0),D(0),4;case 24:return cb(B()),8;case 25:a=g(b.registerH,b.registerL);var c=g(b.registerD,b.registerE);Sa(a,c,!1);a=a+c&65535;b.registerH=y(a);b.registerL=a&255;p(0);return 8;case 26:return a=g(b.registerD,b.registerE),b.registerA=F(a),4;case 27:return a=g(b.registerD,b.registerE),a=a-1&65535,b.registerD=y(a),b.registerE=a&255,8;case 28:return a=b.registerE,N(a,1),a=a+1&255,b.registerE=a,r(0===a),p(0),4;case 29:return a=b.registerE,N(a,-1),a=a-1&255,b.registerE=
a,r(0===a),p(1),4;case 30:return b.registerE=B(),b.programCounter=b.programCounter+1&65535,4;case 31:return a=1===(b.registerA&1),b.registerA=(b.registerA>>1|Q()<<7)&255,H(a),r(0),p(0),D(0),4}return-1}function fc(a){switch(a){case 32:return 0===Na()?cb(B()):b.programCounter=b.programCounter+1&65535,8;case 33:return a=U(),b.registerH=y(a),b.registerL=a&255,b.programCounter=b.programCounter+2&65535,4;case 34:return a=g(b.registerH,b.registerL),P(a,b.registerA),a=a+1&65535,b.registerH=y(a),b.registerL=
a&255,4;case 35:return a=g(b.registerH,b.registerL),a=a+1&65535,b.registerH=y(a),b.registerL=a&255,8;case 36:return a=b.registerH,N(a,1),a=a+1&255,b.registerH=a,r(0===a),p(0),4;case 37:return a=b.registerH,N(a,-1),a=a-1&255,b.registerH=a,r(0===a),p(1),4;case 38:return b.registerH=B(),b.programCounter=b.programCounter+1&65535,4;case 39:a=0;0<(b.registerF>>5&1)&&(a|=6);0<Q()&&(a|=96);var c=b.registerA;0<(b.registerF>>6&1)?c=c-a&255:(9<(c&15)&&(a|=6),153<c&&(a|=96),c=c+a&255);r(0===c);H(0!==(a&96));
D(0);b.registerA=c;return 4;case 40:return 0<Na()?cb(B()):b.programCounter=b.programCounter+1&65535,8;case 41:return a=g(b.registerH,b.registerL),Sa(a,a,!1),a=2*a&65535,b.registerH=y(a),b.registerL=a&255,p(0),8;case 42:return a=g(b.registerH,b.registerL),b.registerA=F(a),a=a+1&65535,b.registerH=y(a),b.registerL=a&255,4;case 43:return a=g(b.registerH,b.registerL),a=a-1&65535,b.registerH=y(a),b.registerL=a&255,8;case 44:return a=b.registerL,N(a,1),a=a+1&255,b.registerL=a,r(0===a),p(0),4;case 45:return a=
b.registerL,N(a,-1),a=a-1&255,b.registerL=a,r(0===a),p(1),4;case 46:return b.registerL=B(),b.programCounter=b.programCounter+1&65535,4;case 47:return b.registerA=~b.registerA,p(1),D(1),4}return-1}function gc(a){switch(a){case 48:return 0===Q()?cb(B()):b.programCounter=b.programCounter+1&65535,8;case 49:return b.stackPointer=U(),b.programCounter=b.programCounter+2&65535,4;case 50:return a=g(b.registerH,b.registerL),P(a,b.registerA),a=a-1&65535,b.registerH=y(a),b.registerL=a&255,4;case 51:return b.stackPointer=
b.stackPointer+1&65535,8;case 52:a=g(b.registerH,b.registerL);var c=F(a);N(c,1);c=c+1&255;r(0===c);p(0);P(a,c);return 4;case 53:return a=g(b.registerH,b.registerL),c=F(a),N(c,-1),c=c-1&255,r(0===c),p(1),P(a,c),4;case 54:return P(g(b.registerH,b.registerL),B()),b.programCounter=b.programCounter+1&65535,4;case 55:return p(0),D(0),H(1),4;case 56:return 1===Q()?cb(B()):b.programCounter=b.programCounter+1&65535,8;case 57:return a=g(b.registerH,b.registerL),Sa(a,b.stackPointer,!1),a=a+b.stackPointer&65535,
b.registerH=y(a),b.registerL=a&255,p(0),8;case 58:return a=g(b.registerH,b.registerL),b.registerA=F(a),a=a-1&65535,b.registerH=y(a),b.registerL=a&255,4;case 59:return b.stackPointer=b.stackPointer-1&65535,8;case 60:return a=b.registerA,N(a,1),a=a+1&255,b.registerA=a,r(0===a),p(0),4;case 61:return a=b.registerA,N(a,-1),a=a-1&255,b.registerA=a,r(0===a),p(1),4;case 62:return b.registerA=B(),b.programCounter=b.programCounter+1&65535,4;case 63:return p(0),D(0),H(0>=Q()),4}return-1}function hc(a){switch(a){case 64:return 4;
case 65:return b.registerB=b.registerC,4;case 66:return b.registerB=b.registerD,4;case 67:return b.registerB=b.registerE,4;case 68:return b.registerB=b.registerH,4;case 69:return b.registerB=b.registerL,4;case 70:return b.registerB=F(g(b.registerH,b.registerL)),4;case 71:return b.registerB=b.registerA,4;case 72:return b.registerC=b.registerB,4;case 73:return 4;case 74:return b.registerC=b.registerD,4;case 75:return b.registerC=b.registerE,4;case 76:return b.registerC=b.registerH,4;case 77:return b.registerC=
b.registerL,4;case 78:return b.registerC=F(g(b.registerH,b.registerL)),4;case 79:return b.registerC=b.registerA,4}return-1}function ic(a){switch(a){case 80:return b.registerD=b.registerB,4;case 81:return b.registerD=b.registerC,4;case 82:return 4;case 83:return b.registerD=b.registerE,4;case 84:return b.registerD=b.registerH,4;case 85:return b.registerD=b.registerL,4;case 86:return b.registerD=F(g(b.registerH,b.registerL)),4;case 87:return b.registerD=b.registerA,4;case 88:return b.registerE=b.registerB,
4;case 89:return b.registerE=b.registerC,4;case 90:return b.registerE=b.registerD,4;case 91:return 4;case 92:return b.registerE=b.registerH,4;case 93:return b.registerE=b.registerL,4;case 94:return b.registerE=F(g(b.registerH,b.registerL)),4;case 95:return b.registerE=b.registerA,4}return-1}function jc(a){switch(a){case 96:return b.registerH=b.registerB,4;case 97:return b.registerH=b.registerC,4;case 98:return b.registerH=b.registerD,4;case 99:return b.registerH=b.registerE,4;case 100:return b.registerH=
b.registerH,4;case 101:return b.registerH=b.registerL,4;case 102:return b.registerH=F(g(b.registerH,b.registerL)),4;case 103:return b.registerH=b.registerA,4;case 104:return b.registerL=b.registerB,4;case 105:return b.registerL=b.registerC,4;case 106:return b.registerL=b.registerD,4;case 107:return b.registerL=b.registerE,4;case 108:return b.registerL=b.registerH,4;case 109:return b.registerL=b.registerL,4;case 110:return b.registerL=F(g(b.registerH,b.registerL)),4;case 111:return b.registerL=b.registerA,
4}return-1}function kc(a){switch(a){case 112:return P(g(b.registerH,b.registerL),b.registerB),4;case 113:return P(g(b.registerH,b.registerL),b.registerC),4;case 114:return P(g(b.registerH,b.registerL),b.registerD),4;case 115:return P(g(b.registerH,b.registerL),b.registerE),4;case 116:return P(g(b.registerH,b.registerL),b.registerH),4;case 117:return P(g(b.registerH,b.registerL),b.registerL),4;case 118:return l.isHblankHdmaActive||b.enableHalt(),4;case 119:return P(g(b.registerH,b.registerL),b.registerA),
4;case 120:return b.registerA=b.registerB,4;case 121:return b.registerA=b.registerC,4;case 122:return b.registerA=b.registerD,4;case 123:return b.registerA=b.registerE,4;case 124:return b.registerA=b.registerH,4;case 125:return b.registerA=b.registerL,4;case 126:return b.registerA=F(g(b.registerH,b.registerL)),4;case 127:return 4}return-1}function lc(a){switch(a){case 128:return Ea(b.registerB),4;case 129:return Ea(b.registerC),4;case 130:return Ea(b.registerD),4;case 131:return Ea(b.registerE),4;
case 132:return Ea(b.registerH),4;case 133:return Ea(b.registerL),4;case 134:return a=F(g(b.registerH,b.registerL)),Ea(a),4;case 135:return Ea(b.registerA),4;case 136:return Fa(b.registerB),4;case 137:return Fa(b.registerC),4;case 138:return Fa(b.registerD),4;case 139:return Fa(b.registerE),4;case 140:return Fa(b.registerH),4;case 141:return Fa(b.registerL),4;case 142:return a=F(g(b.registerH,b.registerL)),Fa(a),4;case 143:return Fa(b.registerA),4}return-1}function mc(a){switch(a){case 144:return Ga(b.registerB),
4;case 145:return Ga(b.registerC),4;case 146:return Ga(b.registerD),4;case 147:return Ga(b.registerE),4;case 148:return Ga(b.registerH),4;case 149:return Ga(b.registerL),4;case 150:return a=F(g(b.registerH,b.registerL)),Ga(a),4;case 151:return Ga(b.registerA),4;case 152:return Ha(b.registerB),4;case 153:return Ha(b.registerC),4;case 154:return Ha(b.registerD),4;case 155:return Ha(b.registerE),4;case 156:return Ha(b.registerH),4;case 157:return Ha(b.registerL),4;case 158:return a=F(g(b.registerH,b.registerL)),
Ha(a),4;case 159:return Ha(b.registerA),4}return-1}function nc(a){switch(a){case 160:return Ia(b.registerB),4;case 161:return Ia(b.registerC),4;case 162:return Ia(b.registerD),4;case 163:return Ia(b.registerE),4;case 164:return Ia(b.registerH),4;case 165:return Ia(b.registerL),4;case 166:return a=F(g(b.registerH,b.registerL)),Ia(a),4;case 167:return Ia(b.registerA),4;case 168:return Ja(b.registerB),4;case 169:return Ja(b.registerC),4;case 170:return Ja(b.registerD),4;case 171:return Ja(b.registerE),
4;case 172:return Ja(b.registerH),4;case 173:return Ja(b.registerL),4;case 174:return a=F(g(b.registerH,b.registerL)),Ja(a),4;case 175:return Ja(b.registerA),4}return-1}function oc(a){switch(a){case 176:return Ka(b.registerB),4;case 177:return Ka(b.registerC),4;case 178:return Ka(b.registerD),4;case 179:return Ka(b.registerE),4;case 180:return Ka(b.registerH),4;case 181:return Ka(b.registerL),4;case 182:return a=F(g(b.registerH,b.registerL)),Ka(a),4;case 183:return Ka(b.registerA),4;case 184:return La(b.registerB),
4;case 185:return La(b.registerC),4;case 186:return La(b.registerD),4;case 187:return La(b.registerE),4;case 188:return La(b.registerH),4;case 189:return La(b.registerL),4;case 190:return a=F(g(b.registerH,b.registerL)),La(a),4;case 191:return La(b.registerA),4}return-1}function pc(a){switch(a){case 192:return 0===Na()?(a=b.stackPointer,b.programCounter=Ca(a),b.stackPointer=a+2&65535,12):8;case 193:return a=Ca(b.stackPointer),b.stackPointer=b.stackPointer+2&65535,b.registerB=y(a),b.registerC=a&255,
4;case 194:if(0===Na())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 195:return b.programCounter=U(),8;case 196:if(0===Na())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2&65535),b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 197:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,g(b.registerB,b.registerC)),8;case 198:return Ea(B()),b.programCounter=b.programCounter+1&65535,4;case 199:return a=b.stackPointer-
2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=0,8;case 200:return 1===Na()?(a=b.stackPointer,b.programCounter=Ca(a),b.stackPointer=a+2&65535,12):8;case 201:return a=b.stackPointer,b.programCounter=Ca(a),b.stackPointer=a+2&65535,8;case 202:if(1===Na())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 203:var c=B();a=-1;var d=!1,f=0,e=0,n=c&7;switch(n){case 0:f=b.registerB;break;case 1:f=b.registerC;break;case 2:f=b.registerD;break;case 3:f=b.registerE;
break;case 4:f=b.registerH;break;case 5:f=b.registerL;break;case 6:f=F(g(b.registerH,b.registerL));break;case 7:f=b.registerA}var k=(c&240)>>4;switch(k){case 0:7>=c?(c=f,H(128===(c&128)),c=(c<<1|c>>7)&255,r(0===c),p(0),D(0),e=c,d=!0):15>=c&&(c=f,H(0<(c&1)),c=(c>>1|c<<7)&255,r(0===c),p(0),D(0),e=c,d=!0);break;case 1:23>=c?(c=f,d=128===(c&128),c=(c<<1|Q())&255,H(d),r(0===c),p(0),D(0),e=c,d=!0):31>=c&&(c=f,d=1===(c&1),c=(c>>1|Q()<<7)&255,H(d),r(0===c),p(0),D(0),e=c,d=!0);break;case 2:39>=c?(c=f,d=128===
(c&128),c=c<<1&255,H(d),r(0===c),p(0),D(0),e=c,d=!0):47>=c&&(c=f,d=128===(c&128),f=1===(c&1),c=c>>1&255,d&&(c|=128),r(0===c),p(0),D(0),H(f),e=c,d=!0);break;case 3:55>=c?(c=f,c=((c&15)<<4|(c&240)>>4)&255,r(0===c),p(0),D(0),H(0),e=c,d=!0):63>=c&&(c=f,d=1===(c&1),c=c>>1&255,r(0===c),p(0),D(0),H(d),e=c,d=!0);break;case 4:71>=c?(e=Pa(0,f),d=!0):79>=c&&(e=Pa(1,f),d=!0);break;case 5:87>=c?(e=Pa(2,f),d=!0):95>=c&&(e=Pa(3,f),d=!0);break;case 6:103>=c?(e=Pa(4,f),d=!0):111>=c&&(e=Pa(5,f),d=!0);break;case 7:119>=
c?(e=Pa(6,f),d=!0):127>=c&&(e=Pa(7,f),d=!0);break;case 8:135>=c?(e=X(0,0,f),d=!0):143>=c&&(e=X(1,0,f),d=!0);break;case 9:151>=c?(e=X(2,0,f),d=!0):159>=c&&(e=X(3,0,f),d=!0);break;case 10:167>=c?(e=X(4,0,f),d=!0):175>=c&&(e=X(5,0,f),d=!0);break;case 11:183>=c?(e=X(6,0,f),d=!0):191>=c&&(e=X(7,0,f),d=!0);break;case 12:199>=c?(e=X(0,1,f),d=!0):207>=c&&(e=X(1,1,f),d=!0);break;case 13:215>=c?(e=X(2,1,f),d=!0):223>=c&&(e=X(3,1,f),d=!0);break;case 14:231>=c?(e=X(4,1,f),d=!0):239>=c&&(e=X(5,1,f),d=!0);break;
case 15:247>=c?(e=X(6,1,f),d=!0):255>=c&&(e=X(7,1,f),d=!0)}switch(n){case 0:b.registerB=e;break;case 1:b.registerC=e;break;case 2:b.registerD=e;break;case 3:b.registerE=e;break;case 4:b.registerH=e;break;case 5:b.registerL=e;break;case 6:(4>k||7<k)&&P(g(b.registerH,b.registerL),e);break;case 7:b.registerA=e}d&&(a=4);b.programCounter=b.programCounter+1&65535;return a;case 204:if(1===Na())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2),b.programCounter=U(),8;b.programCounter=
b.programCounter+2&65535;return 12;case 205:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2&65535),b.programCounter=U(),8;case 206:return Fa(B()),b.programCounter=b.programCounter+1&65535,4;case 207:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=8}return-1}function qc(a){switch(a){case 208:return 0===Q()?(a=b.stackPointer,b.programCounter=Ca(a),b.stackPointer=a+2&65535,12):8;case 209:a=b.stackPointer;var c=Ca(a);b.stackPointer=a+2&65535;
b.registerD=y(c);b.registerE=c&255;return 4;case 210:if(0===Q())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 212:if(0===Q())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2),b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 213:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,g(b.registerD,b.registerE)),8;case 214:return Ga(B()),b.programCounter=b.programCounter+1&65535,4;case 215:return a=b.stackPointer-
2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=16,8;case 216:return 1===Q()?(a=b.stackPointer,b.programCounter=Ca(a),b.stackPointer=a+2&65535,12):8;case 217:return a=b.stackPointer,b.programCounter=Ca(a),mb(!0),b.stackPointer=a+2&65535,8;case 218:if(1===Q())return b.programCounter=U(),8;b.programCounter=b.programCounter+2&65535;return 12;case 220:if(1===Q())return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter+2&65535),b.programCounter=U(),8;b.programCounter=b.programCounter+
2&65535;return 12;case 222:return Ha(B()),b.programCounter=b.programCounter+1&65535,4;case 223:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=24,8}return-1}function rc(a){switch(a){case 224:return a=B(),P(65280+a,b.registerA),b.programCounter=b.programCounter+1&65535,4;case 225:a=b.stackPointer;var c=Ca(a);b.stackPointer=a+2&65535;b.registerH=y(c);b.registerL=c&255;return 4;case 226:return P(65280+b.registerC,b.registerA),4;case 229:return a=b.stackPointer-
2&65535,b.stackPointer=a,R(a,g(b.registerH,b.registerL)),8;case 230:return Ia(B()),b.programCounter=b.programCounter+1&65535,4;case 231:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=32,8;case 232:return a=B()<<24>>24,Sa(b.stackPointer,a,!0),b.stackPointer=b.stackPointer+a&65535,r(0),p(0),b.programCounter=b.programCounter+1&65535,12;case 233:return b.programCounter=g(b.registerH,b.registerL),4;case 234:return P(U(),b.registerA),b.programCounter=b.programCounter+
2&65535,4;case 238:return Ja(B()),b.programCounter=b.programCounter+1&65535,4;case 239:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=40,8}return-1}function sc(a){switch(a){case 240:return a=B(),b.registerA=F(65280+a)&255,b.programCounter=b.programCounter+1&65535,4;case 241:a=b.stackPointer;var c=Ca(a);b.stackPointer=a+2&65535;b.registerA=y(c);b.registerF=c&255;return 4;case 242:return b.registerA=F(65280+b.registerC)&255,4;case 243:return mb(!1),4;case 245:return a=
b.stackPointer-2&65535,b.stackPointer=a,R(a,g(b.registerA,b.registerF)),8;case 246:return Ka(B()),b.programCounter=b.programCounter+1&65535,4;case 247:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=48,8;case 248:return c=B()<<24>>24,a=b.stackPointer,r(0),p(0),Sa(a,c,!0),a=a+c&65535,b.registerH=y(a),b.registerL=a&255,b.programCounter=b.programCounter+1&65535,8;case 249:return b.stackPointer=g(b.registerH,b.registerL),8;case 250:return b.registerA=F(U()),b.programCounter=
b.programCounter+2&65535,4;case 251:return mb(!0),4;case 254:return La(B()),b.programCounter=b.programCounter+1&65535,4;case 255:return a=b.stackPointer-2&65535,b.stackPointer=a,R(a,b.programCounter),b.programCounter=56,8}return-1}function Ma(a){0<l.DMACycles&&(a+=l.DMACycles,l.DMACycles=0);b.currentCycles+=a;if(!b.isStopped){if(O.graphicsBatchProcessing){q.currentCycles+=a;for(var c=q.batchProcessCycles();q.currentCycles>=c;)Yb(c),q.currentCycles-=c}else Yb(a);O.audioBatchProcessing?k.currentCycles+=
a:Ob(a);c=a;if(V.transferStartFlag)for(var d=0;d<c;){var e=V.currentCycles,g=e;d+=4;g+=4;65535<g&&(g-=65536);V.currentCycles=g;var p=V.isClockSpeedFast?2:7;n(p,e)&&!n(p,g)&&(e=V.memoryLocationSerialTransferData,g=v(e),g=(g<<1)+1,g&=255,f(e,g),e=V.numberOfBitsTransferred,8===++e?(V.numberOfBitsTransferred=0,m.isSerialInterruptRequested=!0,Ya(m.bitPositionSerialInterrupt),e=V.memoryLocationSerialTransferControl,g=v(e),f(e,E(7,g)),V.transferStartFlag=!1):V.numberOfBitsTransferred=e)}}O.timersBatchProcessing?
(h.currentCycles+=a,wb(h.currentCycles),h.currentCycles=0):wb(a);c=Z.cycles;c+=a;c>=Z.cyclesPerCycleSet&&(Z.cycleSets+=1,c-=Z.cyclesPerCycleSet);Z.cycles=c}function $b(){return Fb(!0,-1)}function Fb(a,c){void 0===c&&(c=-1);a=1024;0<c?a=c:0>c&&(a=-1);for(var d=!1,e=!1,f=!1;!(d||e||f||W.reachedBreakpoint);)c=ac(),0>c?d=!0:b.currentCycles>=b.MAX_CYCLES_PER_FRAME()?e=!0:-1<a&&Pb()>=a&&(f=!0);if(e)return b.currentCycles-=b.MAX_CYCLES_PER_FRAME(),S.RESPONSE_CONDITION_FRAME;if(f)return S.RESPONSE_CONDITION_AUDIO;
if(W.reachedBreakpoint)return W.reachedBreakpoint=!1,S.RESPONSE_CONDITION_BREAKPOINT;b.programCounter=b.programCounter-1&65535;return-1}function ac(){db=!0;if(b.isHaltBug){var a=v(b.programCounter);a=Zb(a);Ma(a);b.exitHaltAndStop()}m.masterInterruptSwitchDelay&&(m.masterInterruptSwitch=!0,m.masterInterruptSwitchDelay=!1);if(0<(m.interruptsEnabledValue&m.interruptsRequestedValue&31)){a=!1;m.masterInterruptSwitch&&!b.isHaltNoJump&&(m.isVBlankInterruptEnabled&&m.isVBlankInterruptRequested?(bb(m.bitPositionVBlankInterrupt),
a=!0):m.isLcdInterruptEnabled&&m.isLcdInterruptRequested?(bb(m.bitPositionLcdInterrupt),a=!0):m.isTimerInterruptEnabled&&m.isTimerInterruptRequested?(bb(m.bitPositionTimerInterrupt),a=!0):m.isSerialInterruptEnabled&&m.isSerialInterruptRequested?(bb(m.bitPositionSerialInterrupt),a=!0):m.isJoypadInterruptEnabled&&m.isJoypadInterruptRequested&&(bb(m.bitPositionJoypadInterrupt),a=!0));var c=0;a&&(c=20,b.isHalted()&&(b.exitHaltAndStop(),c+=4));b.isHalted()&&b.exitHaltAndStop();a=c}else a=0;0<a&&Ma(a);
a=4;b.isHalted()||b.isStopped||(a=v(b.programCounter),a=Zb(a));b.registerF&=240;if(0>=a)return a;Ma(a);c=S.steps;c+=1;c>=S.stepsPerStepSet&&(S.stepSets+=1,c-=S.stepsPerStepSet);S.steps=c;b.programCounter===W.programCounter&&(W.reachedBreakpoint=!0);return a}const e=new Uint8ClampedArray(9109504),eb={size:()=>9109504,grow:()=>{},wasmByteMemory:e};var tc=65536,Ua=67584,Va=Ua+128,Za=Va+23552,ob=Za+93184,Gb=ob+196608,pb=Gb+147456,uc=Ua,vc=pb-Ua+15360,sb=pb+15360,tb=sb+131072,ub=tb+131072,vb=ub+131072,
lb=vb+131072,Cb=lb+131072,nb=Cb+131072,Hb=nb+8258560,bc=Hb+65535+1,Ib=Math.ceil(bc/1024/64)+1,O=function(){function a(){}a.enableBootRom=!1;a.useGbcWhenAvailable=!0;a.audioBatchProcessing=!1;a.graphicsBatchProcessing=!1;a.timersBatchProcessing=!1;a.graphicsDisableScanlineRendering=!1;a.audioAccumulateSamples=!1;a.tileRendering=!1;a.tileCaching=!1;a.enableAudioDebugging=!1;return a}(),I=function(){function a(){}a.bgWhite=15921906;a.bgLightGrey=10526880;a.bgDarkGrey=5789784;a.bgBlack=526344;a.obj0White=
15921906;a.obj0LightGrey=10526880;a.obj0DarkGrey=5789784;a.obj0Black=526344;a.obj1White=15921906;a.obj1LightGrey=10526880;a.obj1DarkGrey=5789784;a.obj1Black=526344;return a}(),fa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=5439232;a.bgDarkGrey=16728576;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=5439232;a.obj0DarkGrey=16728576;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=5439232;a.obj1DarkGrey=16728576;a.obj1Black=0;return a}(),ka=function(){function a(){}a.bgWhite=16777215;
a.bgLightGrey=16776960;a.bgDarkGrey=16711680;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16776960;a.obj0DarkGrey=16711680;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16776960;a.obj1DarkGrey=16711680;a.obj1Black=0;return a}(),ca=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16756067;a.bgDarkGrey=8663296;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16756067;a.obj0DarkGrey=8663296;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=
0;return a}(),ia=function(){function a(){}a.bgWhite=0;a.bgLightGrey=33924;a.bgDarkGrey=16768512;a.bgBlack=16777215;a.obj0White=0;a.obj0LightGrey=33924;a.obj0DarkGrey=16768512;a.obj0Black=16777215;a.obj1White=0;a.obj1LightGrey=33924;a.obj1DarkGrey=16768512;a.obj1Black=16777215;return a}(),oa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=10855845;a.bgDarkGrey=5395026;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=10855845;a.obj0DarkGrey=5395026;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=
10855845;a.obj1DarkGrey=5395026;a.obj1Black=0;return a}(),ja=function(){function a(){}a.bgWhite=16777125;a.bgLightGrey=16749716;a.bgDarkGrey=9737471;a.bgBlack=0;a.obj0White=16777125;a.obj0LightGrey=16749716;a.obj0DarkGrey=9737471;a.obj0Black=0;a.obj1White=16777125;a.obj1LightGrey=16749716;a.obj1DarkGrey=9737471;a.obj1Black=0;return a}(),ea=function(){function a(){}a.bgWhite=16770757;a.bgLightGrey=13540484;a.bgDarkGrey=8678185;a.bgBlack=5910792;a.obj0White=16777215;a.obj0LightGrey=16756067;a.obj0DarkGrey=
8663296;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),ha=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=8126257;a.bgDarkGrey=25541;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),na=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=9211102;a.bgDarkGrey=5395084;a.bgBlack=0;a.obj0White=
16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),da=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=8126257;a.obj0DarkGrey=33792;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),ma=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;
a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),la=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16776960;a.bgDarkGrey=8079872;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=6530559;a.obj0DarkGrey=255;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),qa=function(){function a(){}
a.bgWhite=10853631;a.bgLightGrey=16776960;a.bgDarkGrey=25344;a.bgBlack=0;a.obj0White=10853631;a.obj0LightGrey=16776960;a.obj0DarkGrey=25344;a.obj0Black=0;a.obj1White=10853631;a.obj1LightGrey=16776960;a.obj1DarkGrey=25344;a.obj1Black=0;return a}(),ra=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16745604;a.obj0DarkGrey=9714234;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=
0;return a}(),sa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=8126257;a.obj0DarkGrey=33792;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),ta=function(){function a(){}a.bgWhite=11908607;a.bgLightGrey=16777108;a.bgDarkGrey=11360834;a.bgBlack=0;a.obj0White=0;a.obj0LightGrey=16777215;a.obj0DarkGrey=16745604;a.obj0Black=9714234;a.obj1White=0;a.obj1LightGrey=
16777215;a.obj1DarkGrey=16745604;a.obj1Black=9714234;return a}(),ua=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=11382148;a.bgDarkGrey=4354939;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16741120;a.obj0DarkGrey=9716224;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=5946879;a.obj1DarkGrey=16711680;a.obj1Black=255;return a}(),va=function(){function a(){}a.bgWhite=16777116;a.bgLightGrey=9745919;a.bgDarkGrey=6526067;a.bgBlack=14906;a.obj0White=16762178;a.obj0LightGrey=16766464;a.obj0DarkGrey=
9714176;a.obj0Black=4849664;a.obj1White=16777215;a.obj1LightGrey=16745604;a.obj1DarkGrey=9714234;a.obj1Black=0;return a}(),wa=function(){function a(){}a.bgWhite=7077632;a.bgLightGrey=16777215;a.bgDarkGrey=16732746;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16777215;a.obj0DarkGrey=6530559;a.obj0Black=255;a.obj1White=16777215;a.obj1LightGrey=16756067;a.obj1DarkGrey=8663296;a.obj1Black=0;return a}(),xa=function(){function a(){}a.bgWhite=10853631;a.bgLightGrey=16776960;a.bgDarkGrey=25344;a.bgBlack=
0;a.obj0White=16737106;a.obj0LightGrey=14024704;a.obj0DarkGrey=6488064;a.obj0Black=0;a.obj1White=255;a.obj1LightGrey=16777215;a.obj1DarkGrey=16777083;a.obj1Black=34047;return a}(),ya=function(){function a(){}a.bgWhite=16777166;a.bgLightGrey=6549487;a.bgDarkGrey=10257457;a.bgBlack=5921370;a.obj0White=16777215;a.obj0LightGrey=16741120;a.obj0DarkGrey=9716224;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),za=function(){function a(){}a.bgWhite=16777215;
a.bgLightGrey=16745604;a.bgDarkGrey=9714234;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=65280;a.obj0DarkGrey=3245056;a.obj0Black=18944;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),Aa=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=6530559;a.bgDarkGrey=255;a.bgBlack=0;a.obj0White=16776960;a.obj0LightGrey=16711680;a.obj0DarkGrey=6488064;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=8126257;a.obj1DarkGrey=33792;a.obj1Black=0;return a}(),
Ba=function(){function a(){}a.bgWhite=16777215;a.bgLightGrey=11382148;a.bgDarkGrey=4354939;a.bgBlack=0;a.obj0White=16777215;a.obj0LightGrey=16756067;a.obj0DarkGrey=16756067;a.obj0Black=0;a.obj1White=16777215;a.obj1LightGrey=6530559;a.obj1DarkGrey=255;a.obj1Black=0;return a}(),d=function(){function a(){}a.bgWhite=I.bgWhite;a.bgLightGrey=I.bgLightGrey;a.bgDarkGrey=I.bgDarkGrey;a.bgBlack=I.bgBlack;a.obj0White=I.obj0White;a.obj0LightGrey=I.obj0LightGrey;a.obj0DarkGrey=I.obj0DarkGrey;a.obj0Black=I.obj0Black;
a.obj1White=I.obj1White;a.obj1LightGrey=I.obj1LightGrey;a.obj1DarkGrey=I.obj1DarkGrey;a.obj1Black=I.obj1Black;return a}(),Ta=function(){function a(){}a.memoryLocationBackgroundPaletteIndex=65384;a.memoryLocationBackgroundPaletteData=65385;a.memoryLocationSpritePaletteIndex=65386;a.memoryLocationSpritePaletteData=65387;a.memoryLocationBackgroundPalette=65351;a.memoryLocationSpritePaletteOne=65352;a.memoryLocationSpritePaletteTwo=65353;return a}(),$a=function(){function a(){}a.tileId=-1;a.horizontalFlip=
!1;a.nextXIndexToPerformCacheCheck=-1;return a}(),w=function(){function a(){}a.updateNRx0=function(b){a.NRx0SweepPeriod=(b&112)>>4;a.NRx0Negate=n(3,b);a.NRx0SweepShift=b&7};a.updateNRx1=function(b){a.NRx1Duty=b>>6&3;a.NRx1LengthLoad=b&63;a.lengthCounter=64-a.NRx1LengthLoad};a.updateNRx2=function(b){a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=n(3,b);a.NRx2EnvelopePeriod=b&7;a.isDacEnabled=0<(b&248)};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=
function(b){a.NRx4LengthEnabled=n(6,b);b&=7;a.NRx4FrequencyMSB=b;a.frequency=b<<8|a.NRx3FrequencyLSB};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.isEnabled;e[1025+50*a.saveStateSlot]=a.frequencyTimer;e[1029+50*a.saveStateSlot]=a.envelopeCounter;e[1033+50*a.saveStateSlot]=a.lengthCounter;e[1038+50*a.saveStateSlot]=a.volume;e[1043+50*a.saveStateSlot]=a.dutyCycle;e[1044+50*a.saveStateSlot]=a.waveFormPositionOnDuty;e[1049+50*a.saveStateSlot]=a.isSweepEnabled;e[1050+50*a.saveStateSlot]=a.sweepCounter;
e[1055+50*a.saveStateSlot]=a.sweepShadowFrequency};a.loadState=function(){a.isEnabled=M(1024+50*a.saveStateSlot);a.frequencyTimer=e[1025+50*a.saveStateSlot];a.envelopeCounter=e[1029+50*a.saveStateSlot];a.lengthCounter=e[1033+50*a.saveStateSlot];a.volume=e[1038+50*a.saveStateSlot];a.dutyCycle=e[1043+50*a.saveStateSlot];a.waveFormPositionOnDuty=e[1044+50*a.saveStateSlot];a.isSweepEnabled=M(1049+50*a.saveStateSlot);a.sweepCounter=e[1050+50*a.saveStateSlot];a.sweepShadowFrequency=e[1055+50*a.saveStateSlot]};
a.initialize=function(){f(a.memoryLocationNRx0,128);f(a.memoryLocationNRx1,191);f(a.memoryLocationNRx2,243);f(a.memoryLocationNRx3,193);f(a.memoryLocationNRx4,191)};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){var c=2048-a.frequency<<2;b.GBCDoubleSpeed&&(c<<=2);a.frequencyTimer=c};a.getSample=function(b){b=a.frequencyTimer-b;if(0>=b){var c=Math.abs(b);a.frequencyTimer=b;a.resetTimer();a.frequencyTimer-=c;a.waveFormPositionOnDuty=
a.waveFormPositionOnDuty+1&7}else a.frequencyTimer=b;if(a.isEnabled&&a.isDacEnabled)b=a.volume;else return 15;c=1;Lb(a.NRx1Duty,a.waveFormPositionOnDuty)||(c=-c);return c*b+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=64);a.resetTimer();a.envelopeCounter=a.NRx2EnvelopePeriod;a.volume=a.NRx2StartingVolume;a.sweepShadowFrequency=a.frequency;a.sweepCounter=a.NRx0SweepPeriod;a.isSweepEnabled=0<a.NRx0SweepPeriod&&0<a.NRx0SweepShift;0<a.NRx0SweepShift&&Mb();a.isDacEnabled||
(a.isEnabled=!1)};a.willChannelUpdate=function(b){b=a.cycleCounter+b;a.cycleCounter=b;return!(0<a.frequencyTimer-b)};a.updateSweep=function(){var b=a.sweepCounter-1;0>=b?(a.sweepCounter=a.NRx0SweepPeriod,a.isSweepEnabled&&0<a.NRx0SweepPeriod&&Mb()):a.sweepCounter=b};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;0>=b?(a.envelopeCounter=a.NRx2EnvelopePeriod,0!==b&&(b=a.volume,
a.NRx2EnvelopeAddMode&&15>b?b+=1:!a.NRx2EnvelopeAddMode&&0<b&&--b,a.volume=b)):a.envelopeCounter=b};a.setFrequency=function(b){var c=b>>8;b&=255;var d=v(a.memoryLocationNRx4)&248|c;f(a.memoryLocationNRx3,b);f(a.memoryLocationNRx4,d);a.NRx3FrequencyLSB=b;a.NRx4FrequencyMSB=c;a.frequency=a.NRx4FrequencyMSB<<8|a.NRx3FrequencyLSB};a.cycleCounter=0;a.memoryLocationNRx0=65296;a.NRx0SweepPeriod=0;a.NRx0Negate=!1;a.NRx0SweepShift=0;a.memoryLocationNRx1=65297;a.NRx1Duty=0;a.NRx1LengthLoad=0;a.memoryLocationNRx2=
65298;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=65299;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65300;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.channelNumber=1;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.envelopeCounter=0;a.lengthCounter=0;a.volume=0;a.dutyCycle=0;a.waveFormPositionOnDuty=0;a.isSweepEnabled=!1;a.sweepCounter=0;a.sweepShadowFrequency=0;a.saveStateSlot=7;return a}(),J=function(){function a(){}a.updateNRx1=
function(b){a.NRx1Duty=b>>6&3;a.NRx1LengthLoad=b&63;a.lengthCounter=64-a.NRx1LengthLoad};a.updateNRx2=function(b){a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=n(3,b);a.NRx2EnvelopePeriod=b&7;a.isDacEnabled=0<(b&248)};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){a.NRx4LengthEnabled=n(6,b);b&=7;a.NRx4FrequencyMSB=b;a.frequency=b<<8|a.NRx3FrequencyLSB};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.isEnabled;e[1025+50*a.saveStateSlot]=
a.frequencyTimer;e[1029+50*a.saveStateSlot]=a.envelopeCounter;e[1033+50*a.saveStateSlot]=a.lengthCounter;e[1038+50*a.saveStateSlot]=a.volume;e[1043+50*a.saveStateSlot]=a.dutyCycle;e[1044+50*a.saveStateSlot]=a.waveFormPositionOnDuty};a.loadState=function(){a.isEnabled=M(1024+50*a.saveStateSlot);a.frequencyTimer=e[1025+50*a.saveStateSlot];a.envelopeCounter=e[1029+50*a.saveStateSlot];a.lengthCounter=e[1033+50*a.saveStateSlot];a.volume=e[1038+50*a.saveStateSlot];a.dutyCycle=e[1043+50*a.saveStateSlot];
a.waveFormPositionOnDuty=e[1044+50*a.saveStateSlot]};a.initialize=function(){f(a.memoryLocationNRx1-1,255);f(a.memoryLocationNRx1,63);f(a.memoryLocationNRx2,0);f(a.memoryLocationNRx3,0);f(a.memoryLocationNRx4,184)};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){a.frequencyTimer=2048-a.frequency<<2<<b.GBCDoubleSpeed};a.getSample=function(b){b=a.frequencyTimer-b;a.frequencyTimer=b;0>=b&&(b=Math.abs(b),a.resetTimer(),a.frequencyTimer-=
b,a.waveFormPositionOnDuty=a.waveFormPositionOnDuty+1&7);if(a.isEnabled&&a.isDacEnabled)b=a.volume;else return 15;var c=1;Lb(a.NRx1Duty,a.waveFormPositionOnDuty)||(c=-c);return c*b+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=64);a.resetTimer();a.envelopeCounter=a.NRx2EnvelopePeriod;a.volume=a.NRx2StartingVolume;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){b=a.cycleCounter+b;a.cycleCounter=b;return!(0<a.frequencyTimer-b)};a.updateLength=function(){var b=
a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b&&(b=a.NRx2EnvelopePeriod,0!==b)){var d=a.volume;a.NRx2EnvelopeAddMode&&15>d?d+=1:!a.NRx2EnvelopeAddMode&&0<d&&--d;a.volume=d}a.envelopeCounter=b};a.setFrequency=function(b){var c=b>>8;b&=255;var d=v(a.memoryLocationNRx4)&248|c;f(a.memoryLocationNRx3,b);f(a.memoryLocationNRx4,d);a.NRx3FrequencyLSB=b;a.NRx4FrequencyMSB=c;a.frequency=c<<8|b};a.cycleCounter=
0;a.memoryLocationNRx1=65302;a.NRx1Duty=0;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65303;a.NRx2StartingVolume=0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=65304;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65305;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.channelNumber=2;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.envelopeCounter=0;a.lengthCounter=0;a.volume=0;a.dutyCycle=0;a.waveFormPositionOnDuty=0;a.saveStateSlot=8;return a}(),G=function(){function a(){}
a.updateNRx0=function(b){a.isDacEnabled=n(7,b)};a.updateNRx1=function(b){a.NRx1LengthLoad=b;a.lengthCounter=256-a.NRx1LengthLoad};a.updateNRx2=function(b){a.NRx2VolumeCode=b>>5&15};a.updateNRx3=function(b){a.NRx3FrequencyLSB=b;a.frequency=a.NRx4FrequencyMSB<<8|b};a.updateNRx4=function(b){a.NRx4LengthEnabled=n(6,b);b&=7;a.NRx4FrequencyMSB=b;a.frequency=b<<8|a.NRx3FrequencyLSB};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.isEnabled;e[1025+50*a.saveStateSlot]=a.frequencyTimer;e[1029+50*a.saveStateSlot]=
a.lengthCounter;e[1033+50*a.saveStateSlot]=a.waveTablePosition};a.loadState=function(){a.isEnabled=M(1024+50*a.saveStateSlot);a.frequencyTimer=e[1025+50*a.saveStateSlot];a.lengthCounter=e[1029+50*a.saveStateSlot];a.waveTablePosition=e[1033+50*a.saveStateSlot]};a.initialize=function(){f(a.memoryLocationNRx0,127);f(a.memoryLocationNRx1,255);f(a.memoryLocationNRx2,159);f(a.memoryLocationNRx3,0);f(a.memoryLocationNRx4,184);a.volumeCodeChanged=!0};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;
a.cycleCounter=0;return a.getSample(b)};a.resetTimer=function(){a.frequencyTimer=2048-a.frequency<<1<<b.GBCDoubleSpeed};a.getSample=function(b){var c=a.frequencyTimer;c-=b;0>=c?(b=Math.abs(c),a.frequencyTimer=c,a.resetTimer(),a.frequencyTimer-=b,a.waveTablePosition=a.waveTablePosition+1&31):a.frequencyTimer=c;c=a.volumeCode;if(a.isEnabled&&a.isDacEnabled)a.volumeCodeChanged&&(c=v(a.memoryLocationNRx2),c=c>>5&15,a.volumeCode=c,a.volumeCodeChanged=!1);else return 15;var d=a.waveTablePosition;b=v(a.memoryLocationWaveTable+
(d>>1|0));b=b>>((0===(d&1))<<2)&15;d=0;switch(c){case 0:b>>=4;break;case 1:d=1;break;case 2:b>>=1;d=2;break;default:b>>=2,d=4}return b=(0<d?b/d:0)+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=256);a.resetTimer();a.waveTablePosition=0;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){a.cycleCounter+=b;return!(!a.volumeCodeChanged&&0<a.frequencyTimer-a.cycleCounter)};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&
(a.isEnabled=!1);a.lengthCounter=b};a.cycleCounter=0;a.memoryLocationNRx0=65306;a.memoryLocationNRx1=65307;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65308;a.NRx2VolumeCode=0;a.memoryLocationNRx3=65309;a.NRx3FrequencyLSB=0;a.memoryLocationNRx4=65310;a.NRx4LengthEnabled=!1;a.NRx4FrequencyMSB=0;a.memoryLocationWaveTable=65328;a.channelNumber=3;a.isEnabled=!1;a.isDacEnabled=!1;a.frequency=0;a.frequencyTimer=0;a.lengthCounter=0;a.waveTablePosition=0;a.volumeCode=0;a.volumeCodeChanged=!1;a.saveStateSlot=
9;return a}(),K=function(){function a(){}a.updateNRx1=function(b){a.NRx1LengthLoad=b&63;a.lengthCounter=64-a.NRx1LengthLoad};a.updateNRx2=function(b){a.NRx2StartingVolume=b>>4&15;a.NRx2EnvelopeAddMode=n(3,b);a.NRx2EnvelopePeriod=b&7;a.isDacEnabled=0<(b&248)};a.updateNRx3=function(b){var c=b&7;a.NRx3ClockShift=b>>4;a.NRx3WidthMode=n(3,b);a.NRx3DivisorCode=c;c<<=1;1>c&&(c=1);a.divisor=c<<3};a.updateNRx4=function(b){a.NRx4LengthEnabled=n(6,b)};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.isEnabled;
e[1025+50*a.saveStateSlot]=a.frequencyTimer;e[1029+50*a.saveStateSlot]=a.envelopeCounter;e[1033+50*a.saveStateSlot]=a.lengthCounter;e[1038+50*a.saveStateSlot]=a.volume;e[1043+50*a.saveStateSlot]=a.linearFeedbackShiftRegister};a.loadState=function(){a.isEnabled=M(1024+50*a.saveStateSlot);a.frequencyTimer=e[1025+50*a.saveStateSlot];a.envelopeCounter=e[1029+50*a.saveStateSlot];a.lengthCounter=e[1033+50*a.saveStateSlot];a.volume=e[1038+50*a.saveStateSlot];a.linearFeedbackShiftRegister=e[1043+50*a.saveStateSlot]};
a.initialize=function(){f(a.memoryLocationNRx1-1,255);f(a.memoryLocationNRx1,255);f(a.memoryLocationNRx2,0);f(a.memoryLocationNRx3,0);f(a.memoryLocationNRx4,191)};a.getSampleFromCycleCounter=function(){var b=a.cycleCounter;a.cycleCounter=0;return a.getSample(b)};a.getSample=function(b){var c=a.frequencyTimer;c-=b;if(0>=c){b=Math.abs(c);c=a.getNoiseChannelFrequencyPeriod();c-=b;b=a.linearFeedbackShiftRegister;var d=b&1^b>>1&1;b=b>>1|d<<14;a.NRx3WidthMode&&(b=b&-65|d<<6);a.linearFeedbackShiftRegister=
b}a.frequencyTimer=c;if(a.isEnabled&&a.isDacEnabled)c=a.volume;else return 15;b=n(0,a.linearFeedbackShiftRegister)?-1:1;return b*c+15};a.trigger=function(){a.isEnabled=!0;0===a.lengthCounter&&(a.lengthCounter=64);a.frequencyTimer=a.getNoiseChannelFrequencyPeriod();a.envelopeCounter=a.NRx2EnvelopePeriod;a.volume=a.NRx2StartingVolume;a.linearFeedbackShiftRegister=32767;a.isDacEnabled||(a.isEnabled=!1)};a.willChannelUpdate=function(b){a.cycleCounter+=b;return!(0<a.frequencyTimer-a.cycleCounter)};a.getNoiseChannelFrequencyPeriod=
function(){return a.divisor<<a.NRx3ClockShift<<b.GBCDoubleSpeed};a.updateLength=function(){var b=a.lengthCounter;0<b&&a.NRx4LengthEnabled&&--b;0===b&&(a.isEnabled=!1);a.lengthCounter=b};a.updateEnvelope=function(){var b=a.envelopeCounter-1;if(0>=b&&(b=a.NRx2EnvelopePeriod,0!==b)){var d=a.volume;a.NRx2EnvelopeAddMode&&15>d?d+=1:!a.NRx2EnvelopeAddMode&&0<d&&--d;a.volume=d}a.envelopeCounter=b};a.cycleCounter=0;a.memoryLocationNRx1=65312;a.NRx1LengthLoad=0;a.memoryLocationNRx2=65313;a.NRx2StartingVolume=
0;a.NRx2EnvelopeAddMode=!1;a.NRx2EnvelopePeriod=0;a.memoryLocationNRx3=65314;a.NRx3ClockShift=0;a.NRx3WidthMode=!1;a.NRx3DivisorCode=0;a.memoryLocationNRx4=65315;a.NRx4LengthEnabled=!1;a.channelNumber=4;a.isEnabled=!1;a.isDacEnabled=!1;a.frequencyTimer=0;a.envelopeCounter=0;a.lengthCounter=0;a.volume=0;a.divisor=0;a.linearFeedbackShiftRegister=0;a.saveStateSlot=10;return a}(),t=function(){function a(){}a.channel1Sample=15;a.channel2Sample=15;a.channel3Sample=15;a.channel4Sample=15;a.channel1DacEnabled=
!1;a.channel2DacEnabled=!1;a.channel3DacEnabled=!1;a.channel4DacEnabled=!1;a.leftChannelSampleUnsignedByte=127;a.rightChannelSampleUnsignedByte=127;a.mixerVolumeChanged=!1;a.mixerEnabledChanged=!1;a.needToRemixSamples=!1;return a}(),k=function(){function a(){}a.batchProcessCycles=function(){return 87<<b.GBCDoubleSpeed};a.updateNR50=function(b){a.NR50LeftMixerVolume=b>>4&7;a.NR50RightMixerVolume=b&7};a.updateNR51=function(b){a.NR51IsChannel4EnabledOnLeftOutput=n(7,b);a.NR51IsChannel3EnabledOnLeftOutput=
n(6,b);a.NR51IsChannel2EnabledOnLeftOutput=n(5,b);a.NR51IsChannel1EnabledOnLeftOutput=n(4,b);a.NR51IsChannel4EnabledOnRightOutput=n(3,b);a.NR51IsChannel3EnabledOnRightOutput=n(2,b);a.NR51IsChannel2EnabledOnRightOutput=n(1,b);a.NR51IsChannel1EnabledOnRightOutput=n(0,b)};a.updateNR52=function(b){a.NR52IsSoundEnabled=n(7,b)};a.maxFrameSequenceCycles=function(){return 8192<<b.GBCDoubleSpeed};a.maxDownSampleCycles=function(){return b.CLOCK_SPEED()};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.frameSequenceCycleCounter;
e[1028+50*a.saveStateSlot]=a.downSampleCycleCounter;e[1029+50*a.saveStateSlot]=a.frameSequencer};a.loadState=function(){a.frameSequenceCycleCounter=e[1024+50*a.saveStateSlot];a.downSampleCycleCounter=e[1028+50*a.saveStateSlot];a.frameSequencer=e[1029+50*a.saveStateSlot];Qb()};a.currentCycles=0;a.memoryLocationNR50=65316;a.NR50LeftMixerVolume=0;a.NR50RightMixerVolume=0;a.memoryLocationNR51=65317;a.NR51IsChannel1EnabledOnLeftOutput=!0;a.NR51IsChannel2EnabledOnLeftOutput=!0;a.NR51IsChannel3EnabledOnLeftOutput=
!0;a.NR51IsChannel4EnabledOnLeftOutput=!0;a.NR51IsChannel1EnabledOnRightOutput=!0;a.NR51IsChannel2EnabledOnRightOutput=!0;a.NR51IsChannel3EnabledOnRightOutput=!0;a.NR51IsChannel4EnabledOnRightOutput=!0;a.memoryLocationNR52=65318;a.NR52IsSoundEnabled=!0;a.memoryLocationChannel3LoadRegisterStart=65328;a.frameSequenceCycleCounter=0;a.downSampleCycleCounter=0;a.downSampleCycleMultiplier=48E3;a.frameSequencer=0;a.audioQueueIndex=0;a.wasmBoyMemoryMaxBufferSize=131072;a.saveStateSlot=6;return a}(),m=function(){function a(){}
a.updateInterruptEnabled=function(b){a.isVBlankInterruptEnabled=n(a.bitPositionVBlankInterrupt,b);a.isLcdInterruptEnabled=n(a.bitPositionLcdInterrupt,b);a.isTimerInterruptEnabled=n(a.bitPositionTimerInterrupt,b);a.isSerialInterruptEnabled=n(a.bitPositionSerialInterrupt,b);a.isJoypadInterruptEnabled=n(a.bitPositionJoypadInterrupt,b);a.interruptsEnabledValue=b};a.updateInterruptRequested=function(b){a.isVBlankInterruptRequested=n(a.bitPositionVBlankInterrupt,b);a.isLcdInterruptRequested=n(a.bitPositionLcdInterrupt,
b);a.isTimerInterruptRequested=n(a.bitPositionTimerInterrupt,b);a.isSerialInterruptRequested=n(a.bitPositionSerialInterrupt,b);a.isJoypadInterruptRequested=n(a.bitPositionJoypadInterrupt,b);a.interruptsRequestedValue=b};a.areInterruptsPending=function(){return 0<(a.interruptsRequestedValue&a.interruptsEnabledValue&31)};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.masterInterruptSwitch;e[1025+50*a.saveStateSlot]=a.masterInterruptSwitchDelay};a.loadState=function(){a.masterInterruptSwitch=M(1024+
50*a.saveStateSlot);a.masterInterruptSwitchDelay=M(1025+50*a.saveStateSlot);a.updateInterruptEnabled(v(a.memoryLocationInterruptEnabled));a.updateInterruptRequested(v(a.memoryLocationInterruptRequest))};a.masterInterruptSwitch=!1;a.masterInterruptSwitchDelay=!1;a.bitPositionVBlankInterrupt=0;a.bitPositionLcdInterrupt=1;a.bitPositionTimerInterrupt=2;a.bitPositionSerialInterrupt=3;a.bitPositionJoypadInterrupt=4;a.memoryLocationInterruptEnabled=65535;a.interruptsEnabledValue=0;a.isVBlankInterruptEnabled=
!1;a.isLcdInterruptEnabled=!1;a.isTimerInterruptEnabled=!1;a.isSerialInterruptEnabled=!1;a.isJoypadInterruptEnabled=!1;a.memoryLocationInterruptRequest=65295;a.interruptsRequestedValue=0;a.isVBlankInterruptRequested=!1;a.isLcdInterruptRequested=!1;a.isTimerInterruptRequested=!1;a.isSerialInterruptRequested=!1;a.isJoypadInterruptRequested=!1;a.saveStateSlot=2;return a}(),h=function(){function a(){}a.batchProcessCycles=function(){return 256};a.updateDividerRegister=function(){var b=a.dividerRegister;
a.dividerRegister=0;f(a.memoryLocationDividerRegister,0);a.timerEnabled&&Sb(b,0)&&xb()};a.updateTimerCounter=function(b){if(a.timerEnabled){if(a.timerCounterWasReset)return;a.timerCounterOverflowDelay&&(a.timerCounterOverflowDelay=!1)}a.timerCounter=b};a.updateTimerModulo=function(b){a.timerModulo=b;a.timerEnabled&&a.timerCounterWasReset&&(a.timerCounter=b,a.timerCounterWasReset=!1)};a.updateTimerControl=function(b){var c=a.timerEnabled;a.timerEnabled=n(2,b);b&=3;if(!c){c=yb(a.timerInputClock);var d=
yb(b),e=a.dividerRegister;(a.timerEnabled?n(c,e):n(c,e)&&n(d,e))&&xb()}a.timerInputClock=b};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.currentCycles;e[1028+50*a.saveStateSlot]=a.dividerRegister;e[1032+50*a.saveStateSlot]=a.timerCounterOverflowDelay;e[1035+50*a.saveStateSlot]=a.timerCounterWasReset;f(a.memoryLocationTimerCounter,a.timerCounter)};a.loadState=function(){a.currentCycles=e[1024+50*a.saveStateSlot];a.dividerRegister=e[1028+50*a.saveStateSlot];a.timerCounterOverflowDelay=M(1032+
50*a.saveStateSlot);a.timerCounterWasReset=M(1035+50*a.saveStateSlot);a.timerCounter=v(a.memoryLocationTimerCounter);a.timerModulo=v(a.memoryLocationTimerModulo);a.timerInputClock=v(a.memoryLocationTimerControl)};a.currentCycles=0;a.memoryLocationDividerRegister=65284;a.dividerRegister=0;a.memoryLocationTimerCounter=65285;a.timerCounter=0;a.timerCounterOverflowDelay=!1;a.timerCounterWasReset=!1;a.timerCounterMask=0;a.memoryLocationTimerModulo=65286;a.timerModulo=0;a.memoryLocationTimerControl=65287;
a.timerEnabled=!1;a.timerInputClock=0;a.saveStateSlot=5;return a}(),V=function(){function a(){}a.updateTransferControl=function(b){a.isShiftClockInternal=n(0,b);a.isClockSpeedFast=n(1,b);a.transferStartFlag=n(7,b);return!0};a.currentCycles=0;a.memoryLocationSerialTransferData=65281;a.memoryLocationSerialTransferControl=65282;a.numberOfBitsTransferred=0;a.isShiftClockInternal=!1;a.isClockSpeedFast=!1;a.transferStartFlag=!1;return a}(),x=function(){function a(){}a.updateJoypad=function(b){a.joypadRegisterFlipped=
b^255;a.isDpadType=n(4,a.joypadRegisterFlipped);a.isButtonType=n(5,a.joypadRegisterFlipped)};a.saveState=function(){};a.loadState=function(){a.updateJoypad(v(a.memoryLocationJoypadRegister))};a.up=!1;a.down=!1;a.left=!1;a.right=!1;a.a=!1;a.b=!1;a.select=!1;a.start=!1;a.memoryLocationJoypadRegister=65280;a.joypadRegisterFlipped=0;a.isDpadType=!1;a.isButtonType=!1;a.saveStateSlot=3;return a}(),W=function(){function a(){}a.programCounter=-1;a.readGbMemory=-1;a.writeGbMemory=-1;a.reachedBreakpoint=!1;
return a}(),u=function(){function a(){}a.updateLcdStatus=function(b){var c=v(a.memoryLocationLcdStatus);b=b&248|c&7|128;f(a.memoryLocationLcdStatus,b)};a.updateLcdControl=function(b){var c=a.enabled;a.enabled=n(7,b);a.windowTileMapDisplaySelect=n(6,b);a.windowDisplayEnabled=n(5,b);a.bgWindowTileDataSelect=n(4,b);a.bgTileMapDisplaySelect=n(3,b);a.tallSpriteSize=n(2,b);a.spriteDisplayEnable=n(1,b);a.bgDisplayEnabled=n(0,b);c&&!a.enabled&&Vb(!0);!c&&a.enabled&&Vb(!1)};a.memoryLocationLcdStatus=65345;
a.currentLcdMode=0;a.memoryLocationCoincidenceCompare=65349;a.coincidenceCompare=0;a.memoryLocationLcdControl=65344;a.enabled=!0;a.windowTileMapDisplaySelect=!1;a.windowDisplayEnabled=!1;a.bgWindowTileDataSelect=!1;a.bgTileMapDisplaySelect=!1;a.tallSpriteSize=!1;a.spriteDisplayEnable=!1;a.bgDisplayEnabled=!1;return a}(),q=function(){function a(){}a.batchProcessCycles=function(){return a.MAX_CYCLES_PER_SCANLINE()};a.MAX_CYCLES_PER_SCANLINE=function(){return 153===a.scanlineRegister?4<<b.GBCDoubleSpeed:
456<<b.GBCDoubleSpeed};a.MIN_CYCLES_SPRITES_LCD_MODE=function(){return 376<<b.GBCDoubleSpeed};a.MIN_CYCLES_TRANSFER_DATA_LCD_MODE=function(){return 249<<b.GBCDoubleSpeed};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.scanlineCycleCounter;e[1028+50*a.saveStateSlot]=u.currentLcdMode;f(a.memoryLocationScanlineRegister,a.scanlineRegister)};a.loadState=function(){a.scanlineCycleCounter=e[1024+50*a.saveStateSlot];u.currentLcdMode=e[1028+50*a.saveStateSlot];a.scanlineRegister=v(a.memoryLocationScanlineRegister);
u.updateLcdControl(v(u.memoryLocationLcdControl))};a.currentCycles=0;a.scanlineCycleCounter=0;a.memoryLocationScanlineRegister=65348;a.scanlineRegister=0;a.memoryLocationDmaTransfer=65350;a.memoryLocationScrollX=65347;a.scrollX=0;a.memoryLocationScrollY=65346;a.scrollY=0;a.memoryLocationWindowX=65355;a.windowX=0;a.memoryLocationWindowY=65354;a.windowY=0;a.memoryLocationTileMapSelectZeroStart=38912;a.memoryLocationTileMapSelectOneStart=39936;a.memoryLocationTileDataSelectZeroStart=34816;a.memoryLocationTileDataSelectOneStart=
32768;a.memoryLocationSpriteAttributesTable=65024;a.memoryLocationBackgroundPalette=65351;a.memoryLocationSpritePaletteOne=65352;a.memoryLocationSpritePaletteTwo=65353;a.saveStateSlot=1;return a}(),l=function(){function a(){}a.saveState=function(){e[1024+50*a.saveStateSlot]=a.currentRomBank;e[1026+50*a.saveStateSlot]=a.currentRamBank;e[1028+50*a.saveStateSlot]=a.isRamBankingEnabled;e[1029+50*a.saveStateSlot]=a.isMBC1RomModeEnabled;e[1030+50*a.saveStateSlot]=a.isRomOnly;e[1031+50*a.saveStateSlot]=
a.isMBC1;e[1032+50*a.saveStateSlot]=a.isMBC2;e[1033+50*a.saveStateSlot]=a.isMBC3;e[1034+50*a.saveStateSlot]=a.isMBC5};a.loadState=function(){a.currentRomBank=e[1024+50*a.saveStateSlot];a.currentRamBank=e[1026+50*a.saveStateSlot];a.isRamBankingEnabled=M(1028+50*a.saveStateSlot);a.isMBC1RomModeEnabled=M(1029+50*a.saveStateSlot);a.isRomOnly=M(1030+50*a.saveStateSlot);a.isMBC1=M(1031+50*a.saveStateSlot);a.isMBC2=M(1032+50*a.saveStateSlot);a.isMBC3=M(1033+50*a.saveStateSlot);a.isMBC5=M(1034+50*a.saveStateSlot)};
a.cartridgeRomLocation=0;a.switchableCartridgeRomLocation=16384;a.videoRamLocation=32768;a.cartridgeRamLocation=40960;a.internalRamBankZeroLocation=49152;a.internalRamBankOneLocation=53248;a.echoRamLocation=57344;a.spriteInformationTableLocation=65024;a.spriteInformationTableLocationEnd=65183;a.unusableMemoryLocation=65184;a.unusableMemoryEndLocation=65279;a.currentRomBank=0;a.currentRamBank=0;a.isRamBankingEnabled=!1;a.isMBC1RomModeEnabled=!0;a.isRomOnly=!0;a.isMBC1=!1;a.isMBC2=!1;a.isMBC3=!1;a.isMBC5=
!1;a.memoryLocationHdmaSourceHigh=65361;a.memoryLocationHdmaSourceLow=65362;a.memoryLocationHdmaDestinationHigh=65363;a.memoryLocationHdmaDestinationLow=65364;a.memoryLocationHdmaTrigger=65365;a.DMACycles=0;a.isHblankHdmaActive=!1;a.hblankHdmaTransferLengthRemaining=0;a.hblankHdmaSource=0;a.hblankHdmaDestination=0;a.memoryLocationGBCVRAMBank=65359;a.memoryLocationGBCWRAMBank=65392;a.saveStateSlot=4;return a}(),b=function(){function a(){}a.CLOCK_SPEED=function(){return 4194304<<a.GBCDoubleSpeed};a.MAX_CYCLES_PER_FRAME=
function(){return 70224<<a.GBCDoubleSpeed};a.enableHalt=function(){m.masterInterruptSwitch?a.isHaltNormal=!0:0===(m.interruptsEnabledValue&m.interruptsRequestedValue&31)?a.isHaltNoJump=!0:a.isHaltBug=!0};a.exitHaltAndStop=function(){a.isHaltNoJump=!1;a.isHaltNormal=!1;a.isHaltBug=!1;a.isStopped=!1};a.isHalted=function(){return a.isHaltNormal||a.isHaltNoJump};a.saveState=function(){e[1024+50*a.saveStateSlot]=a.registerA;e[1025+50*a.saveStateSlot]=a.registerB;e[1026+50*a.saveStateSlot]=a.registerC;
e[1027+50*a.saveStateSlot]=a.registerD;e[1028+50*a.saveStateSlot]=a.registerE;e[1029+50*a.saveStateSlot]=a.registerH;e[1030+50*a.saveStateSlot]=a.registerL;e[1031+50*a.saveStateSlot]=a.registerF;e[1032+50*a.saveStateSlot]=a.stackPointer;e[1034+50*a.saveStateSlot]=a.programCounter;e[1036+50*a.saveStateSlot]=a.currentCycles;e[1041+50*a.saveStateSlot]=a.isHaltNormal;e[1042+50*a.saveStateSlot]=a.isHaltNoJump;e[1043+50*a.saveStateSlot]=a.isHaltBug;e[1044+50*a.saveStateSlot]=a.isStopped};a.loadState=function(){a.registerA=
e[1024+50*a.saveStateSlot];a.registerB=e[1025+50*a.saveStateSlot];a.registerC=e[1026+50*a.saveStateSlot];a.registerD=e[1027+50*a.saveStateSlot];a.registerE=e[1028+50*a.saveStateSlot];a.registerH=e[1029+50*a.saveStateSlot];a.registerL=e[1030+50*a.saveStateSlot];a.registerF=e[1031+50*a.saveStateSlot];a.stackPointer=e[1032+50*a.saveStateSlot];a.programCounter=e[1034+50*a.saveStateSlot];a.currentCycles=e[1036+50*a.saveStateSlot];a.isHaltNormal=M(1041+50*a.saveStateSlot);a.isHaltNoJump=M(1042+50*a.saveStateSlot);
a.isHaltBug=M(1043+50*a.saveStateSlot);a.isStopped=M(1044+50*a.saveStateSlot)};a.GBCEnabled=!1;a.memoryLocationSpeedSwitch=65357;a.GBCDoubleSpeed=!1;a.registerA=0;a.registerB=0;a.registerC=0;a.registerD=0;a.registerE=0;a.registerH=0;a.registerL=0;a.registerF=0;a.stackPointer=0;a.programCounter=0;a.currentCycles=0;a.isHaltNormal=!1;a.isHaltNoJump=!1;a.isHaltBug=!1;a.isStopped=!1;a.saveStateSlot=0;return a}(),Z=function(){function a(){}a.cyclesPerCycleSet=2E9;a.cycleSets=0;a.cycles=0;return a}(),S=
function(){function a(){}a.stepsPerStepSet=2E9;a.stepSets=0;a.steps=0;a.RESPONSE_CONDITION_ERROR=-1;a.RESPONSE_CONDITION_FRAME=0;a.RESPONSE_CONDITION_AUDIO=1;a.RESPONSE_CONDITION_BREAKPOINT=2;return a}();eb.size()<Ib&&eb.grow(Ib-eb.size());var db=!1,wc=Object.freeze({memory:eb,config:function(a,c,e,g,n,p,r,u,C,x){O.enableBootRom=0<a;O.useGbcWhenAvailable=0<c;O.audioBatchProcessing=0<e;O.graphicsBatchProcessing=0<g;O.timersBatchProcessing=0<n;O.graphicsDisableScanlineRendering=0<p;O.audioAccumulateSamples=
0<r;O.tileRendering=0<u;O.tileCaching=0<C;O.enableAudioDebugging=0<x;a=v(323);b.GBCEnabled=192===a||O.useGbcWhenAvailable&&128===a?!0:!1;b.GBCDoubleSpeed=!1;b.registerA=0;b.registerB=0;b.registerC=0;b.registerD=0;b.registerE=0;b.registerH=0;b.registerL=0;b.registerF=0;b.stackPointer=0;b.programCounter=0;b.currentCycles=0;b.isHaltNormal=!1;b.isHaltNoJump=!1;b.isHaltBug=!1;b.isStopped=!1;b.GBCEnabled?(b.registerA=17,b.registerF=128,b.registerB=0,b.registerC=0,b.registerD=255,b.registerE=86,b.registerH=
0,b.registerL=13):(b.registerA=1,b.registerF=176,b.registerB=0,b.registerC=19,b.registerD=0,b.registerE=216,b.registerH=1,b.registerL=77);b.programCounter=256;b.stackPointer=65534;l.isRamBankingEnabled=!1;l.isMBC1RomModeEnabled=!0;a=v(327);l.isRomOnly=0===a;l.isMBC1=1<=a&&3>=a;l.isMBC2=5<=a&&6>=a;l.isMBC3=15<=a&&19>=a;l.isMBC5=25<=a&&30>=a;l.currentRomBank=1;l.currentRamBank=0;f(65361,255);f(65362,255);f(65363,255);f(65364,255);f(65365,255);q.currentCycles=0;q.scanlineCycleCounter=0;q.scanlineRegister=
0;q.scrollX=0;q.scrollY=0;q.windowX=0;q.windowY=0;q.scanlineRegister=144;b.GBCEnabled?(f(65344,145),f(65345,129),f(65348,144),f(65351,252)):(f(65344,145),f(65345,133),f(65350,255),f(65351,252),f(65352,255),f(65353,255));f(65359,0);f(65392,1);Jb(0);a=0;for(c=308;323>=c;c++)a+=v(c);switch(a&255){case 136:d.bgWhite=qa.bgWhite;d.bgLightGrey=qa.bgLightGrey;d.bgDarkGrey=qa.bgDarkGrey;d.bgBlack=qa.bgBlack;d.obj0White=qa.obj0White;d.obj0LightGrey=qa.obj0LightGrey;d.obj0DarkGrey=qa.obj0DarkGrey;d.obj0Black=
qa.obj0Black;d.obj1White=qa.obj1White;d.obj1LightGrey=qa.obj1LightGrey;d.obj1DarkGrey=qa.obj1DarkGrey;d.obj1Black=qa.obj1Black;break;case 97:d.bgWhite=ra.bgWhite;d.bgLightGrey=ra.bgLightGrey;d.bgDarkGrey=ra.bgDarkGrey;d.bgBlack=ra.bgBlack;d.obj0White=ra.obj0White;d.obj0LightGrey=ra.obj0LightGrey;d.obj0DarkGrey=ra.obj0DarkGrey;d.obj0Black=ra.obj0Black;d.obj1White=ra.obj1White;d.obj1LightGrey=ra.obj1LightGrey;d.obj1DarkGrey=ra.obj1DarkGrey;d.obj1Black=ra.obj1Black;break;case 20:d.bgWhite=sa.bgWhite;
d.bgLightGrey=sa.bgLightGrey;d.bgDarkGrey=sa.bgDarkGrey;d.bgBlack=sa.bgBlack;d.obj0White=sa.obj0White;d.obj0LightGrey=sa.obj0LightGrey;d.obj0DarkGrey=sa.obj0DarkGrey;d.obj0Black=sa.obj0Black;d.obj1White=sa.obj1White;d.obj1LightGrey=sa.obj1LightGrey;d.obj1DarkGrey=sa.obj1DarkGrey;d.obj1Black=sa.obj1Black;break;case 70:d.bgWhite=ta.bgWhite;d.bgLightGrey=ta.bgLightGrey;d.bgDarkGrey=ta.bgDarkGrey;d.bgBlack=ta.bgBlack;d.obj0White=ta.obj0White;d.obj0LightGrey=ta.obj0LightGrey;d.obj0DarkGrey=ta.obj0DarkGrey;
d.obj0Black=ta.obj0Black;d.obj1White=ta.obj1White;d.obj1LightGrey=ta.obj1LightGrey;d.obj1DarkGrey=ta.obj1DarkGrey;d.obj1Black=ta.obj1Black;break;case 89:case 198:d.bgWhite=ua.bgWhite;d.bgLightGrey=ua.bgLightGrey;d.bgDarkGrey=ua.bgDarkGrey;d.bgBlack=ua.bgBlack;d.obj0White=ua.obj0White;d.obj0LightGrey=ua.obj0LightGrey;d.obj0DarkGrey=ua.obj0DarkGrey;d.obj0Black=ua.obj0Black;d.obj1White=ua.obj1White;d.obj1LightGrey=ua.obj1LightGrey;d.obj1DarkGrey=ua.obj1DarkGrey;d.obj1Black=ua.obj1Black;break;case 134:case 168:d.bgWhite=
va.bgWhite;d.bgLightGrey=va.bgLightGrey;d.bgDarkGrey=va.bgDarkGrey;d.bgBlack=va.bgBlack;d.obj0White=va.obj0White;d.obj0LightGrey=va.obj0LightGrey;d.obj0DarkGrey=va.obj0DarkGrey;d.obj0Black=va.obj0Black;d.obj1White=va.obj1White;d.obj1LightGrey=va.obj1LightGrey;d.obj1DarkGrey=va.obj1DarkGrey;d.obj1Black=va.obj1Black;break;case 191:case 206:case 209:case 240:d.bgWhite=wa.bgWhite;d.bgLightGrey=wa.bgLightGrey;d.bgDarkGrey=wa.bgDarkGrey;d.bgBlack=wa.bgBlack;d.obj0White=wa.obj0White;d.obj0LightGrey=wa.obj0LightGrey;
d.obj0DarkGrey=wa.obj0DarkGrey;d.obj0Black=wa.obj0Black;d.obj1White=wa.obj1White;d.obj1LightGrey=wa.obj1LightGrey;d.obj1DarkGrey=wa.obj1DarkGrey;d.obj1Black=wa.obj1Black;break;case 39:case 73:case 92:case 179:d.bgWhite=xa.bgWhite;d.bgLightGrey=xa.bgLightGrey;d.bgDarkGrey=xa.bgDarkGrey;d.bgBlack=xa.bgBlack;d.obj0White=xa.obj0White;d.obj0LightGrey=xa.obj0LightGrey;d.obj0DarkGrey=xa.obj0DarkGrey;d.obj0Black=xa.obj0Black;d.obj1White=xa.obj1White;d.obj1LightGrey=xa.obj1LightGrey;d.obj1DarkGrey=xa.obj1DarkGrey;
d.obj1Black=xa.obj1Black;break;case 201:d.bgWhite=ya.bgWhite;d.bgLightGrey=ya.bgLightGrey;d.bgDarkGrey=ya.bgDarkGrey;d.bgBlack=ya.bgBlack;d.obj0White=ya.obj0White;d.obj0LightGrey=ya.obj0LightGrey;d.obj0DarkGrey=ya.obj0DarkGrey;d.obj0Black=ya.obj0Black;d.obj1White=ya.obj1White;d.obj1LightGrey=ya.obj1LightGrey;d.obj1DarkGrey=ya.obj1DarkGrey;d.obj1Black=ya.obj1Black;break;case 112:d.bgWhite=za.bgWhite;d.bgLightGrey=za.bgLightGrey;d.bgDarkGrey=za.bgDarkGrey;d.bgBlack=za.bgBlack;d.obj0White=za.obj0White;
d.obj0LightGrey=za.obj0LightGrey;d.obj0DarkGrey=za.obj0DarkGrey;d.obj0Black=za.obj0Black;d.obj1White=za.obj1White;d.obj1LightGrey=za.obj1LightGrey;d.obj1DarkGrey=za.obj1DarkGrey;d.obj1Black=za.obj1Black;break;case 70:d.bgWhite=Aa.bgWhite;d.bgLightGrey=Aa.bgLightGrey;d.bgDarkGrey=Aa.bgDarkGrey;d.bgBlack=Aa.bgBlack;d.obj0White=Aa.obj0White;d.obj0LightGrey=Aa.obj0LightGrey;d.obj0DarkGrey=Aa.obj0DarkGrey;d.obj0Black=Aa.obj0Black;d.obj1White=Aa.obj1White;d.obj1LightGrey=Aa.obj1LightGrey;d.obj1DarkGrey=
Aa.obj1DarkGrey;d.obj1Black=Aa.obj1Black;break;case 211:d.bgWhite=Ba.bgWhite,d.bgLightGrey=Ba.bgLightGrey,d.bgDarkGrey=Ba.bgDarkGrey,d.bgBlack=Ba.bgBlack,d.obj0White=Ba.obj0White,d.obj0LightGrey=Ba.obj0LightGrey,d.obj0DarkGrey=Ba.obj0DarkGrey,d.obj0Black=Ba.obj0Black,d.obj1White=Ba.obj1White,d.obj1LightGrey=Ba.obj1LightGrey,d.obj1DarkGrey=Ba.obj1DarkGrey,d.obj1Black=Ba.obj1Black}b.GBCEnabled?(f(65384,192),f(65385,255),f(65386,193),f(65387,13)):(f(65384,255),f(65385,255),f(65386,255),f(65387,255));
k.currentCycles=0;k.NR50LeftMixerVolume=0;k.NR50RightMixerVolume=0;k.NR51IsChannel1EnabledOnLeftOutput=!0;k.NR51IsChannel2EnabledOnLeftOutput=!0;k.NR51IsChannel3EnabledOnLeftOutput=!0;k.NR51IsChannel4EnabledOnLeftOutput=!0;k.NR51IsChannel1EnabledOnRightOutput=!0;k.NR51IsChannel2EnabledOnRightOutput=!0;k.NR51IsChannel3EnabledOnRightOutput=!0;k.NR51IsChannel4EnabledOnRightOutput=!0;k.NR52IsSoundEnabled=!0;k.frameSequenceCycleCounter=0;k.downSampleCycleCounter=0;k.frameSequencer=0;k.audioQueueIndex=
0;w.initialize();J.initialize();G.initialize();K.initialize();f(k.memoryLocationNR50,119);f(k.memoryLocationNR51,243);f(k.memoryLocationNR52,241);t.channel1Sample=15;t.channel2Sample=15;t.channel3Sample=15;t.channel4Sample=15;t.channel1DacEnabled=!1;t.channel2DacEnabled=!1;t.channel3DacEnabled=!1;t.channel4DacEnabled=!1;t.leftChannelSampleUnsignedByte=127;t.rightChannelSampleUnsignedByte=127;t.mixerVolumeChanged=!0;t.mixerEnabledChanged=!0;t.needToRemixSamples=!1;m.updateInterruptEnabled(0);f(m.memoryLocationInterruptEnabled,
m.interruptsEnabledValue);m.updateInterruptRequested(225);f(m.memoryLocationInterruptRequest,m.interruptsRequestedValue);h.currentCycles=0;h.dividerRegister=0;h.timerCounter=0;h.timerModulo=0;h.timerEnabled=!1;h.timerInputClock=0;h.timerCounterOverflowDelay=!1;h.timerCounterWasReset=!1;b.GBCEnabled?(f(65284,30),h.dividerRegister=7840):(f(65284,171),h.dividerRegister=43980);f(65287,248);h.timerInputClock=248;V.currentCycles=0;V.numberOfBitsTransferred=0;b.GBCEnabled?(f(65282,124),V.updateTransferControl(124)):
(f(65282,126),V.updateTransferControl(126));b.GBCEnabled?(f(65392,248),f(65359,254),f(65357,126),f(65280,207),f(65295,225),f(65388,254),f(65397,143)):(f(65392,255),f(65359,255),f(65357,255),f(65280,207),f(65295,225));db=!1;Z.cyclesPerCycleSet=2E9;Z.cycleSets=0;Z.cycles=0;S.stepsPerStepSet=2E9;S.stepSets=0;S.steps=0},hasCoreStarted:function(){return db},saveState:function(){b.saveState();q.saveState();m.saveState();x.saveState();l.saveState();h.saveState();k.saveState();w.saveState();J.saveState();
G.saveState();K.saveState();db=!1},loadState:function(){b.loadState();q.loadState();m.loadState();x.loadState();l.loadState();h.loadState();k.loadState();w.loadState();J.loadState();G.loadState();K.loadState();db=!1;Z.cyclesPerCycleSet=2E9;Z.cycleSets=0;Z.cycles=0;S.stepsPerStepSet=2E9;S.stepSets=0;S.steps=0},isGBC:function(){return b.GBCEnabled},getStepsPerStepSet:function(){return S.stepsPerStepSet},getStepSets:function(){return S.stepSets},getSteps:function(){return S.steps},executeMultipleFrames:function(a){for(var b=
0,d=0;d<a&&0<=b;)b=$b(),d+=1;return 0>b?b:0},executeFrame:$b,executeFrameAndCheckAudio:function(a){void 0===a&&(a=0);return Fb(!0,a)},executeUntilCondition:Fb,executeStep:ac,getCyclesPerCycleSet:function(){return Z.cyclesPerCycleSet},getCycleSets:function(){return Z.cycleSets},getCycles:function(){return Z.cycles},setJoypadState:function(a,b,d,e,f,g,n,k){0<a?Oa(0):Da(0,!1);0<b?Oa(1):Da(1,!1);0<d?Oa(2):Da(2,!1);0<e?Oa(3):Da(3,!1);0<f?Oa(4):Da(4,!1);0<g?Oa(5):Da(5,!1);0<n?Oa(6):Da(6,!1);0<k?Oa(7):Da(7,
!1)},getNumberOfSamplesInAudioBuffer:Pb,clearAudioBuffer:Qb,setManualColorizationPalette:Jb,WASMBOY_MEMORY_LOCATION:0,WASMBOY_MEMORY_SIZE:bc,WASMBOY_WASM_PAGES:Ib,ASSEMBLYSCRIPT_MEMORY_LOCATION:0,ASSEMBLYSCRIPT_MEMORY_SIZE:1024,WASMBOY_STATE_LOCATION:1024,WASMBOY_STATE_SIZE:1024,GAMEBOY_INTERNAL_MEMORY_LOCATION:2048,GAMEBOY_INTERNAL_MEMORY_SIZE:tc,VIDEO_RAM_LOCATION:2048,VIDEO_RAM_SIZE:16384,WORK_RAM_LOCATION:18432,WORK_RAM_SIZE:32768,OTHER_GAMEBOY_INTERNAL_MEMORY_LOCATION:51200,OTHER_GAMEBOY_INTERNAL_MEMORY_SIZE:16384,
GRAPHICS_OUTPUT_LOCATION:uc,GRAPHICS_OUTPUT_SIZE:vc,GBC_PALETTE_LOCATION:Ua,GBC_PALETTE_SIZE:128,BG_PRIORITY_MAP_LOCATION:Va,BG_PRIORITY_MAP_SIZE:23552,FRAME_LOCATION:Za,FRAME_SIZE:93184,BACKGROUND_MAP_LOCATION:ob,BACKGROUND_MAP_SIZE:196608,TILE_DATA_LOCATION:Gb,TILE_DATA_SIZE:147456,OAM_TILES_LOCATION:pb,OAM_TILES_SIZE:15360,AUDIO_BUFFER_LOCATION:lb,AUDIO_BUFFER_SIZE:131072,CHANNEL_1_BUFFER_LOCATION:sb,CHANNEL_1_BUFFER_SIZE:131072,CHANNEL_2_BUFFER_LOCATION:tb,CHANNEL_2_BUFFER_SIZE:131072,CHANNEL_3_BUFFER_LOCATION:ub,
CHANNEL_3_BUFFER_SIZE:131072,CHANNEL_4_BUFFER_LOCATION:vb,CHANNEL_4_BUFFER_SIZE:131072,CARTRIDGE_RAM_LOCATION:Cb,CARTRIDGE_RAM_SIZE:131072,CARTRIDGE_ROM_LOCATION:nb,CARTRIDGE_ROM_SIZE:8258560,DEBUG_GAMEBOY_MEMORY_LOCATION:Hb,DEBUG_GAMEBOY_MEMORY_SIZE:65535,getWasmBoyOffsetFromGameBoyOffset:Bb,setProgramCounterBreakpoint:function(a){W.programCounter=a},resetProgramCounterBreakpoint:function(){W.programCounter=-1},setReadGbMemoryBreakpoint:function(a){W.readGbMemory=a},resetReadGbMemoryBreakpoint:function(){W.readGbMemory=
-1},setWriteGbMemoryBreakpoint:function(a){W.writeGbMemory=a},resetWriteGbMemoryBreakpoint:function(){W.writeGbMemory=-1},getRegisterA:function(){return b.registerA},getRegisterB:function(){return b.registerB},getRegisterC:function(){return b.registerC},getRegisterD:function(){return b.registerD},getRegisterE:function(){return b.registerE},getRegisterH:function(){return b.registerH},getRegisterL:function(){return b.registerL},getRegisterF:function(){return b.registerF},getProgramCounter:function(){return b.programCounter},
getStackPointer:function(){return b.stackPointer},getOpcodeAtProgramCounter:function(){return v(b.programCounter)},getLY:function(){return q.scanlineRegister},drawBackgroundMapToWasmMemory:function(a){var c=q.memoryLocationTileDataSelectZeroStart;u.bgWindowTileDataSelect&&(c=q.memoryLocationTileDataSelectOneStart);var d=q.memoryLocationTileMapSelectZeroStart;u.bgTileMapDisplaySelect&&(d=q.memoryLocationTileMapSelectOneStart);for(var f=0;256>f;f++)for(var g=0;256>g;g++){var k=f,l=g,m=d+32*(k>>3)+(l>>
3),h=T(m,0);h=ab(c,h);var p=k%8;k=l%8;k=7-k;l=0;b.GBCEnabled&&0<a&&(l=T(m,1));n(6,l)&&(p=7-p);var r=0;n(3,l)&&(r=1);m=T(h+2*p,r);h=T(h+2*p+1,r);p=0;n(k,h)&&(p+=1,p<<=1);n(k,m)&&(p+=1);h=3*(256*f+g);b.GBCEnabled&&0<a?(m=gb(l&7,p,!1),l=pa(0,m),k=pa(1,m),m=pa(2,m),h=ob+h,e[h]=l,e[h+1]=k,e[h+2]=m):(l=fb(p,q.memoryLocationBackgroundPalette),h=ob+h,e[h+0]=(l&16711680)>>16,e[h+1]=(l&65280)>>8,e[h+2]=l&255)}},drawTileDataToWasmMemory:function(){for(var a=0;23>a;a++)for(var c=0;31>c;c++){var d=0;15<c&&(d=
1);var e=a;15<a&&(e-=15);e<<=4;e=15<c?e+(c-15):e+c;var f=q.memoryLocationTileDataSelectOneStart;15<a&&(f=q.memoryLocationTileDataSelectZeroStart);for(var g=q.memoryLocationBackgroundPalette,k=-1,l=-1,h=0;8>h;h++)for(var m=0;5>m;m++){var p=4*(8*m+h),r=v(q.memoryLocationSpriteAttributesTable+p+2);e===r&&(p=v(q.memoryLocationSpriteAttributesTable+p+3),r=0,b.GBCEnabled&&n(3,p)&&(r=1),r===d&&(l=p,h=8,m=5,g=q.memoryLocationSpritePaletteOne,n(4,l)&&(g=q.memoryLocationSpritePaletteTwo)))}if(b.GBCEnabled&&
0>l){h=q.memoryLocationTileMapSelectZeroStart;u.bgTileMapDisplaySelect&&(h=q.memoryLocationTileMapSelectOneStart);m=-1;for(p=0;32>p;p++)for(r=0;32>r;r++){var t=h+32*r+p,w=T(t,0);e===w&&(m=t,r=p=32)}0<=m&&(k=T(m,1))}for(h=0;8>h;h++)rb(e,f,d,0,7,h,8*c,8*a+h,248,Gb,!1,g,k,l)}},drawOamToWasmMemory:function(){for(var a=0;8>a;a++)for(var c=0;5>c;c++){var d=4*(8*c+a);v(q.memoryLocationSpriteAttributesTable+d);v(q.memoryLocationSpriteAttributesTable+d+1);var e=v(q.memoryLocationSpriteAttributesTable+d+2),
f=1;u.tallSpriteSize&&(1===e%2&&--e,f+=1);d=v(q.memoryLocationSpriteAttributesTable+d+3);var g=0;b.GBCEnabled&&n(3,d)&&(g=1);var h=q.memoryLocationSpritePaletteOne;n(4,d)&&(h=q.memoryLocationSpritePaletteTwo);for(var k=0;k<f;k++)for(var l=0;8>l;l++)rb(e+k,q.memoryLocationTileDataSelectOneStart,g,0,7,l,8*a,16*c+l+8*k,64,pb,!1,h,-1,d)}},getDIV:function(){return h.dividerRegister},getTIMA:function(){return h.timerCounter},getTMA:function(){return h.timerModulo},getTAC:function(){var a=h.timerInputClock;
h.timerEnabled&&(a|=4);return a},updateDebugGBMemory:function(){for(var a=0;65535>a;a++){var b=zb(a);e[Hb+a]=b}W.reachedBreakpoint=!1}});return async()=>({instance:{exports:wc},byteMemory:eb.wasmByteMemory,type:"TypeScript"})});
//# sourceMappingURL=getWasmBoyTsCore.closure.umd.js.map
